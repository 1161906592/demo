(function(e,t){"object"===typeof exports&&"object"===typeof module?module.exports=t(require("Vue"),require("VueRouter")):"function"===typeof define&&define.amd?define(["Vue","VueRouter"],t):"object"===typeof exports?exports["micro_navBar"]=t(require("Vue"),require("VueRouter")):e["micro_navBar"]=t(e["Vue"],e["VueRouter"])})(window,(function(e,t){return function(e){function t(t){for(var n,s,c=t[0],i=t[1],u=t[2],h=0,d=[];h<c.length;h++)s=c[h],Object.prototype.hasOwnProperty.call(o,s)&&o[s]&&d.push(o[s][0]),o[s]=0;for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n]);l&&l(t);while(d.length)d.shift()();return r.push.apply(r,u||[]),a()}function a(){for(var e,t=0;t<r.length;t++){for(var a=r[t],n=!0,c=1;c<a.length;c++){var i=a[c];0!==o[i]&&(n=!1)}n&&(r.splice(t--,1),e=s(s.s=a[0]))}return e}var n={},o={navBar:0},r=[];function s(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,s),a.l=!0,a.exports}s.m=e,s.c=n,s.d=function(e,t,a){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(s.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)s.d(a,n,function(t){return e[t]}.bind(null,n));return a},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/microApp/";var c=window["webpackJsonpmicro_name_"]=window["webpackJsonpmicro_name_"]||[],i=c.push.bind(c);c.push=t,c=c.slice();for(var u=0;u<c.length;u++)t(c[u]);var l=i;return r.push([12,"chunk-vendors","chunk-common"]),a()}({12:function(e,t,a){e.exports=a("2936")},2293:function(e,t,a){"use strict";var n={getAccountInfo:"/admin/account/getAccountInfo",updateBaseUserInfo:"/admin/account/updateAccount",changeUserName:"/admin/account/updateAccountName",updatePassword:"/admin/account/updateAccountPassword",updatePhoto:"/admin/person/updatePhoto",toolBar:{getUserTools:"/admin/map/data/location/menu",getSystemTools:"/admin/map/system/toolbar/get"},mapStyle:"/admin/map/custom/style/get",chartsList:"/admin/map/custom/chart/list",findTypeTree:"/admin/typeDetail/findTypeTree",getMarkerData:"/admin/map/data/location/get",getTypeTree:"/admin/map/data/location/system/menu",getDetail:{device:"/admin/device/getOneById/",building:"/admin/building/getOneById/",car:"/admin/car/get/",person:"/admin/person/getPersonById?personId="},getAllEvent:"/admin/map/data/location/device/warn",getTenantInfo:"/admin/tenant/current/info"};t["a"]=n},2936:function(e,t,a){"use strict";a.r(t);a("cadf"),a("551c"),a("f751"),a("097d");var n=a("8bbf"),o=a.n(n),r=a("7038"),s=a.n(r),c=a("6389"),i=a.n(c),u=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"nav-bar"}},[a("aside",{staticClass:"aside",class:{fullscreen:e.fullscreen}},[a("div",{staticClass:"logo"}),a("div",{staticClass:"menu-container"},[a("div",{staticClass:"menu-scroll"},[a("el-menu",{ref:"elMenu",staticClass:"menu",attrs:{"background-color":"#373737","text-color":"#999A9F","default-active":e.defaultActive,"unique-opened":""},on:{select:e.handleSelectMenu}},[a("q-menu",{attrs:{data:e.menuData},on:{select:e.handleSelect}})],1)],1)])]),a("header",{staticClass:"header",class:{fullscreen:e.fullscreen}},[a("div",{staticClass:"top-bar"},[a("div",{staticClass:"left"},[a("div",{staticClass:"collapse"},[e.fullscreen?a("i",{staticClass:"el-icon-s-unfold",on:{click:e.handleUnFoldMenu}}):a("i",{staticClass:"el-icon-s-fold",on:{click:e.handleFoldMenu}})]),a("div",{staticClass:"current-team"},[a("span",[e._v("当前：")]),a("el-select",{staticClass:"navbar-team-name",attrs:{size:"small"},on:{change:e.changeTeam},model:{value:e.currentTeam,callback:function(t){e.currentTeam=t},expression:"currentTeam"}},e._l(e.teamList,(function(e){return a("el-option",{key:e.tenantId,attrs:{value:e.tenantId,label:e.tenantName}})})),1)],1)]),a("div",{staticClass:"right"},[a("el-popover",{attrs:{placement:"bottom-end",width:"146",trigger:"hover"}},[a("div",{staticClass:"popover-wrap"},[a("div",{staticClass:"popover-item",on:{click:function(t){return e.goPersonInfo("/personInfo")}}},[e._v("修改个人信息")]),a("div",{staticClass:"popover-item",on:{click:function(t){return e.goPersonInfo("/changePass")}}},[e._v("修改密码")]),a("div",{staticClass:"popover-item",on:{click:e.logout}},[e._v("退出登录")])]),a("div",{attrs:{slot:"reference"},slot:"reference"},[a("span",{staticClass:"realName"},[e._v("欢迎您， "+e._s(e.realName))]),a("i",{staticClass:"el-icon-caret-bottom"})])])],1)]),a("div",{staticClass:"location"},[e._v("\n      当前位置：\n      "),a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",{staticStyle:{cursor:"pointer"},nativeOn:{click:function(t){return e.handleToRoot(t)}}},[e._v("首页")]),e._l(e.locationInfo,(function(t,n){return a("el-breadcrumb-item",{key:n},[e._v(e._s(t))])}))],2)],1)]),a("router-view",{staticClass:"app-container"})],1)},l=[],h=(a("8615"),a("6762"),a("2fdb"),a("3b2b"),a("4917"),a("f559"),a("7f7f"),a("7514"),a("ac6a"),a("96cf"),a("3b8d")),d=(a("28a5"),a("d225")),p=a("b0b4"),f=a("308d"),m=a("6bb5"),g=a("4e2b"),v=a("9ab4"),b=a("60a3"),y=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e._l(e.data,(function(t){return[t.children&&t.children.length?a("submenu",{key:t.id,attrs:{index:t.path||""}},[a("template",{slot:"title"},[a("i",{class:"font_family "+t.icon}),a("span",{attrs:{slot:"title"},slot:"title"},[e._v(" "+e._s(t.name))])]),a("q-menu",{attrs:{data:t.children},on:{select:e.handleSelect}})],2):a("menu-item",{key:t.id,attrs:{index:t.path||""},nativeOn:{click:function(a){return e.handleSelect(t)}}},[a("i",{class:"font_family "+t.icon}),a("span",{attrs:{slot:"title"},slot:"title"},[e._v(" "+e._s(t.name))])])]}))],2)},T=[],w=(a("8bd8"),a("450d"),a("4cb2")),k=a.n(w),_=(a("ce18"),a("f58e")),q=a.n(_),I=function(e){function t(){return Object(d["a"])(this,t),Object(f["a"])(this,Object(m["a"])(t).apply(this,arguments))}return Object(g["a"])(t,e),Object(p["a"])(t,[{key:"handleSelect",value:function(e){this.$emit("select",e)}}]),t}(b["e"]);v["__decorate"]([Object(b["d"])({type:Array,required:!0})],I.prototype,"data",void 0),I=v["__decorate"]([Object(b["a"])({name:"QMenu",components:{Submenu:q.a,MenuItem:k.a}})],I);var P,S=I,O=S,M=a("2877"),j=Object(M["a"])(O,y,T,!1,null,null,null),C=j.exports,x={logout:"/api/user/logout",getTeamList:"/api/tenant/change/getTenants",changeTeam:"/api/tenant/change/changeTenant"},N=x,A=a("c195"),L=a("73ec"),$=a("2293"),F=P=function(e){function t(){var e;return Object(d["a"])(this,t),e=Object(f["a"])(this,Object(m["a"])(t).apply(this,arguments)),e.menuData=[],e.hashMap={},e.realName=localStorage.getItem("realName")||"",e.defaultActive=location.href.split(location.origin+qTouch.basePath)[1]||"",e.fullscreen=!1,e.locationInfo=[],e.currentTeam="",e.teamList=[],e}return Object(g["a"])(t,e),Object(p["a"])(t,[{key:"handlePathChange",value:function(e){this.defaultActive=e.split(qTouch.basePath)[1]||"";var t=this.$refs.elMenu.items[this.defaultActive];t&&this.handleSelectMenu(t.index,t.indexPath)}},{key:"created",value:function(){var e=localStorage.getItem("menus");e&&(this.menuData=JSON.parse(e),L["a"].convertMenus(this.menuData,this.hashMap)),qTouch.on("switchFullscreen",this.switchFullscreen),this.fullscreen=!!localStorage.getItem("isFullScreen"),this.fullscreen?document.body.classList.add("full-screen"):document.body.classList.remove("full-screen"),qTouch.on("changeName",this.handleChangeName),window.addEventListener("single-spa:routing-event",this.handleRouteChange),this.getTeamList(),this.getUserInfo()}},{key:"mounted",value:function(){var e=this.$refs.elMenu.items[this.defaultActive];e&&this.handleSelectMenu(e.index,e.indexPath)}},{key:"beforeDestroy",value:function(){qTouch.off("switchFullscreen",this.switchFullscreen),qTouch.off("changeName",this.handleChangeName),window.removeEventListener("single-spa:routing-event",this.handleRouteChange)}},{key:"switchFullscreen",value:function(e){e?localStorage.setItem("isFullScreen","1"):localStorage.removeItem("isFullScreen"),location.reload()}},{key:"handleChangeName",value:function(e){this.realName=e}},{key:"handleSelect",value:function(e){"_self"===e.target?1===e.pathType?qTouch.navigateToUrl(e.path):3===e.pathType?this.getDetailAddress(e.path,e.target):qTouch.navigateToUrl("/qTouch/openPath?path="+e.path):3===e.pathType?this.getDetailAddress(e.path,e.target):window.open(e.path,e.target)}},{key:"getDetailAddress",value:function(){var e=Object(h["a"])(regeneratorRuntime.mark((function e(t,a){var n,o,r,s,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$http.get(t);case 2:n=e.sent,o=n.data,r=o.data,s=o.status,c=o.message,s?(console.log(r),"_self"===a?qTouch.navigateToUrl("/qTouch/openPath?path="+r):window.open(r,a)):this.$message.error(c);case 8:case"end":return e.stop()}}),e,this)})));function t(t,a){return e.apply(this,arguments)}return t}()},{key:"handleSelectMenu",value:function(e,t){var a=this,n=this.menuData;this.locationInfo=[],t.forEach((function(e){var t=n.find((function(t){return t.path===e}));t&&(a.locationInfo.push(t.name),n=t.children)}))}},{key:"handleToRoot",value:function(){qTouch.navigateToUrl(qTouch.appPathMap.root)}},{key:"handleFoldMenu",value:function(){qTouch.emit("switchFullscreen",!0)}},{key:"handleUnFoldMenu",value:function(){qTouch.emit("switchFullscreen",!1)}},{key:"getTeamList",value:function(){var e=this;this.$http.get(N.getTeamList).then((function(t){if(t.data.status){for(var a in e.teamList=t.data.data,e.teamList)if(e.teamList[a].currentFlag){e.currentTeam=e.teamList[a].tenantId;break}}else e.$message.error(t.data.message)}))}},{key:"getUserInfo",value:function(){this.$http.get($["a"].getAccountInfo).then((function(e){e.data.status&&localStorage.setItem("realName",e.data.data.realName)}))}},{key:"changeTeam",value:function(e){var t=this;this.$confirm("确定切换？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.$http.get(N.changeTeam,{params:{tenantId:t.currentTeam}}).then((function(e){if(e.data.status){var a=e.data.data;t.$message.success("切换成功"),localStorage.clear(),A["a"].set("accessToken",a.accessToken),localStorage.setItem("menus",JSON.stringify(a.menus)),localStorage.setItem("realName",a.realName),localStorage.setItem("userName",a.username);var n={};a.baseTypes.forEach((function(e){n[e.code]=!0})),localStorage.setItem("baseTypeCodeMap",JSON.stringify(n)),qTouch.navigateToUrl(qTouch.appPathMap.root),window.location.reload()}else t.$message.error(e.data.message)}))})).catch((function(){for(var e in t.teamList)if(t.teamList[e].currentFlag){t.currentTeam=t.teamList[e].tenantId;break}}))}},{key:"logout",value:function(){var e=Object(h["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.$confirm("确定退出？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.$http.post(N.logout).then((function(e){e.data.status?(localStorage.clear(),A["a"].remove("accessToken"),qTouch.navigateToUrl(qTouch.appPathMap.login)):t.$message.error(e.data.message)}))})).catch((function(){}));case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"goPersonInfo",value:function(e){this.locationInfo="/personInfo"===e?["个人中心"]:["修改密码"],qTouch.navigateToUrl(qTouch.appPathMap.root+e)}},{key:"handleToHistoryPath",value:function(){if("/"===location.pathname){var e=localStorage.getItem("historyPath");e?qTouch.navigateToUrl(e):qTouch.navigateToUrl(qTouch.appPathMap.login)}}},{key:"handleRouteChange",value:function(){location.pathname.startsWith(qTouch.basePath)?localStorage.setItem("historyPath",location.pathname+location.hash):localStorage.setItem("historyPath","");var e=window.location.pathname;"/"===e?qTouch.navigateToUrl(qTouch.appPathMap.login):/\/root/.test(e)||/\/login/.test(e)||/\/error\//.test(e)||this.hashMap[e];var t=location.pathname.match(new RegExp(qTouch.basePath+"(/[^/]+)"));"/"!==location.pathname&&(!t||Object.values(qTouch.appPathMap).includes(t[1]))}}],[{key:"genMenus",value:function(e,t,a){t++,e&&e.forEach((function(e){1===t&&(e.path=a+e.path.substr(1)),2===t&&(e.path=a+e.path),P.genMenus(e.children,t,e.path)}))}}]),t}(b["e"]);v["__decorate"]([Object(b["f"])("$route.path")],F.prototype,"handlePathChange",null),F=P=v["__decorate"]([Object(b["a"])({components:{QMenu:C}})],F);var U=F,R=U,B=(a("6b19"),a("6bfb"),Object(M["a"])(R,u,l,!1,null,"3a331526",null)),D=B.exports;o.a.use(i.a);var E={mode:"history",base:qTouch.basePath+qTouch.appPathMap.navBar,routes:[]},V=E,J=a("c947"),Q=(a("4ca3"),a("443e")),z=a.n(Q),H=z.a,W=H,G={install:function(e){e.component("qMenu",C)}},K=a("3b21"),X=a("3348"),Y=a("d26d"),Z=a("8162"),ee=a("427a"),te=a("663b"),ae=a("3c8d"),ne=a("5d37"),oe=a("ffeb"),re=a("0848"),se=a("4579"),ce=a("56b0"),ie=a("b301"),ue=a("60ab"),le=a("7969"),he=a("537f"),de=a("6156"),pe=a("bda4"),fe=a("80d3"),me=a("1b9c");o.a.use(J["a"]),o.a.use(W),o.a.use(G),o.a.use(K["a"]),o.a.use(X["a"]),o.a.use(Y["a"]),o.a.use(Z["a"]),o.a.use(ee["a"]),o.a.use(te["a"]),o.a.use(X["a"]),o.a.use(ae["a"]),o.a.use(ne["a"]),o.a.use(oe["a"]),o.a.use(re["a"]),o.a.use(se["a"]),o.a.use(ce["a"]),o.a.use(ie["a"]),o.a.use(ue["a"]),o.a.use(le["a"]),o.a.use(he["a"]),o.a.use(de["a"]),o.a.use(pe["a"]),o.a.use(fe["a"]),o.a.use(me["a"]),a.d(t,"bootstrap",(function(){return ve})),a.d(t,"mount",(function(){return be})),a.d(t,"unmount",(function(){return ye})),o.a.config.productionTip=!1;var ge=s()({Vue:o.a,appOptions:function(){return{router:new i.a(V),render:function(e){return e(D)}}}}),ve=ge.bootstrap,be=ge.mount,ye=ge.unmount},6389:function(e,a){e.exports=t},"6b19":function(e,t,a){"use strict";var n=a("ecd1"),o=a.n(n);o.a},"6bfb":function(e,t,a){"use strict";var n=a("b503"),o=a.n(n);o.a},"8bbf":function(t,a){t.exports=e},b503:function(e,t,a){},ecd1:function(e,t,a){}})}));
//# sourceMappingURL=navBar.e62843e4e99f9a95e953.js.map