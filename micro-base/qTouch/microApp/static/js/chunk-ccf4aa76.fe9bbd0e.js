(window["webpackJsonpmicro_name_"]=window["webpackJsonpmicro_name_"]||[]).push([["chunk-ccf4aa76"],{"0d6d":function(e,t,i){var a=i("d3f4"),n=i("67ab").onFreeze;i("5eda")("freeze",(function(e){return function(t){return e&&a(t)?e(n(t)):t}}))},"1de9":function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"container"},[i("div",{staticClass:"header"},[i("el-input",{staticClass:"input",attrs:{size:"small",placeholder:"设备名称",clearable:""},model:{value:e.deviceName,callback:function(t){e.deviceName=t},expression:"deviceName"}}),i("el-select",{staticClass:"input",attrs:{size:"small",clearable:"",placeholder:"时间范围"},model:{value:e.time,callback:function(t){e.time=t},expression:"time"}},e._l(e.timeOptions,(function(e,t){return i("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),1),i("el-cascader",{staticClass:"input",attrs:{size:"small",placeholder:"设备类型",clearable:"",options:e.typeOptions,props:{label:"name",value:"id",checkStrictly:!0}},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleCurrentChange(1)}},model:{value:e.deviceTypeId,callback:function(t){e.deviceTypeId=t},expression:"deviceTypeId"}}),i("q-search-button",{on:{click:function(t){return e.handleCurrentChange(1)}}})],1),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{"margin-top":"20px"}},[i("el-table",{ref:"multipleTable",staticStyle:{width:"100%","min-height":"calc(100vh - 294px)"},attrs:{data:e.tableData}},[i("el-table-column",{attrs:{align:"center",prop:"id",label:"序号",type:"index",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",[e._v(e._s(t.$index+(e.pageNum-1)*e.pageSize+1)+" ")])]}}])}),i("el-table-column",{attrs:{prop:"warningTime",label:"报警时间",formatter:function(t){return e.$moment(t.warningTime).format("YYYY-MM-DD HH:mm:ss")},"show-overflow-tooltip":""}}),i("el-table-column",{attrs:{prop:"deviceTypeName",label:"设备类型","min-width":"","show-overflow-tooltip":""}}),i("el-table-column",{attrs:{prop:"deviceName",label:"设备名称","min-width":"","show-overflow-tooltip":""}}),i("el-table-column",{attrs:{prop:"statusDefinition",label:"报警状态","min-width":"","show-overflow-tooltip":""}}),i("el-table-column",{attrs:{align:"center",label:"操作",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{attrs:{size:"mini",type:"text",icon:"el-icon-view",title:"报警数据"},on:{click:function(i){return e.handleViewDetail(t.row)}}},[e._v("报警数据")])]}}])})],1)],1),i("q-pagination",{attrs:{"current-page":e.pageNum,size:"small","page-size":e.pageSize,"page-sizes":[10,20,50,100],layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.pageNum=t},"update:current-page":function(t){e.pageNum=t}}}),i("el-dialog",{attrs:{title:"报警数据",visible:e.dialog,"close-on-click-modal":!1,width:"600px"},on:{"update:visible":function(t){e.dialog=t}}},[i("el-table",{attrs:{data:e.detailData}},[i("el-table-column",{attrs:{label:"检测项目",prop:"type"}}),i("el-table-column",{attrs:{label:"数据",formatter:function(e){return e.value+" "+(e.unit||"")}}})],1)],1)],1)},n=[],d=(i("96cf"),i("3b8d")),s=(i("0d6d"),i("d225")),l=i("b0b4"),r=i("308d"),c=i("6bb5"),o=i("4e2b"),u=i("9ab4"),p=i("60a3"),m=i("ef0f"),v=i("4791"),g=function(e){function t(){var e;return Object(s["a"])(this,t),e=Object(r["a"])(this,Object(c["a"])(t).apply(this,arguments)),e.typeOptions=[],e.deviceTypeId="",e.deviceName="",e.time="",e.timeOptions=Object.freeze([{label:"最近5分钟",value:"five"},{label:"最近10分钟",value:"ten"},{label:"最近15分钟",value:"quarters"},{label:"最近30分钟",value:"twoQuarters"},{label:"最近45分钟",value:"threeQuarters"},{label:"最近60分钟",value:"hour"}]),e.tableData=[],e.pageSize=10,e.pageNum=1,e.total=0,e.loading=!1,e.dialog=!1,e.detailData=[],e}return Object(o["a"])(t,e),Object(l["a"])(t,[{key:"created",value:function(){this.getTypeOptions(),this.getTableData()}},{key:"getTypeOptions",value:function(){var e=Object(d["a"])(regeneratorRuntime.mark((function e(){var t,i,a,n,d;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$http.get(m["a"].getDeviceTypeTree);case 2:t=e.sent,i=t.data,a=i.data,n=i.status,d=i.message,n?(this.typeOptions=a,Object(v["a"])(this.typeOptions)):this.$message.error(d);case 8:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getTableData",value:function(){var e=Object(d["a"])(regeneratorRuntime.mark((function e(){var t,i,a,n,d;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.loading=!0,e.prev=1,e.next=4,this.$http.post(m["a"].getDeviceAlarmRecord,{current:this.pageNum,size:this.pageSize,query:{deviceName:this.deviceName,deviceTypeId:this.deviceTypeId?this.deviceTypeId[this.deviceTypeId.length-1]:"",time:this.time}});case 4:t=e.sent,i=t.data,a=i.data,n=i.status,d=i.message,n?a&&(this.tableData=a.list,this.total=a.totalElements):this.$message.error(d);case 10:return e.prev=10,this.loading=!1,e.finish(10);case 13:case"end":return e.stop()}}),e,this,[[1,,10,13]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"handleCurrentChange",value:function(e){this.pageNum=e,this.getTableData()}},{key:"handleViewDetail",value:function(e){this.dialog=!0,this.detailData=e.warningValues.map((function(e){return e.attributeInfos})).reduce((function(e,t){return e.concat(t)}))}}]),t}(p["e"]);g=u["__decorate"]([Object(p["a"])({})],g);var f=g,y=f,h=(i("e9f4"),i("2877")),b=Object(h["a"])(y,a,n,!1,null,"68dec1f1",null);t["default"]=b.exports},4791:function(e,t,i){"use strict";i("ac6a");function a(e){e.forEach((function(e){e.children&&e.children.length?a(e.children):delete e.children}))}t["a"]=a},cc08:function(e,t,i){},e9f4:function(e,t,i){"use strict";var a=i("cc08"),n=i.n(a);n.a},ef0f:function(e,t,i){"use strict";var a="/admin/device/",n={getPaging:"/admin/device/pagingDevice",add:"/admin/device/add",update:"/admin/device/update",delete:"/admin/device/delete",multipleDelete:"/admin/device/multipleDelete",getNewOrgTree:"/admin/organization/orgTree/device",getOneById:"/admin/device/getOneById",addCondition:"/admin/device/condition/add",updateCondition:"/admin/device/condition/update",deleteCondition:"/admin/device/condition/delete/",getConditionList:"/admin/device/condition/listByDeviceId/",updateConditionItem:"/admin/device/condition/item/update/deviceConditionId/",getDeviceStatusList:"/admin/device/status/listByDeviceId/",updateDeviceStatusStyle:"/admin/device/status/updateStyle/deviceStatusId/",addDeviceStatusConditions:"/admin/device/status/condition/addDeviceStatusConditions/",getDeviceTypeTree:"/admin/typeDetail/findTypeTree/device",classifyTree:a+"classify/list",addClassify:a+"classify/add",updateClassify:a+"classify/update",deleteClassify:a+"classify/delete/",getClaasifyDeviceList:a+"classify/relation/bindingInfo/classifyId/",listNotBindByClassifyId:a+"classify/relation/listNotBindByClassifyId/classifyId/",classifyBind:a+"classify/relation/bind",classifyUnbind:a+"classify/relation/unbind/relationId/",multipleDeleteDevice:"/admin/device/multipleDelete",deleteOneDevice:"/admin/device/",getOneDevice:a+"getOneById/",addDeviceInfo:a+"add",updateDeviceInfo:a+"update",deviceBindSensor:a+"sensor/bind/deviceId/",getBindSensor:a+"sensor/listSensorByDeviceId/deviceId/",deleteBindSensor:a+"sensor/unbind",getSensorPage:"/admin/sensor/paging",getSensorAttr:"/admin/sensor/attribute/listBySensorId/",getEventDefinition:"/admin/event/definition/paging",findTypeTree:"/admin/typeDetail/findTypeTree",getTemplateByTypeDetaiId:"/admin/typeDetail/getTemplateByTypeDetaiId",getTypeDetail:"/admin/typeDetail",deleteType:"/admin/typeDetail/delete",saveCustomAttrItems:"/admin/typeDetail/saveCustomAttrItems",sensorHistory:"/admin/sensor/deviceSensorDataToChart/",getCurrentData:"/admin/sensor/deviceCurrentSensorDataToChart/",getTimeQuantumData:"/admin/sensor/staticDeviceSensorDataToChart",getDeviceTypeStatusList:"/admin/deviceStatusDefinition/listByDeviceTypeId/",addDeviceStatus:"/admin/deviceStatusDefinition/add",updateDeviceStatus:"/admin/deviceStatusDefinition/update",deleteDeviceStatus:"/admin/deviceStatusDefinition/delete/",getStatusInfoByStatusId:"/admin/deviceStatusDefinition/getInfoByStatusId/",getDeviceAlarmRecord:"/admin/device/terms/getWarningRecords",listWarningTerms:"/admin/device/terms/listWarningTerms/",addStatusRule:"/admin/device/terms/addStatusRule",updateStatusRule:"/admin/device/terms/updateStatusRule",deleteByWarningTermId:"/admin/device/terms/deleteByWarningTermId/",getAccessStatus:"/admin/device/terms/getAccessStatus/",getPersonPaging:"/admin/person/pagingMessagePerson",getRoleList:"/admin/role/list",listEventTerms:"/admin/device/terms/listEventTerms/",addEventRule:"/admin/device/terms/addEventRule",updateEventRule:"/admin/device/terms/updateEventsRule",deleteByEventTermId:"/admin/device/terms/deleteByEventTermId/",checkExpression:"/admin/device/terms/checkRule",download:"/api/excel/download/deviceTemplate",upload:"/api/excel/upload/deviceTemplate"};t["a"]=n}}]);
//# sourceMappingURL=chunk-ccf4aa76.fe9bbd0e.js.map