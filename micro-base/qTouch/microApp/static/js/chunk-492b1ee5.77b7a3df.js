(window["webpackJsonpmicro_name_"]=window["webpackJsonpmicro_name_"]||[]).push([["chunk-492b1ee5"],{"0797":function(e,t,a){"use strict";var o={getCodesListByCatalog:"/admin/code/info/list/catalog/",getInspectQRCodes:"/admin/catalog/tree",getSensorsListByPart:"/api/partsSensorRelation/getSensorIds",getSensorInfoById:"/api/sensor/getSensorById",getPartsList:"/admin/parts/getList",getCodeById:"/api/sensor/getSensorById",updateCode:"/api/sensor/getSensorById",saveCode:"/api/sensor/getSensorById",deleteCode:"/api/sensor/getSensorById",addTemplateNode:"/api/sensor/getSensorById",previewCode:"/api/sensor/getSensorById",deleteTemplate:"/api/sensor/getSensorById",getPlansListByCatalog:"/api/sensor/getSensorById",getInspectPlans:"/api/sensor/getSensorById",catalog:{add:"/admin/catalog/add",update:"/admin/catalog/update",delete:"/admin/catalog/delete/",tree:"/admin/catalog/tree",typeTree:"/admin/catalog/tree/"},qrCode:{listById:"/admin/code/info/list/catalog/",save:"/admin/code/info/save",update:"/admin/code/info/update",delete:"/admin/code/info/delete/",preview:"/admin/code/info/preview/",detail:"/admin/code/info/detail/",isBinded:"/admin/code/info/verify/device/"},template:{list:"/admin/inspect/template/list/catalog/",listForOrg:"/admin/inspect/template/getInspectTemplateByOrgId",detail:"/admin/inspect/template/get/",save:"/admin/inspect/template/saveTemplate",delete:"/admin/inspect/template/"},personGroup:{group:{add:"/admin/person/group/add",all:"/admin/person/group/all",list:"/admin/person/group/list",delete:"/admin/person/group/delete/",update:"/admin/person/group/update"},person:{list:"/admin/inspect/person/list/",add:"/admin/inspect/person/add",update:"/admin/inspect/person/put",delete:"/admin/inspect/person/delete/"}},record:{list:"/admin/inspect/record/pagination",save:"/admin/inspect/record/save"},other:{getAllUserList:"/admin/getUserList",getAllUser:"/admin/processDesigner/public/visible/getAllUser",getAllEventType:"/admin/event/type/tree"}};t["a"]=o},"353b":function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("q-card",{staticClass:"sub_menu",attrs:{title:"二维码目录","btn-tip":"添加一级节点"},on:{click:function(t){return e.openNodeForm("add")}}},[a("div",{staticClass:"tree-body"},[a("el-tree",{ref:"codesTree",staticStyle:{"margin-top":"16px"},attrs:{"default-expand-all":"",data:e.codesData,"node-key":"id",props:e.codesProp},on:{"node-click":e.handleNodeClick},scopedSlots:e._u([{key:"default",fn:function(t){var o=t.node,i=t.data;return a("div",{staticClass:"operation-buttons"},[a("span",{attrs:{title:o.label}},[e._v(e._s(o.label))]),a("div",[a("el-button",{on:{click:function(t){return t.stopPropagation(),e.openNodeForm("add",i)}}}),a("el-button",{on:{click:function(t){return t.stopPropagation(),e.openNodeForm("edit",i)}}}),a("el-button",{on:{click:function(t){return t.stopPropagation(),e.removeTreeNode(o,i)}}})],1)])}}])})],1)]),a("q-card",{staticClass:"sub_main"},[a("div",{staticClass:"header"},[a("div",[e._v(e._s(e.codesName))]),a("div",[a("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-paperclip"}},[e._v("方案绑定")]),a("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-download"}},[e._v("二维码下载")]),a("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-plus"},on:{click:function(t){return e.addACode()}}},[e._v("单个建码")])],1)]),a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{"margin-top":"20px"}},[a("el-table",{ref:"codesListTable",staticStyle:{width:"100%"},attrs:{data:e.codesListData}},[a("el-table-column",{attrs:{type:"selection",width:"45"}}),a("el-table-column",{attrs:{prop:"codeName",label:"二维码名称",align:"center",width:"200"}}),a("el-table-column",{attrs:{prop:"templateName",label:"方案名称",align:"center",width:"200"}}),a("el-table-column",{attrs:{prop:"deviceName",label:"关联设备",align:"center",width:"160"}}),a("el-table-column",{attrs:{prop:"location",label:"地址",align:"center"}}),a("el-table-column",{attrs:{label:"操作",align:"center",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"medium",type:"text",icon:"el-icon-picture"},on:{click:function(a){return e.previewQRCode(t.row)}}}),a("el-button",{attrs:{size:"medium",type:"text",icon:"el-icon-view"},on:{click:function(a){return e.handleCodeView(t.row)}}}),a("el-button",{attrs:{size:"medium",type:"text",icon:"el-icon-edit"},on:{click:function(a){return e.handleCodeEdit(t.row)}}}),a("el-button",{attrs:{size:"medium",type:"text",icon:"el-icon-delete"},on:{click:function(a){return e.handleCodeDelete(t.row)}}})]}}])})],1)],1)]),a("el-dialog",{attrs:{title:"二维码图片预览",visible:e.codePreview,width:"340px","close-on-click-modal":!1},on:{"update:visible":function(t){e.codePreview=t}}},[a("img",{staticStyle:{margin:"auto"},attrs:{src:e.codeImgSrc}})]),a("el-dialog",{attrs:{title:"添加目录节点",visible:e.addNodeFormVisible,width:"440px","close-on-click-modal":!1},on:{"update:visible":function(t){e.addNodeFormVisible=t}}},[a("el-form",{attrs:{"label-width":"120px"},model:{value:e.nodeForm,callback:function(t){e.nodeForm=t},expression:"nodeForm"}},[e.nodeForm.parentName?a("el-form-item",{attrs:{label:"上级目录：",prop:"parentName"}},[a("el-input",{attrs:{size:"small",disabled:!0},model:{value:e.nodeForm.parentName,callback:function(t){e.$set(e.nodeForm,"parentName",t)},expression:"nodeForm.parentName"}})],1):e._e(),a("el-form-item",{attrs:{label:"目录名称：",prop:"catalogName"}},[a("el-input",{attrs:{size:"small"},model:{value:e.nodeForm.catalogName,callback:function(t){e.$set(e.nodeForm,"catalogName",t)},expression:"nodeForm.catalogName"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"mini"},on:{click:function(t){e.addNodeFormVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.saveNode}},[e._v("确 定")])],1)],1)],1)},i=[],n=a("d225"),d=a("b0b4"),s=a("308d"),l=a("6bb5"),r=a("4e2b"),c=a("9ab4"),p=a("60a3"),m=a("0797"),u=function(e){function t(){var e;return Object(n["a"])(this,t),e=Object(s["a"])(this,Object(l["a"])(t).apply(this,arguments)),e.codesName="",e.codesData=[],e.codesProp={children:"children",label:"catalogName"},e.codesListData=[],e.loading=!1,e.codePreview=!1,e.singleCodeVisible=!1,e.codeImgSrc="",e.catalogInfo={},e.codeMode={},e.addNodeFormVisible=!1,e.nodeForm={},e}return Object(r["a"])(t,e),Object(d["a"])(t,[{key:"handleNodeClick",value:function(e){var t=this;this.loading=!0,this.catalogInfo=e,this.$http.post(m["a"].getCodesListByCatalog+e.id).then((function(a){a.data.status?(t.codesListData=a.data.data,t.codesName=e.catalogName):t.$message.error(a.data.message),t.loading=!1}))}},{key:"previewQRCode",value:function(e){this.codePreview=!0,this.codeImgSrc=m["a"].previewCode+e.id}},{key:"handleCodeView",value:function(e){this.codeMode.codeId=e.id,this.codeMode.mode="view",this.codeMode.catalogId=this.catalogInfo.id,this.singleCodeVisible=!0}},{key:"handleCodeEdit",value:function(e){this.codeMode.codeId=e.id,this.codeMode.mode="edit",this.codeMode.catalogId=this.catalogInfo.id,this.singleCodeVisible=!0}},{key:"handleCodeDelete",value:function(e){var t=this;this.$http.get(m["a"].deleteCode+e.id).then((function(e){e.data.status?(t.$message.success("删除成功！"),t.handleNodeClick(t.catalogInfo)):t.$message.error(e.data.message)}))}},{key:"addACode",value:function(){this.$router.push({name:"codeManageDetail",params:{preData:JSON.stringify({codeId:0,mode:"add",catalogId:this.catalogInfo.id})}})}},{key:"getInspectQRCodesList",value:function(){var e=this,t=this;this.$http.get(m["a"].getInspectQRCodes).then((function(a){a.data.status?(t.codesData=a.data.data.children,t.handleNodeClick(e.codesData[0])):t.$message.error(a.data.message)}))}},{key:"changeSingleCodeFormVisible",value:function(){this.getInspectQRCodesList(),this.singleCodeVisible=!1}},{key:"mounted",value:function(){this.getInspectQRCodesList()}},{key:"openNodeForm",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.addNodeFormVisible=!0,this.nodeForm=e||{catalogType:"INSPECT_PlAN_CODE",parentId:null,parentName:null}}},{key:"removeTreeNode",value:function(e,t){}},{key:"saveNode",value:function(){this.$http.post(m["a"].addTemplateNode,this.nodeForm)}}]),t}(p["e"]);u=c["__decorate"]([Object(p["a"])({})],u);var g=u,v=g,b=(a("ab32"),a("2877")),f=Object(b["a"])(v,o,i,!1,null,"60787bf4",null);t["default"]=f.exports},ab32:function(e,t,a){"use strict";var o=a("d82a"),i=a.n(o);i.a},d82a:function(e,t,a){}}]);
//# sourceMappingURL=chunk-492b1ee5.77b7a3df.js.map