(window["webpackJsonpmicro_name_"]=window["webpackJsonpmicro_name_"]||[]).push([["chunk-2d6e78e6"],{"08c9":function(e,a,i){"use strict";i.r(a);var t=function(){var e=this,a=e.$createElement,i=e._self._c||a;return i("div",{staticClass:"container"},[i("div",{staticClass:"main"},[i("aside",{staticClass:"aside"},[i("organization-info",{attrs:{pagination:e.pagination},on:{getList:e.getGridListByOrganization,detailsView:e.detailsView}})],1),i("section",{staticClass:"section"},[i("geographic-map",{ref:"geographic-map",attrs:{buttonName:e.buttonName},on:{openForm:e.openForm}})],1)]),e.dialogFormVisible?i("el-dialog",{attrs:{title:e.dialogFormVisibleName+"网格",visible:e.dialogFormVisible,"before-close":e.handleCancel,"close-on-click-modal":!1},on:{"update:visible":function(a){e.dialogFormVisible=a}}},[i("el-form",{ref:"gridForm",attrs:{"label-width":"100px",size:"mini","status-icon":"",model:e.gridForm,rules:e.gridFormRules}},[i("el-row",{attrs:{gutter:10}},[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"网格编码：",prop:"code"}},[i("el-input",{attrs:{disabled:e.disabled,placeholder:"包含字母、数字、横线、下划线和点,点不能作为开头,长度3-100位"},model:{value:e.gridForm.code,callback:function(a){e.$set(e.gridForm,"code",a)},expression:"gridForm.code"}})],1)],1),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"网格名称：",prop:"name"}},[i("el-input",{attrs:{disabled:e.disabled},model:{value:e.gridForm.name,callback:function(a){e.$set(e.gridForm,"name",a)},expression:"gridForm.name"}})],1)],1),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"行政区域：",prop:"regionCode"}},[i("el-cascader",{ref:"cascadeRegion",staticStyle:{width:"100%"},attrs:{disabled:e.disabled,options:e.regionOptions,props:e.regionProps},model:{value:e.gridForm.regionCode,callback:function(a){e.$set(e.gridForm,"regionCode",a)},expression:"gridForm.regionCode"}})],1)],1),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"组织机构：",prop:"organizationName"}},[i("el-input",{attrs:{disabled:!0},model:{value:e.gridForm.organizationName,callback:function(a){e.$set(e.gridForm,"organizationName",a)},expression:"gridForm.organizationName"}})],1)],1),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"网格面积：",prop:"area"}},[i("el-input",{attrs:{disabled:!0},model:{value:e.gridForm.area,callback:function(a){e.$set(e.gridForm,"area",a)},expression:"gridForm.area"}},[i("template",{slot:"append"},[e._v("\n                平方米\n              ")])],2)],1)],1)],1),i("el-row",[i("el-col",{attrs:{span:24}},[i("el-form-item",{attrs:{label:"备注说明：",prop:"remark"}},[i("el-input",{attrs:{maxlength:255,type:"textarea",disabled:e.disabled,rows:8,resize:"none"},model:{value:e.gridForm.remark,callback:function(a){e.$set(e.gridForm,"remark",a)},expression:"gridForm.remark"}})],1),i("el-form-item",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{label:"组织ID：",prop:"organizationId"}},[i("el-input",{model:{value:e.gridForm.organizationId,callback:function(a){e.$set(e.gridForm,"organizationId",a)},expression:"gridForm.organizationId"}})],1),i("el-form-item",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{label:"坐标：",prop:"coordinates"}},[i("el-input",{model:{value:e.gridForm.coordinates,callback:function(a){e.$set(e.gridForm,"coordinates",a)},expression:"gridForm.coordinates"}})],1)],1)],1)],1),e.disabled?e._e():i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{size:"mini"},on:{click:function(a){return e.handleCancel()}}},[e._v("取 消")]),i("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){return e.gridSave(e.dialogFormVisibleName)}}},[e._v("确 定")])],1)],1):e._e(),e.detailsVisible?i("el-dialog",{attrs:{title:"【"+e.detailsName+"】网格列表详情",visible:e.detailsVisible,"close-on-click-modal":!1},on:{"update:visible":function(a){e.detailsVisible=a}}},[i("div",{staticStyle:{height:"100%"}},[i("el-input",{staticClass:"input-with-select",attrs:{size:"small",placeholder:"请输入内容",clearable:""},on:{input:function(a){return e.getGridListByOrganization(e.organizationInfo)}},model:{value:e.pagination.condition,callback:function(a){e.$set(e.pagination,"condition",a)},expression:"pagination.condition"}}),i("div",{staticClass:"loading-area",staticStyle:{height:"calc(100% - 60px)"}},[i("el-table",{ref:"multipleTable",staticStyle:{width:"100%","text-align":"center"},attrs:{data:e.pagination.tableData,stripe:"",size:"mini","tooltip-effect":"dark","highlight-current-row":""}},[i("el-table-column",{attrs:{align:"center",label:"序号",type:"index",width:"100"}}),i("el-table-column",{attrs:{align:"center",prop:"code",label:"编号","show-overflow-tooltip":""}}),i("el-table-column",{attrs:{align:"center",prop:"name",label:"名称","show-overflow-tooltip":""}}),i("el-table-column",{attrs:{align:"center",prop:"region",label:"区域","show-overflow-tooltip":""}}),i("el-table-column",{attrs:{align:"center",prop:"area",label:"面积(m²)","show-overflow-tooltip":""}}),i("el-table-column",{attrs:{align:"center",prop:"remark",label:"备注","show-overflow-tooltip":""}})],1)],1)],1),i("div",{staticClass:"block"},[i("el-pagination",{attrs:{"current-page":e.pagination.currentPage,small:"","page-size":e.pagination.pageSize,layout:"total, prev, pager, next, jumper",total:e.pagination.total},on:{"current-change":function(a){return e.getGridListByOrganization(e.organizationInfo)},"update:currentPage":function(a){return e.$set(e.pagination,"currentPage",a)},"update:current-page":function(a){return e.$set(e.pagination,"currentPage",a)}}})],1)]):e._e()],1)},o=[],r=(i("7f7f"),i("6b54"),i("28a5"),i("d225")),n=i("b0b4"),s=i("308d"),l=i("6bb5"),d=i("4e2b"),g=i("9ab4"),c=i("60a3"),m=i("fc0d"),p=i("a0b5"),u=i("dc7d"),b=i("73ec"),h=function(e){function a(){var e;return Object(r["a"])(this,a),e=Object(s["a"])(this,Object(l["a"])(a).apply(this,arguments)),e.pagination={condition:"",currentPage:1,total:0,tableData:[],pageSize:10},e.buttonName="绘制网格",e.organizationInfo=null,e.gridForm={id:"",code:"",name:"",regionCode:[],area:"",coordinates:"",remark:"",organizationId:"",organizationName:""},e.gridFormRules={code:[{required:!0,message:"请输入网格编码",trigger:"change"}],name:[{required:!0,message:"请输入网格名称",trigger:"change"}],regionCode:[{required:!0,message:"请选择区域",trigger:"change"}]},e.regionOptions=[],e.regionProps={value:"code",label:"name"},e.disabled=!1,e.dialogFormVisible=!1,e.dialogFormVisibleName="",e.detailsVisible=!1,e.detailsName="",e}return Object(d["a"])(a,e),Object(n["a"])(a,[{key:"created",value:function(){this.getRegions()}},{key:"getGridListByOrganization",value:function(e){var a=this;this.organizationInfo=e,this.$http.post(u["a"].grid.getGridsByOrganizationId,{query:{name:this.pagination.condition.split(" ").join(""),organizationId:e.id},size:this.pagination.pageSize,current:this.pagination.currentPage}).then((function(e){e.data.status?(a.pagination.tableData=e.data.data.records,a.pagination.total=e.data.data.total,a.pagination.currentPage=e.data.data.current):a.$message.error(e.data.message)})),this.$http.post(u["a"].grid.getGridsByOrganizationId,{query:{name:this.pagination.condition.split(" ").join(""),organizationId:e.id},size:9999,current:1}).then((function(e){e.data.status?a.$refs["geographic-map"].polygonShow(e.data.data.records):a.$message.error(e.data.message)}))}},{key:"getRegions",value:function(){var e=this;this.$http.get(u["a"].organization.getRegions).then((function(a){a.data.status?(e.regionOptions=a.data.data,b["a"].removeEmptyChildren(e.regionOptions)):e.$message.error(a.data.message)}))}},{key:"gridSave",value:function(e){var a=this,i="添加"===e?u["a"].grid.gridAdd:u["a"].grid.gridUpdate,t=JSON.parse(JSON.stringify(this.gridForm));t.regionCode=t.regionCode.toString(),t.region=this.$refs["cascadeRegion"].inputValue,this.$refs["gridForm"].validate((function(e){if(!e)return!1;a.$http.post(i,t).then((function(e){e.data.status?(a.$message.success(e.data.message),a.getGridListByOrganization(a.organizationInfo)):a.$message.error(e.data.message),a.dialogFormVisible=!1})).catch((function(e){a.$message.error(e.data.message),a.dialogFormVisible=!1}))}))}},{key:"openForm",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1?arguments[1]:void 0;"添加"===a?(this.gridForm.id="",this.gridForm.code="",this.gridForm.name="",this.gridForm.regionCode=[],this.gridForm.area=e.gridArea,this.gridForm.coordinates=e.coordinates,this.gridForm.remark=""):(this.gridForm.id=e.id,this.gridForm.code=e.code,this.gridForm.name=e.name,this.gridForm.regionCode=e.regionCode.split(","),this.gridForm.area=e.area,this.gridForm.coordinates=e.coordinates,this.gridForm.remark=e.remark),this.disabled="查看"===a,this.gridForm.organizationId=this.organizationInfo.id,this.gridForm.organizationName=this.organizationInfo.name,this.dialogFormVisible=!0,this.dialogFormVisibleName=a}},{key:"detailsView",value:function(e){this.detailsName=e.name,this.detailsVisible=!0}},{key:"handleCancel",value:function(){this.dialogFormVisible=!1}}]),a}(c["e"]);h=g["__decorate"]([Object(c["a"])({components:{GeographicMap:p["a"],OrganizationInfo:m["a"]}})],h);var f=h,F=f,v=(i("5984"),i("2877")),z=Object(v["a"])(F,t,o,!1,null,"e6e0358a",null);a["default"]=z.exports},5984:function(e,a,i){"use strict";var t=i("7e6c"),o=i.n(t);o.a},"7e6c":function(e,a,i){}}]);
//# sourceMappingURL=chunk-2d6e78e6.38d6bfc9.js.map