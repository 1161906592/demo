(window["webpackJsonpmicro_name_"]=window["webpackJsonpmicro_name_"]||[]).push([["chunk-7a59b2f4"],{"24fc":function(e,t,a){},"456d":function(e,t,a){var r=a("4bf8"),n=a("0d58");a("5eda")("keys",(function(){return function(e){return n(r(e))}}))},"4f13":function(e,t,a){"use strict";var r=a("7f50"),n=a.n(r);n.a},"5eda":function(e,t,a){var r=a("5ca1"),n=a("8378"),i=a("79e5");e.exports=function(e,t){var a=(n.Object||{})[e]||Object[e],s={};s[e]=t(a),r(r.S+r.F*i((function(){a(1)})),"Object",s)}},"7f50":function(e,t,a){},"81c4":function(e,t,a){"use strict";var r=a("c45a"),n=a.n(r);n.a},"8e6e":function(e,t,a){var r=a("5ca1"),n=a("990b"),i=a("6821"),s=a("11e9"),o=a("f1ae");r(r.S,"Object",{getOwnPropertyDescriptors:function(e){var t,a,r=i(e),l=s.f,c=n(r),d={},u=0;while(c.length>u)a=l(r,t=c[u++]),void 0!==a&&o(d,t,a);return d}})},"990b":function(e,t,a){var r=a("9093"),n=a("2621"),i=a("cb7c"),s=a("7726").Reflect;e.exports=s&&s.ownKeys||function(e){var t=r.f(i(e)),a=n.f;return a?t.concat(a(e)):t}},"9a4f":function(e,t,a){"use strict";var r={targetCoordinateType:"TARGET_COORDINATE_TYPE",tenantMap:"TENANT_MAP",coordinateType:"COORDINATE_TYPE"},n="/admin/dict/list";t["a"]={dict:r,requestUrl:n}},"9c34":function(e,t,a){"use strict";var r=a("bf58"),n=a.n(r);n.a},ad3c:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{directives:[{name:"show",rawName:"v-show",value:!e.detailComponentStatus,expression:"!detailComponentStatus"}],staticClass:"system-location-container"},[a("div",{staticClass:"control-header"},[a("el-form",{attrs:{inline:"",size:"small",model:e.searchVO}},[a("el-form-item",{attrs:{label:"配置名称:",prop:"name"}},[a("el-input",{attrs:{clearable:""},model:{value:e.searchVO.query.name,callback:function(t){e.$set(e.searchVO.query,"name",t)},expression:"searchVO.query.name"}})],1),a("el-form-item",{attrs:{label:"所属组织:",prop:"orgIds"}},[a("el-cascader",{attrs:{clearable:"","collapse-tags":"",options:e.orgOptions,props:e.orgOptionsProps},model:{value:e.searchVO.query.orgIds,callback:function(t){e.$set(e.searchVO.query,"orgIds",t)},expression:"searchVO.query.orgIds"}})],1),a("q-search-button",{on:{click:e.getLocationManagementList}})],1),a("div",[a("el-button",{attrs:{size:"small",icon:"el-icon-plus",type:"primary"},on:{click:function(t){return e.editMethod("add",{})}}},[e._v("添加")])],1)],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.dataLoading,expression:"dataLoading"}],staticStyle:{width:"100%","min-height":"calc(100vh - 295px)"},attrs:{size:"small",data:e.locationManagementList,"tooltip-effect":"dark"}},[a("el-table-column",{attrs:{type:"index",label:"序号",align:"center",width:"80"}}),a("el-table-column",{attrs:{label:"名称",prop:"name",align:"center","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{label:"编码",prop:"code",align:"center","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{label:"描述",prop:"remark",align:"center","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{label:"可用组织",align:"center","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("orgFilter")(t.row.orgs)))])]}}])}),a("el-table-column",{attrs:{label:"启用状态",prop:"enable",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.enable?"是":"否"))]}}])}),a("el-table-column",{attrs:{label:"操作",align:"center",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"small",type:"text",icon:"el-icon-view"},on:{click:function(a){return e.editMethod("preview",t.row)}}},[e._v("查看")]),a("el-button",{attrs:{size:"small",type:"text",icon:"el-icon-edit"},on:{click:function(a){return e.editMethod("update",t.row)}}},[e._v("修改")]),a("el-button",{attrs:{size:"small",type:"text",icon:"el-icon-delete"},on:{click:function(a){return e.handleDelete(t.row)}}},[e._v("删除")])]}}])})],1),a("q-pagination",{attrs:{"current-page":e.searchVO.current,"page-size":e.searchVO.size,"page-sizes":[10,20,50,100],layout:"total, prev, pager, next, jumper",total:e.total},on:{"current-change":function(t){return e.handleCurrentChange(t)},"update:currentPage":function(t){return e.$set(e.searchVO,"current",t)},"update:current-page":function(t){return e.$set(e.searchVO,"current",t)}}})],1),[a(e.detailComponentType,{directives:[{name:"show",rawName:"v-show",value:e.detailComponentStatus,expression:"detailComponentStatus"}],tag:"component",attrs:{id:e.selectedItem.id,"base-info":e.selectedItem,"org-tree":e.orgOptions,method:e.methodSelf},on:{switch:e.changeDetailComponent,back:function(t){e.detailComponentStatus=!1}}})]],2)},n=[],i=(a("7f7f"),a("96cf"),a("3b8d")),s=a("d225"),o=a("b0b4"),l=a("308d"),c=a("6bb5"),d=a("4e2b"),u=a("9ab4"),p=a("60a3"),m=a("dc7d"),f=a("73ec"),g=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"detail-main-container"},[a("el-button",{staticClass:"back-button",attrs:{type:"text",icon:"el-icon-arrow-left"},on:{click:e.backToList}},[e._v("返回列表")]),a("div",{staticClass:"base-info"},[e._m(0),a("el-form",{ref:"baseFormRef",attrs:{size:"small",model:e.baseForm,"label-width":"100px"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"名称：",prop:"name",rules:{required:!0,trigger:"blur",message:"名称不能为空"}}},[a("el-input",{attrs:{clearable:"",disabled:e.baseIsDisabled},model:{value:e.baseForm.name,callback:function(t){e.$set(e.baseForm,"name",t)},expression:"baseForm.name"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"编码：",prop:"code",rules:{required:!0,trigger:"blur",message:"编码不能为空"}}},[a("el-input",{attrs:{clearable:"",disabled:e.baseIsDisabled},model:{value:e.baseForm.code,callback:function(t){e.$set(e.baseForm,"code",t)},expression:"baseForm.code"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"可用组织：",prop:"orgIds",rules:{required:!0,trigger:"blur",message:"可用组织不能为空"}}},[a("el-cascader",{staticStyle:{width:"100%"},attrs:{clearable:"","collapse-tags":!e.baseForm.id||!e.baseIsDisabled,options:e.orgTree,props:e.commonProps,disabled:e.baseIsDisabled},model:{value:e.baseForm.orgIds,callback:function(t){e.$set(e.baseForm,"orgIds",t)},expression:"baseForm.orgIds"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"是否启用：",prop:"enable"}},[a("el-radio-group",{attrs:{disabled:e.baseIsDisabled},model:{value:e.baseForm.enable,callback:function(t){e.$set(e.baseForm,"enable",t)},expression:"baseForm.enable"}},[a("el-radio",{attrs:{label:!0}},[e._v("是")]),a("el-radio",{attrs:{label:!1}},[e._v("否")])],1)],1)],1),a("el-col",{attrs:{span:16}},[a("el-form-item",{attrs:{label:"详细描述：",prop:"remark"}},[a("el-input",{attrs:{type:"textarea",rows:2,clearable:"",disabled:e.baseIsDisabled},model:{value:e.baseForm.remark,callback:function(t){e.$set(e.baseForm,"remark",t)},expression:"baseForm.remark"}})],1)],1)],1)],1),e.baseIsDisabled?e._e():a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.saveBaseInfo}},[e._v("保存")])],1),a("el-divider"),a("div",{staticClass:"main-control-config"},["preview"!==e.method?a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.baseForm.id&&"preview"!==e.method,expression:"baseForm.id && method !== 'preview'"}],staticClass:"add-button",attrs:{size:"small",type:"primary",icon:"el-icon-plus"},on:{click:e.addConfigOption}},[e._v("添加配置")]):e._e(),e._l(e.locationConfigList,(function(t,r){return a("div",{key:r,staticClass:"control-item-body"},[a("el-form",{key:"configFormKey"+r,ref:"configForm",refInFor:!0,attrs:{model:t,rules:e.commonRules,size:"small","label-width":"140px"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"配置名称：",prop:"name"}},[a("el-input",{attrs:{clearable:"",disabled:!t.isEditing},model:{value:t.name,callback:function(a){e.$set(t,"name",a)},expression:"i.name"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"配置编码：",prop:"code"}},[a("el-input",{attrs:{clearable:"",disabled:!t.isEditing},model:{value:t.code,callback:function(a){e.$set(t,"code",a)},expression:"i.code"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"相关数据：",prop:"typeDetailIds"}},[a("el-cascader",{staticStyle:{width:"100%"},attrs:{clearable:"","collapse-tags":t.isEditing,disabled:!t.isEditing,options:e.typeDetails,props:e.commonProps},model:{value:t.typeDetailIds,callback:function(a){e.$set(t,"typeDetailIds",a)},expression:"i.typeDetailIds"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"原数据类型："}},[a("el-select",{staticStyle:{width:"100%"},attrs:{size:"small",disabled:""},model:{value:t.originalCoordinateType,callback:function(a){e.$set(t,"originalCoordinateType",a)},expression:"i.originalCoordinateType"}},e._l(e.targetCoordinateTypeList,(function(e){return a("el-option",{key:e.value,attrs:{label:e.showName,value:e.value}})})),1)],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"目标数据类型：",prop:"targetCoordinateType"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{size:"small",clearable:"",disabled:!t.isEditing},model:{value:t.targetCoordinateType,callback:function(a){e.$set(t,"targetCoordinateType",a)},expression:"i.targetCoordinateType"}},e._l(e.targetCoordinateTypeList,(function(e){return a("el-option",{key:e.value,attrs:{label:e.showName,value:e.value}})})),1)],1)],1)],1),"2D"===t.targetCoordinateType?a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"中心点坐标："}},[a("el-input",{attrs:{disabled:!t.isEditing},model:{value:t.targetCenterCoordinate,callback:function(a){e.$set(t,"targetCenterCoordinate",a)},expression:"i.targetCenterCoordinate"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"比例："}},[a("el-input",{attrs:{disabled:!t.isEditing},model:{value:t.targetScale,callback:function(a){e.$set(t,"targetScale",a)},expression:"i.targetScale"}})],1)],1)],1):e._e(),"URL"===t.targetCoordinateType?a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"接口地址："}},[a("el-input",{attrs:{disabled:!t.isEditing},model:{value:t.url,callback:function(a){e.$set(t,"url",a)},expression:"i.url"}})],1)],1)],1):e._e()],1),a("div",{staticClass:"item-control-buttons"},[a("el-button",{directives:[{name:"show",rawName:"v-show",value:t.isEditing,expression:"i.isEditing"}],attrs:{size:"small"},on:{click:function(t){return e.handleCancel(r)}}},[e._v("取消")]),a("el-button",{directives:[{name:"show",rawName:"v-show",value:t.isEditing,expression:"i.isEditing"}],attrs:{size:"small",type:"primary"},on:{click:function(a){return e.saveLocationConfig(t,r)}}},[e._v("保存")]),a("el-button",{directives:[{name:"show",rawName:"v-show",value:!t.firstEdit&&!t.isEditing,expression:"!i.firstEdit && !i.isEditing"}],attrs:{size:"small",type:"primary"},on:{click:function(t){return e.handleUpdate(r)}}},[e._v("修改")])],1)],1)}))],2)],1)},b=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"base-info-title"},[a("i",{staticClass:"font_family icon-jichushuxing"}),e._v("基本信息")])}],h=(a("8e6e"),a("456d"),a("bd86")),v=(a("ac6a"),a("9a4f"));function y(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function k(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?y(Object(a),!0).forEach((function(t){Object(h["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):y(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var C=function(e){function t(){var e;return Object(s["a"])(this,t),e=Object(l["a"])(this,Object(c["a"])(t).apply(this,arguments)),e.baseForm={enable:!1},e.commonProps={multiple:!0,value:"id",label:"name",checkStrictly:!0,emitPath:!1},e.commonRules={code:{required:!0,trigger:"blur",message:"该字段不能为空"},name:{required:!0,trigger:"blur",message:"该字段不能为空"},targetCenterCoordinate:{required:!0,trigger:"change",message:"该字段不能为空"},targetCoordinateType:{required:!0,trigger:"blur",message:"该字段不能为空"},scole:{required:!0,trigger:"blur",message:"该字段不能为空"},targetScale:{required:!0,trigger:"blur",message:"该字段不能为空"},typeDetailIds:{required:!0,trigger:"change",message:"该字段不能为空"},url:{required:!0,trigger:"blur",message:"该字段不能为空"}},e.typeDetails=[],e.locationConfigList=[],e.targetCoordinateTypeList=[],e.baseInfoHasSaved=!1,e.selectedConfigForm={},e}return Object(d["a"])(t,e),Object(o["a"])(t,[{key:"addConfigOption",value:function(){var e=this;this.locationConfigList.forEach((function(t){e.$set(t,"isEditing",!1)})),this.locationConfigList.push({firstEdit:!0,isEditing:!0,locationId:this.baseForm.id,originalCoordinateType:"GCJ02"})}},{key:"handleUpdate",value:function(e){this.selectedConfigForm=k({},this.locationConfigList[e]),this.$set(this.locationConfigList[e],"isEditing",!0)}},{key:"handleCancel",value:function(e){this.locationConfigList[e]&&this.locationConfigList[e].id?this.locationConfigList[e]=Object.assign({isEditing:!1},this.selectedConfigForm):this.locationConfigList.splice(e,1)}},{key:"backToList",value:function(){this.$emit("back"),"add"===this.method&&(this.baseInfoHasSaved=!1,this.$set(this,"baseForm",{}),this.locationConfigList.length=0)}},{key:"getTargetType",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t,a,r,n,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$http.post(v["a"].requestUrl,{dictTypeCode:v["a"].dict.targetCoordinateType});case 2:t=e.sent,a=t.data,r=a.data,n=a.status,i=a.message,n?(f["a"].removeEmptyChildren(r),this.targetCoordinateTypeList=r):this.$message.error("目标坐标系类型查询失败："+i);case 8:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getBaseTypeTree",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t,a,r,n,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$http.get(m["a"].getBaseTypeTree);case 2:t=e.sent,a=t.data,r=a.data,n=a.status,i=a.message,n?this.typeDetails=r.map((function(e){return k({},e,{disabled:!0})})):this.$message.error(i);case 8:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getBaseInfo",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t,a,r,n,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.$http.get(m["a"].location.getBaseInfo+this.id);case 3:t=e.sent,a=t.data,r=a.data,n=a.status,i=a.message,n?this.locationConfigList=r.locationConfigInfoList.map((function(e){return k({},e,{typeDetailIds:e.infoTypeList.map((function(e){return e.typeDetailId}))})})):this.$message.error(i),e.next=14;break;case 11:e.prev=11,e.t0=e["catch"](0),console.log(e.t0);case 14:case"end":return e.stop()}}),e,this,[[0,11]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"saveBaseInfo",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:try{this.$refs.baseFormRef.validate(function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(a){var r,n,i,s,o,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!a){e.next=10;break}return r="add"===t.method?m["a"].location.saveBaseInfo:m["a"].location.updateBaseInfo,e.next=4,t.$http.post(r,t.baseForm);case 4:n=e.sent,i=n.data,s=i.data,o=i.status,l=i.message,o?(t.$message.success("保存成功"),t.baseInfoHasSaved=!0,"add"===t.method&&(t.baseForm.id=s)):t.$message.error(l);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}catch(a){console.log(a)}case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"saveLocationConfig",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t,a){var r,n=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:try{r=this.$refs["configForm"],r[a].validate(function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(r){var i,s,o,l,c,d;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!r){e.next=10;break}return i=t.firstEdit?m["a"].locationConfig.add:m["a"].locationConfig.update,e.next=4,n.$http.post(i,n.locationConfigList[a]);case 4:s=e.sent,o=s.data,l=o.data,c=o.status,d=o.message,c?(n.$message.success("保存成功"),n.$set(n.locationConfigList[a],"isEditing",!1),n.$set(n.locationConfigList[a],"firstEdit",!1),n.$set(n.locationConfigList[a],"id",l)):n.$message.error(d);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}catch(s){console.log(s)}case 1:case"end":return e.stop()}}),e,this)})));function t(t,a){return e.apply(this,arguments)}return t}()},{key:"handleChange",value:function(){this.id?(this.baseForm=this.baseInfo,this.baseForm.orgIds=this.baseInfo.orgs.map((function(e){return e.orgId})),this.getBaseInfo()):(this.baseInfoHasSaved=!1,this.$set(this,"baseForm",{}),this.locationConfigList.length=0)}},{key:"created",value:function(){this.getTargetType(),this.getBaseTypeTree()}},{key:"baseIsDisabled",get:function(){return"preview"===this.method||this.baseInfoHasSaved}}]),t}(p["e"]);u["__decorate"]([Object(p["d"])({type:String})],C.prototype,"id",void 0),u["__decorate"]([Object(p["d"])({type:Object})],C.prototype,"baseInfo",void 0),u["__decorate"]([Object(p["d"])({type:String,default:"add"})],C.prototype,"method",void 0),u["__decorate"]([Object(p["d"])({type:Array,default:function(){return[]}})],C.prototype,"orgTree",void 0),u["__decorate"]([Object(p["f"])("id",{immediate:!0})],C.prototype,"handleChange",null),C=u["__decorate"]([Object(p["a"])({})],C);var w=C,O=w,T=(a("9c34"),a("2877")),_=Object(T["a"])(O,g,b,!1,null,"7fc534b7",null),j=_.exports,x=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.isLoading,expression:"isLoading"}],staticClass:"preview-main-container"},[a("el-button",{staticClass:"back-button",attrs:{type:"text",icon:"el-icon-arrow-left"},on:{click:function(t){return e.$emit("back")}}},[e._v("返回列表")]),a("div",{staticClass:"base-info"},[e._m(0),a("el-form",{attrs:{size:"small",model:e.baseForm,"label-width":"100px"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"名称：",prop:"name",rules:{required:!0,trigger:"blur",message:"名称不能为空"}}},[a("el-input",{attrs:{value:e.baseForm.name,disabled:""}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"编码：",prop:"code",rules:{required:!0,trigger:"blur",message:"编码不能为空"}}},[a("el-input",{attrs:{value:e.baseForm.code,disabled:""}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"可用组织：",prop:"orgIds",rules:{required:!0,trigger:"blur",message:"可用组织不能为空"}}},[a("el-input",{attrs:{disabled:"",value:e.baseForm.orgs.map((function(e){return e.orgName})).join("、")}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"是否启用：",prop:"enable"}},[a("el-radio-group",{attrs:{disabled:""},model:{value:e.baseForm.enable,callback:function(t){e.$set(e.baseForm,"enable",t)},expression:"baseForm.enable"}},[a("el-radio",{attrs:{label:!0}},[e._v("是")]),a("el-radio",{attrs:{label:!1}},[e._v("否")])],1)],1)],1),a("el-col",{attrs:{span:16}},[a("el-form-item",{attrs:{label:"详细描述：",prop:"remark"}},[a("el-input",{attrs:{type:"textarea",rows:2,disabled:""},model:{value:e.baseForm.remark,callback:function(t){e.$set(e.baseForm,"remark",t)},expression:"baseForm.remark"}})],1)],1)],1)],1)],1),a("el-divider"),a("div",{staticClass:"preview-tabs"},[e._m(1),a("el-tabs",{attrs:{type:"card"},on:{"tab-click":e.tabClickEv},model:{value:e.selectedTab,callback:function(t){e.selectedTab=t},expression:"selectedTab"}},e._l(e.locationConfigList,(function(t){return a("el-tab-pane",{key:t.id,attrs:{label:t.name}},[a("el-form",{ref:"configForm",refInFor:!0,attrs:{model:t,size:"small","label-width":"140px"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"配置名称：",prop:"name"}},[a("el-input",{attrs:{disabled:""},model:{value:t.name,callback:function(a){e.$set(t,"name",a)},expression:"i.name"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"配置编码：",prop:"code"}},[a("el-input",{attrs:{disabled:""},model:{value:t.code,callback:function(a){e.$set(t,"code",a)},expression:"i.code"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"原数据类型："}},[a("el-input",{attrs:{disabled:""},model:{value:t.originalCoordinateType,callback:function(a){e.$set(t,"originalCoordinateType",a)},expression:"i.originalCoordinateType"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"目标数据类型：",prop:"targetCoordinateType"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{size:"small",disabled:""},model:{value:t.targetCoordinateType,callback:function(a){e.$set(t,"targetCoordinateType",a)},expression:"i.targetCoordinateType"}},[a("el-input",{attrs:{disabled:""},model:{value:t.targetCoordinateType,callback:function(a){e.$set(t,"targetCoordinateType",a)},expression:"i.targetCoordinateType"}})],1)],1)],1),"2D"===t.targetCoordinateType?[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"中心点坐标："}},[a("el-input",{attrs:{disabled:""},model:{value:t.targetCenterCoordinate,callback:function(a){e.$set(t,"targetCenterCoordinate",a)},expression:"i.targetCenterCoordinate"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"比例："}},[a("el-input",{attrs:{disabled:""},model:{value:t.targetScale,callback:function(a){e.$set(t,"targetScale",a)},expression:"i.targetScale"}})],1)],1)]:e._e(),"URL"===t.targetCoordinateType?[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"接口地址："}},[a("el-input",{attrs:{disabled:""},model:{value:t.url,callback:function(a){e.$set(t,"url",a)},expression:"i.url"}})],1)],1)]:e._e()],2),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"数据项类型："}},[a("el-select",{staticStyle:{width:"100%"},attrs:{size:"small"},on:{change:function(a){return e.changeDataType(a,t.id)}},model:{value:e.selectedDetailType,callback:function(t){e.selectedDetailType=t},expression:"selectedDetailType"}},e._l(t.infoTypeList,(function(e){return a("el-option",{key:e.typeDetailId,attrs:{label:e.typeDetailName,value:e.typeDetailId}})})),1)],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"数据状态："}},[a("el-radio-group",{attrs:{size:"small"},on:{change:e.changeDataStatus},model:{value:e.selectedDataStatus,callback:function(t){e.selectedDataStatus=t},expression:"selectedDataStatus"}},[a("el-radio",{attrs:{label:!1}},[e._v("转换前")]),a("el-radio",{attrs:{label:!0}},[e._v("转换后")])],1)],1)],1)],1)],1),a("div",{staticStyle:{display:"inline-flex",width:"100%",height:"400px"}},[a(e.graphicalType,{tag:"component",attrs:{markers:e.selectedMarkers},on:{switch:e.changeGraphicalType}})],1)],1)})),1)],1)],1)},I=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"base-info-title"},[a("i",{staticClass:"font_family icon-jichushuxing"}),e._v("基本信息")])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"base-info-title"},[a("i",{staticClass:"font_family icon-jichushuxing"}),e._v("配置信息")])}],D=(a("c5f6"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{ref:"QAMapMarker",staticClass:"qtouch-a-map"},[e._t("map-slot")],2)}),$=[],L=(a("28a5"),a("5df3"),a("6bb3")),S=function(e){function t(){var e;return Object(s["a"])(this,t),e=Object(l["a"])(this,Object(c["a"])(t).apply(this,arguments)),e.selfMarkers=[],e}return Object(d["a"])(t,e),Object(o["a"])(t,[{key:"created",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,window.AMap){e.next=4;break}return e.next=4,Promise.all([Object(L["a"])(),Object(L["b"])()]);case 4:this.$nextTick((function(){return t.initMap()})),e.next=11;break;case 7:e.prev=7,e.t0=e["catch"](0),console.log(e.t0),this.$message.error("地图加载失败");case 11:case"end":return e.stop()}}),e,this,[[0,7]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"beforeDestroy",value:function(){this.map&&this.map.destroy()}},{key:"initMap",value:function(){var e=JSON.parse(localStorage.getItem("tenantInfo"));this.map=new window.AMap.Map(this.$refs["QAMapMarker"],{center:e.mapCenter.split(",")||[106,28],zoom:e.mapZoom||14,mapStyle:"amap://styles/".concat(e.mapStyle||"default")})}},{key:"initMarkers",value:function(){var e=this;this.map&&this.map.clearMap(),this.selfMarkers.length=0,this.markers.map((function(t){var a=new window.AMap.Marker({position:t.position});e.map.add(a),e.selfMarkers.push(a)})),this.map.setFitView(this.selfMarkers)}},{key:"handleChangeMarkers",value:function(){var e=this;this.markers&&this.markers.length?setTimeout((function(){return e.initMarkers()}),100):this.map&&this.map.clearMap()}}]),t}(p["e"]);u["__decorate"]([Object(p["d"])({type:Array,default:function(){return[]}})],S.prototype,"markers",void 0),u["__decorate"]([Object(p["f"])("markers",{immediate:!0,deep:!0})],S.prototype,"handleChangeMarkers",null),S=u["__decorate"]([Object(p["a"])({})],S);var M=S,F=M,E=(a("4f13"),Object(T["a"])(F,D,$,!1,null,"566ec6cf",null)),P=E.exports,R=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{ref:"markerChart",staticClass:"marker-chart"})},B=[],z=a("313e"),q=a.n(z),A=function(e){function t(){return Object(s["a"])(this,t),Object(l["a"])(this,Object(c["a"])(t).apply(this,arguments))}return Object(d["a"])(t,e),Object(o["a"])(t,[{key:"created",value:function(){var e=this;this.$nextTick((function(){e.chart=q.a.init(e.$refs.markerChart)}))}},{key:"beforeDestroy",value:function(){this.chart.dispose()}},{key:"renderChart",value:function(e){this.chart.setOption({xAxis:{},yAxis:{},series:[{symbolSize:10,data:e.map((function(e){return e.position})),type:"scatter"}]})}},{key:"handleChangeRender",value:function(e){var t=this;e&&e.length?setTimeout((function(){return t.renderChart(e)}),100):this.chart&&this.chart.clear()}}]),t}(p["e"]);u["__decorate"]([Object(p["d"])({type:Array,default:function(){return[]}})],A.prototype,"markers",void 0),u["__decorate"]([Object(p["f"])("markers",{immediate:!0,deep:!0})],A.prototype,"handleChangeRender",null),A=u["__decorate"]([Object(p["a"])({})],A);var N=A,V=N,U=(a("81c4"),Object(T["a"])(V,R,B,!1,null,"85b6f7a2",null)),G=U.exports;function Q(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function H(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Q(Object(a),!0).forEach((function(t){Object(h["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Q(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var J=function(e){function t(){var e;return Object(s["a"])(this,t),e=Object(l["a"])(this,Object(c["a"])(t).apply(this,arguments)),e.baseForm=e.baseInfo||{},e.locationConfigList=[],e.selectedTab="",e.selectedDetailType="",e.selectedDataStatus=!1,e.isLoading=!0,e.graphicalType="QtouchAMapMarker",e.selectedData={oldType:"",oldPostion:[],transferType:"",transferPosition:[]},e.selectedMarkers=[],e}return Object(d["a"])(t,e),Object(o["a"])(t,[{key:"getBaseInfo",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t,a,r,n,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,this.isLoading=!0,e.next=4,this.$http.get(m["a"].location.getBaseInfo+this.id);case 4:t=e.sent,a=t.data,r=a.data,n=a.status,i=a.message,n?(this.baseForm=r,this.locationConfigList=r.locationConfigInfoList.map((function(e){return H({},e,{typeDetailIds:e.infoTypeList.map((function(e){return e.typeDetailId}))})}))):this.$message.error(i);case 10:return e.prev=10,this.isLoading=!1,e.finish(10);case 13:case"end":return e.stop()}}),e,this,[[0,,10,13]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"changeDataType",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t,a){var r,n,i,s,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.$http.post(m["a"].locationConfig.preview,{configInfoId:a,typeDetailId:t});case 3:r=e.sent,n=r.data,i=n.data,s=n.status,o=n.message,s?(i&&i.length?(this.selectedData.oldPostion=i.map((function(e){return{position:[Number(e.originalX),Number(e.originalY)]}})),this.selectedData.oldType=i[0].originalCoordinateType,this.selectedData.transferPosition=i.map((function(e){return{position:[Number(e.transformedX),Number(e.transformedY)]}})),this.selectedData.transferType=i[0].targetCoordinateType):(this.$set(this.selectedData,"oldPostion",[]),this.$set(this.selectedData,"transferPosition",[]),this.$message.error("当前类型数据为空")),this.changeDataStatus(this.selectedDataStatus)):this.$message.error(o),e.next=14;break;case 11:e.prev=11,e.t0=e["catch"](0),console.log(e.t0);case 14:case"end":return e.stop()}}),e,this,[[0,11]])})));function t(t,a){return e.apply(this,arguments)}return t}()},{key:"tabClickEv",value:function(){this.selectedDetailType="",this.selectedDataStatus=!1,this.graphicalType="QtouchAMapMarker"}},{key:"changeDataStatus",value:function(e){this.selectedMarkers=e?this.selectedData.transferPosition:this.selectedData.oldPostion;var t=e?this.selectedData.transferType:this.selectedData.oldType;this.changeGraphicalType(t)}},{key:"changeGraphicalType",value:function(e){this.graphicalType="2D"===e?"MarkerChart":"QtouchAMapMarker"}},{key:"handleChange",value:function(e){e&&this.getBaseInfo()}}]),t}(p["e"]);u["__decorate"]([Object(p["d"])({type:Object,required:!0})],J.prototype,"baseInfo",void 0),u["__decorate"]([Object(p["d"])({type:String,required:!0})],J.prototype,"id",void 0),u["__decorate"]([Object(p["f"])("id",{immediate:!0})],J.prototype,"handleChange",null),J=u["__decorate"]([Object(p["a"])({components:{MarkerChart:G,QtouchAMapMarker:P}})],J);var Y=J,K=Y,X=(a("dd5f"),Object(T["a"])(K,x,I,!1,null,"38c47f54",null)),Z=X.exports,W=function(e){function t(){var e;return Object(s["a"])(this,t),e=Object(l["a"])(this,Object(c["a"])(t).apply(this,arguments)),e.searchVO={current:1,query:{name:"",orgIds:[]},size:10},e.total=0,e.orgOptionsProps={multiple:!0,value:"id",label:"name",checkStrictly:!0,emitPath:!1},e.orgOptions=[],e.locationManagementList=[],e.detailComponentStatus=!1,e.dataLoading=!0,e.methodSelf="add",e.selectedItem={},e.detailComponentType="DetailInfo",e}return Object(d["a"])(t,e),Object(o["a"])(t,[{key:"created",value:function(){this.getOrgList()}},{key:"getOrgList",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t,a,r,n,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$http.get(m["a"].organization.getOrgTreeData);case 2:t=e.sent,a=t.data,r=a.data,n=a.status,i=a.message,n?(f["a"].removeEmptyChildren(r),this.orgOptions=r):this.$message.error("组织机构列表查询失败："+i);case 8:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getLocationManagementList",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t,a,r,n,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,this.dataLoading=!0,e.next=4,this.$http.post(m["a"].location.getLocationManageList,this.searchVO);case 4:t=e.sent,a=t.data,r=a.data,n=a.status,i=a.message,n?(this.locationManagementList=r.records,this.total=r.total):this.$message.error(i),this.dataLoading=!1,e.next=16;break;case 13:e.prev=13,e.t0=e["catch"](0),console.log(e.t0);case 16:case"end":return e.stop()}}),e,this,[[0,13]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"handleCurrentChange",value:function(e){this.searchVO.current=e,this.getLocationManagementList()}},{key:"editMethod",value:function(e,t){this.methodSelf=e,this.selectedItem=t,this.detailComponentStatus=!0}},{key:"handleDelete",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){var a=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:try{this.$confirm('确认删除该 "'.concat(t.name,'" 配置？'),"警告",{type:"warning",distinguishCancelAndClose:!0,confirmButtonText:"确认",cancelButtonText:"取消"}).then(Object(i["a"])(regeneratorRuntime.mark((function e(){var r,n,i,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,a.$http.get(m["a"].location.deleteBaseInfo+t.id);case 2:r=e.sent,n=r.data,n.data,i=n.status,s=n.message,i?(a.$message.success("删除成功"),a.getLocationManagementList()):a.$message.error(s);case 8:case"end":return e.stop()}}),e)}))))}catch(r){console.log(r)}case 1:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"changeDetailComponent",value:function(){switch(this.methodSelf){case"preview":this.detailComponentType="ConfigPreview";break;case"add":this.detailComponentType="DetailInfo";break;default:this.detailComponentType="DetailInfo"}}},{key:"handleRequestServer",value:function(e){e?this.changeDetailComponent():(this.methodSelf="",this.getLocationManagementList())}}]),t}(p["e"]);u["__decorate"]([Object(p["f"])("detailComponentStatus",{immediate:!0})],W.prototype,"handleRequestServer",null),W=u["__decorate"]([Object(p["a"])({components:{ConfigPreview:Z,DetailInfo:j},filters:{orgFilter:function(e){return e&&e.length?e.map((function(e){return e.orgName})).join("、"):""}}})],W);var ee=W,te=ee,ae=(a("aed1"),Object(T["a"])(te,r,n,!1,null,"0f4bb3fe",null));t["default"]=ae.exports},ad9a:function(e,t,a){},aed1:function(e,t,a){"use strict";var r=a("ad9a"),n=a.n(r);n.a},bd86:function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var r=a("85f2"),n=a.n(r);function i(e,t,a){return t in e?n()(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}},bf58:function(e,t,a){},c45a:function(e,t,a){},dc7d:function(e,t,a){"use strict";var r="/admin/map/custom",n={mapArrangement:{getBaseMapList:"/admin/basemap/pagination",addBaseMap:"/admin/basemap/add",updateBaseMap:"/admin/basemap/update",deleteBaseMap:"/admin/basemap/delete",addBaseMapOrganization:"/admin/basemap/addBaseMapOrganization/",listBaseMapOrgByBaseMapId:"/admin/basemap/listBaseMapOrgByBaseMapId/",getByDetailId:"/admin/basemap/getByDetailId/"},organization:{getTreeData:"/admin/typeDetail/findTypeTree/organization",getOrgTreeData:"/admin/organization/orgTree",getRegions:"/admin/region/listTree"},grid:{getGridsByOrganizationId:"/admin/grid/paging/",gridAdd:"/admin/grid/add",gridUpdate:"/admin/grid/update"},fence:{getElectricFenceByOrganizationId:"/admin/electronic/fence/paging",fenceAdd:"/admin/electronic/fence/add",fenceUpdate:"/admin/electronic/fence/update",bindPerson:"/admin/electronic/fence/bindPerson/",bindCar:"/admin/electronic/fence/bindCar/"},person:{getPaging:"/admin/person/pagingPerson"},car:{getPaging:"/admin/car/pagingCar"},settings:{findTypeTree:"/admin/typeDetail/findTypeTree",getMapConfig:r+"/style/get",setMapConfig:r+"/style/set",getUserToolsList:r+"/toolbar/list",getUserToolsItem:r+"/toolbar/detail",addUserToolsItem:r+"/toolbar/add",updateUserToolsItem:r+"/toolbar/detail/update",deleteUserToolsItem:r+"/toolbar/delete",moveUserToolsItems:r+"/toolbar/move",getSystemTools:"/admin/map/system/toolbar/get",setSystemTools:"/admin/map/system/toolbar/set",getChartsList:r+"/chart/list",getChartsItem:r+"/chart/detail",addChartsItem:r+"/chart/add",updateChartsItem:r+"/chart/detail/update",deleteChartsItem:r+"/chart/delete",moveChartsItems:r+"/chart/move"},location:{getLocationManageList:"/admin/location/list",saveBaseInfo:"/admin/location/add",updateBaseInfo:"/admin/location/update",getBaseInfo:"/admin/location/get/",deleteBaseInfo:"/admin/location/delete/"},locationConfig:{add:"/admin/location/info/add",update:"/admin/location/info/update",get:"/admin/location/info/preViewInfo",delete:"/admin/location/info/delete/",preview:"/admin/location/info/preViewInfo"},getBaseTypeTree:"/admin/general/base/getObjectBaseTypeTree"};t["a"]=n},dd5f:function(e,t,a){"use strict";var r=a("24fc"),n=a.n(r);n.a},f1ae:function(e,t,a){"use strict";var r=a("86cc"),n=a("4630");e.exports=function(e,t,a){t in e?r.f(e,t,n(0,a)):e[t]=a}}}]);
//# sourceMappingURL=chunk-7a59b2f4.14f82b9e.js.map