(window["webpackJsonpmicro_name_"]=window["webpackJsonpmicro_name_"]||[]).push([["chunk-380370de"],{"006e":function(e,t,a){},"2fdb":function(e,t,a){"use strict";var i=a("5ca1"),n=a("d2c8"),r="includes";i(i.P+i.F*a("5147")(r),"String",{includes:function(e){return!!~n(this,e,r).indexOf(e,arguments.length>1?arguments[1]:void 0)}})},"309b":function(e,t,a){},"36ee":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[e.isListPage?[a("el-row",{staticClass:"main-body",attrs:{gutter:20}},[a("el-col",{attrs:{span:6}},[a("div",{staticClass:"app-body",staticStyle:{"line-height":"150px","text-align":"center"}},[a("el-button",{attrs:{type:"text",icon:"el-icon-plus"},on:{click:e.createNewApp}},[e._v("创建轻应用")])],1)]),e._l(e.appList,(function(t,i){return a("el-col",{key:i,attrs:{span:6}},[a("div",{staticClass:"app-body",on:{click:function(a){return e.getAppDetail(t)}}},[a("div",{staticClass:"app-logo"},[a("img",{staticStyle:{"max-width":"60px","max-height":"60px"},attrs:{src:t.logoUrl,alt:"logo"}})]),a("div",{staticClass:"app-intro"},[a("div",{staticClass:"inline-info",staticStyle:{height:"40px"}},[a("span",{staticClass:"intro-name",staticStyle:{width:"100%"},attrs:{title:t.appName}},[e._v(e._s(t.appName))])]),a("div",{staticClass:"inline-info",staticStyle:{"font-size":"12px"}},[a("span",{staticClass:"intro-name"},[e._v("安全域名：")]),a("span",{staticClass:"intro-content",attrs:{title:t.secureDomainName}},[e._v(e._s(t.secureDomainName))])])]),0===t.authStatus?a("div",{staticClass:"apply-status is-waiting"},[a("p",[a("i",{staticClass:"el-icon-warning-outline"}),e._v("已取消")])]):e._e(),1===t.authStatus?a("div",{staticClass:"apply-status is-waiting"},[a("p",[a("i",{staticClass:"el-icon-time"}),e._v("待审批")])]):e._e(),2===t.authStatus?a("div",{staticClass:"apply-status is-success"},[a("p",[a("i",{staticClass:"el-icon-success"}),e._v("已通过")])]):e._e(),3===t.authStatus?a("div",{staticClass:"apply-status is-error"},[a("p",[a("i",{staticClass:"el-icon-error"}),e._v("未通过")])]):e._e()])])}))],2),a("q-pagination",{attrs:{"current-page":e.searchTDO.current,"page-size":e.searchTDO.size,"page-sizes":[10,20,50,100],layout:"total, prev, pager, next, jumper",total:e.total},on:{"current-change":function(t){return e.handleCurrentChange(t)},"update:currentPage":function(t){return e.$set(e.searchTDO,"current",t)},"update:current-page":function(t){return e.$set(e.searchTDO,"current",t)}}})]:[a("app-detail",{attrs:{id:e.selectedApp.id,"auth-status":e.selectedApp.authStatus,method:e.selectedApp.method},on:{cancel:function(t){e.isListPage=!0},sucess:function(t){e.isListPage=!0}}})]],2)},n=[],r=(a("c5f6"),a("96cf"),a("3b8d")),s=a("d225"),p=a("b0b4"),l=a("308d"),c=a("6bb5"),o=a("4e2b"),u=a("9ab4"),d=a("60a3"),h=a("5384"),m=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"create-app"},[a("div",{staticClass:"header"},[a("el-button",{attrs:{type:"text",icon:"el-icon-arrow-left"},on:{click:function(t){return e.$emit("cancel")}}},[e._v("返回")]),a("span",{staticStyle:{"margin-left":"20px"}},[e._v(e._s(e.headerMessage))])],1),a("el-form",{ref:"appDetailForm",attrs:{size:"small","label-width":"120px",model:e.appDetail,rules:e.rules}},[a("el-row",{staticStyle:{width:"100%"}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"轻应用logo：",prop:"logoUrl"}},[a("q-upload",{attrs:{limitNum:1,size:.5,accept:"image/bmp,image/png,image/jpeg"},model:{value:e.fileList,callback:function(t){e.fileList=t},expression:"fileList"}})],1)],1),a("el-col",{directives:[{name:"show",rawName:"v-show",value:e.isPreview,expression:"isPreview"}],attrs:{span:12}},[a("span",{staticClass:"el-form-item__label",staticStyle:{width:"120px"}},[e._v("审核状态：")]),0===e.authStatus?[a("span",{staticClass:"el-form-item__content is-waiting"},[a("i",{staticClass:"el-icon-warning-outline"}),e._v("已取消\n            "),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){e.isPreview=!1}}},[e._v("修改信息")])],1)]:e._e(),1===e.authStatus?[a("span",{staticClass:"el-form-item__content is-waiting"},[a("i",{staticClass:"el-icon-time"}),e._v("待审核\n            "),a("el-button",{attrs:{size:"small"},on:{click:e.cancelApply}},[e._v("取消审核")])],1)]:e._e(),2===e.authStatus?[a("div",{staticClass:"el-form-item__content is-success"},[a("i",{staticClass:"el-icon-success"}),e._v("已通过")])]:e._e(),3===e.authStatus?[a("span",{staticClass:"el-form-item__content is-error"},[a("i",{staticClass:"el-icon-error"}),e._v("未通过\n            "),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){e.isPreview=!1}}},[e._v("修改信息")])],1),a("div",{staticClass:"el-form-item__label",staticStyle:{width:"120px"}},[e._v("未通过原因：")]),a("div",{staticClass:"el-form-item__content"},[e._v(e._s(e.appDetail.rejectReason))])]:e._e()],2)],1),a("el-row",[a("el-form-item",{staticStyle:{width:"50%"},attrs:{label:"轻应用名称：",prop:"appName"}},[a("el-input",{attrs:{disabled:e.isPreview,maxlength:20,placeholder:"不超过20个字符"},model:{value:e.appDetail.appName,callback:function(t){e.$set(e.appDetail,"appName",t)},expression:"appDetail.appName"}})],1),a("el-form-item",{staticStyle:{width:"50%"},attrs:{label:"安全域名：",prop:"secureDomainName"}},[a("el-input",{attrs:{disabled:e.isPreview,placeholder:"不带http的一级或二级域名"},model:{value:e.appDetail.secureDomainName,callback:function(t){e.$set(e.appDetail,"secureDomainName",t)},expression:"appDetail.secureDomainName"}})],1),2===e.authStatus&&e.isPreview?[a("el-form-item",{staticStyle:{width:"50%"},attrs:{label:"AppId：",prop:"appId"}},[a("el-input",{attrs:{disabled:""},model:{value:e.appDetail.appId,callback:function(t){e.$set(e.appDetail,"appId",t)},expression:"appDetail.appId"}})],1),a("el-form-item",{staticStyle:{width:"50%"},attrs:{label:"AppSecret：",prop:"appSecret"}},[a("div",{staticStyle:{display:"inline-flex","justify-content":"space-between",width:"100%"}},[e.showSecret?a("el-input",{staticStyle:{width:"calc(100% - 60px)"},attrs:{disabled:""},model:{value:e.appDetail.appSecret,callback:function(t){e.$set(e.appDetail,"appSecret",t)},expression:"appDetail.appSecret"}}):e._e(),e.showSecret?e._e():a("el-input",{staticStyle:{width:"calc(100% - 60px)"},attrs:{disabled:"",value:e.appDetail.appSecret?e.appDetail.appSecret.substring(0,5)+"***************":""}}),a("el-button",{attrs:{type:"text",icon:"el-icon-view"},on:{click:function(t){e.showSecret=!e.showSecret}}}),a("el-button",{attrs:{type:"text",icon:"el-icon-refresh"},on:{click:e.refreshSecret}})],1)])]:e._e()],2),a("el-form-item",{attrs:{label:"轻应用介绍：",prop:"note"}},[a("el-input",{attrs:{disabled:e.isPreview,type:"textarea"},model:{value:e.appDetail.note,callback:function(t){e.$set(e.appDetail,"note",t)},expression:"appDetail.note"}})],1),a("el-form-item",{attrs:{label:"终端类型：",prop:"types"}},[a("el-checkbox-group",{attrs:{disabled:e.isPreview},on:{change:function(t){return e.changeForceUpdate("types",t)}},model:{value:e.appDetail.types,callback:function(t){e.$set(e.appDetail,"types",t)},expression:"appDetail.types"}},[a("el-checkbox",{key:"H5",attrs:{label:"H5"}},[e._v("H5应用 ")]),a("el-checkbox",{key:"WEB",attrs:{label:"WEB"}},[e._v("Web应用")]),a("el-checkbox",{key:"IOS",attrs:{label:"IOS"}},[e._v("iOS应用")]),a("el-checkbox",{key:"ANDROID",attrs:{label:"ANDROID"}},[e._v("Android应用")])],1)],1),a("div",{directives:[{name:"show",rawName:"v-show",value:e.appDetail.types&&e.appDetail.types.length,expression:"appDetail.types && appDetail.types.length"}],staticStyle:{width:"100%"}},[e.showHtmlEntry?a("el-row",{key:"htmlEntry",staticClass:"entry-edit"},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{"label-width":"160px",label:"H5应用入口",prop:"htmlEntry",rules:{required:!0,trigger:"blur",message:"请输入H5入口地址"}}},[a("el-input",{attrs:{disabled:e.isPreview},on:{input:function(t){return e.changeForceUpdate("htmlEntry",t)}},model:{value:e.appDetail.htmlEntry,callback:function(t){e.$set(e.appDetail,"htmlEntry",t)},expression:"appDetail.htmlEntry"}})],1)],1)],1):e._e(),e.showWebEntry?a("el-row",{key:"webEntry",staticClass:"entry-edit"},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{"label-width":"160px",label:"Web应用入口",prop:"webEntry",rules:{required:!0,trigger:"blur",message:"请输入Web入口地址"}}},[a("el-input",{attrs:{disabled:e.isPreview},on:{input:function(t){return e.changeForceUpdate("webEntry",t)}},model:{value:e.appDetail.webEntry,callback:function(t){e.$set(e.appDetail,"webEntry",t)},expression:"appDetail.webEntry"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"打开方式",prop:"webOpenMethod",rules:{required:!0,trigger:"change",message:"请选择打开方式"}}},[a("el-select",{attrs:{disabled:e.isPreview},on:{change:function(t){return e.changeForceUpdate("webOpenMethod",t)}},model:{value:e.appDetail.webOpenMethod,callback:function(t){e.$set(e.appDetail,"webOpenMethod",t)},expression:"appDetail.webOpenMethod"}},[a("el-option",{key:"1",attrs:{label:"嵌入式",value:"FLUSHBONADING"}}),a("el-option",{key:"2",attrs:{label:"新标签页",value:"WINDOW"}})],1)],1)],1)],1):e._e(),e.showIosEntry?a("el-row",{key:"iosEntry",staticClass:"entry-edit"},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{"label-width":"160px",label:"iOS应用Scheme",prop:"iosEntry",rules:{required:!0,trigger:"blur",message:"请输入iOS应用Scheme"}}},[a("el-input",{attrs:{disabled:e.isPreview},on:{input:function(t){return e.changeForceUpdate("iosEntry",t)}},model:{value:e.appDetail.iosEntry,callback:function(t){e.$set(e.appDetail,"iosEntry",t)},expression:"appDetail.iosEntry"}})],1)],1)],1):e._e(),e.showAndroidEntry?a("el-row",{key:"androidEntry",staticClass:"entry-edit"},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"Android应用Scheme",prop:"androidEntry","label-width":"160px",rules:{required:!0,trigger:"blur",message:"请输入Android应用Scheme"}}},[a("el-input",{attrs:{disabled:e.isPreview},on:{input:function(t){return e.changeForceUpdate("androidEntry",t)}},model:{value:e.appDetail.androidEntry,callback:function(t){e.$set(e.appDetail,"androidEntry",t)},expression:"appDetail.androidEntry"}})],1)],1)],1):e._e()],1)],1),2===e.authStatus&&e.isPreview?a("access-team",{attrs:{"app-id":e.id}}):e._e(),e.isPreview?e._e():a("div",{staticClass:"footer-btn"},[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.submitApp}},[e._v("提交审核")])],1)],1)},y=[],g=(a("6762"),a("2fdb"),a("9d55")),f=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"main-table"},[a("el-form",{attrs:{size:"small",inline:""}},[a("el-form-item",[a("el-button",{attrs:{size:"small",type:"success"},on:{click:function(t){e.showApplyDialog=!0}}},[e._v("新增团队接入")])],1)],1),a("el-table",{attrs:{data:e.applyTeamList}},[a("el-table-column",{attrs:{prop:"tenantName",label:"团队名称",align:"center",width:"300"}}),a("el-table-column",{attrs:{label:"可获取数据类型",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.dataType&&t.row.dataType.length?t.row.dataType.join("、"):""))])]}}])}),a("el-table-column",{attrs:{label:"申请时间",align:"center",formatter:function(t){return e.$moment(t.createTime).format("YYYY-MM-DD HH:mm:ss")}}}),a("el-table-column",{attrs:{label:"状态",align:"center",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[1===t.row.authStatus?a("el-button",{attrs:{type:"info",plain:"",disabled:"",size:"mini"}},[e._v("待审核")]):e._e(),2===t.row.authStatus?a("el-button",{attrs:{type:"success",plain:"",disabled:"",size:"mini"}},[e._v("已通过")]):e._e(),3===t.row.authStatus?a("el-button",{attrs:{type:"danger",plain:"",disabled:"",size:"mini"}},[e._v("已拒绝")]):e._e()]}}])})],1),a("q-pagination",{attrs:{"current-page":e.searchForm.current,"page-size":e.searchForm.size,"page-sizes":[10,20,50,100],layout:"total, prev, pager, next, jumper",total:e.total},on:{"current-change":function(t){return e.handleCurrentChange(t)},"update:currentPage":function(t){return e.$set(e.searchForm,"current",t)},"update:current-page":function(t){return e.$set(e.searchForm,"current",t)}}}),a("el-dialog",{attrs:{title:"新增团队接入申请",visible:e.showApplyDialog,"close-on-click-modal":!1,width:"600px"},on:{"update:visible":function(t){e.showApplyDialog=t}}},[a("el-form",{ref:"newApplyForm",attrs:{model:e.newApplyForm,size:"small","label-width":"130px"}},[a("el-form-item",{attrs:{label:"团队授权码:",prop:"code",rules:[{required:!0,trigger:"blur",message:"请输入授权码"},{required:!0,trigger:"change",message:"请输入授权码"}]}},[a("el-input",{staticStyle:{width:"calc(100% - 60px)"},model:{value:e.newApplyForm.code,callback:function(t){e.$set(e.newApplyForm,"code",t)},expression:"newApplyForm.code"}}),a("q-search-button",{staticStyle:{float:"right"},on:{click:e.checkCode}},[e._v("查询")])],1),a("el-form-item",{attrs:{label:"团队名称:"}},[e._v("\n        "+e._s(e.newApplyForm.tenantName)+"\n      ")]),a("el-form-item",{attrs:{label:"业务数据类型:",prop:"dataType",rules:{required:!0,trigger:"change",message:"请至少选择一项数据类型"}}},[a("el-checkbox-group",{model:{value:e.newApplyForm.dataType,callback:function(t){e.$set(e.newApplyForm,"dataType",t)},expression:"newApplyForm.dataType"}},e._l(e.baseType,(function(t){return a("el-checkbox",{key:t.id,attrs:{label:t.id,name:t.baseTypeName}},[e._v(e._s(t.baseTypeName))])})),1)],1)],1),a("div",{staticStyle:{display:"inline-flex","justify-content":"flex-end",width:"100%"}},[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.createNewApply}},[e._v("提交申请")])],1)],1)],1)},b=[],v=(a("8e6e"),a("ac6a"),a("456d"),a("bd86"));a("7f7f");function w(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,i)}return a}function D(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?w(Object(a),!0).forEach((function(t){Object(v["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):w(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var _=function(e){function t(){var e;return Object(s["a"])(this,t),e=Object(l["a"])(this,Object(c["a"])(t).apply(this,arguments)),e.searchForm={current:1,query:{teamName:"",status:""},size:10},e.total=0,e.loading=!0,e.applyTeamList=[],e.showApplyDialog=!1,e.newApplyForm={code:"",dataType:[]},e.baseType=[],e}return Object(o["a"])(t,e),Object(p["a"])(t,[{key:"getApplyTeamList",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){var a,i,n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t&&(this.searchForm.current=1),e.prev=1,e.next=4,this.$http.get(h["a"].getAccessTeamList+"?id="+this.appId);case 4:a=e.sent,i=a.data,n=i.data,r=i.status,i.message,r&&(this.applyTeamList=n);case 10:return e.prev=10,this.loading=!1,e.finish(10);case 13:case"end":return e.stop()}}),e,this,[[1,,10,13]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getBaseDataType",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t,a,i,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$http.get(h["a"].getDataType,{params:{tenantId:this.newApplyForm.tenantId}});case 2:t=e.sent,a=t.data,i=a.data,n=a.status,a.message,n&&(this.baseType=i);case 8:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"handleCurrentChange",value:function(e){this.searchForm.current=e,this.getApplyTeamList()}},{key:"checkCode",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t,a,i,n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this.newApplyForm.code){e.next=11;break}return e.next=3,this.$http.get(h["a"].checkAuthorizationCode+"?code="+this.newApplyForm.code);case 3:t=e.sent,a=t.data,i=a.data,n=a.status,r=a.message,n?(this.$set(this.newApplyForm,"tenantName",i.name),this.$set(this.newApplyForm,"tenantId",i.id),this.getBaseDataType()):this.$message.error(r),e.next=12;break;case 11:this.$message.warning("请输入授权码");case 12:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"createNewApply",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.$refs.newApplyForm.validate(function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(a){var i,n,r,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!a){e.next=9;break}return e.next=3,t.$http.post(h["a"].createAccessTeam,D({},t.newApplyForm,{id:t.appId}));case 3:i=e.sent,n=i.data,n.data,r=n.status,s=n.message,r?(t.$message.success("申请成功"),t.showApplyDialog=!1,t.getApplyTeamList(!0)):t.$message.error(s);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"cancelApply",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){var a=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.$confirm("确认取消接入?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(r["a"])(regeneratorRuntime.mark((function e(){var i,n,r,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,a.$http.get(h["a"].cancelAccessTeam+"?id="+t.id);case 2:i=e.sent,n=i.data,n.data,r=n.status,s=n.message,r?(a.$message.success("操作成功"),a.getApplyTeamList()):a.$message.error(s);case 8:case"end":return e.stop()}}),e)}))));case 1:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"created",value:function(){this.getApplyTeamList()}}]),t}(d["e"]);u["__decorate"]([Object(d["d"])({type:String,required:!0})],_.prototype,"appId",void 0),_=u["__decorate"]([Object(d["a"])({})],_);var A=_,O=A,k=(a("eb2e"),a("2877")),x=Object(k["a"])(O,f,b,!1,null,"02192a1c",null),S=x.exports,j=function(e){function t(){var e;return Object(s["a"])(this,t),e=Object(l["a"])(this,Object(c["a"])(t).apply(this,arguments)),e.appDetail={type:[],types:[]},e.fileList=[],e.loading=!0,e.isPreview="preview"===e.method,e.showSecret=!1,e.rules={logoUrl:{required:!0,trigger:"change",message:"请选择应用logo"},appName:{required:!0,trigger:"blur",message:"请输入应用名称"},secureDomainName:{required:!0,trigger:"blur",message:"请输入安全域名"},note:{required:!0,trigger:"blur",message:"请输入应用简介"},types:{required:!0,trigger:"change",message:"请至少选择一项终端类型"}},e}return Object(o["a"])(t,e),Object(p["a"])(t,[{key:"handleChangeId",value:function(e){"create"!==this.method?e&&this.getAppDetail():this.appDetail={type:[],types:[]}}},{key:"handleAttachChange",value:function(e){e.length?this.appDetail.logoUrl=e[0].url:this.appDetail.logoUrl=""}},{key:"getAppDetail",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t,a,i,n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.$http.get("".concat(h["a"].appDetail,"?id=").concat(this.id));case 3:t=e.sent,a=t.data,i=a.data,n=a.status,r=a.message,n?(this.appDetail=i,this.$set(this.appDetail,"types",[]),this.fileList=[{url:this.appDetail.logoUrl,smallUrl:this.appDetail.logoUrl}],this.appDetail.type&&this.appDetail.type.length&&this.changeDataTypes()):this.$message.error(r);case 9:return e.prev=9,this.loading=!1,e.finish(9);case 12:case"end":return e.stop()}}),e,this,[[0,,9,12]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"changeDataTypes",value:function(){this.appDetail.type.filter((function(e){return"H5"===e.terminalType})).length&&(this.appDetail.types.push("H5"),this.appDetail.htmlEntry=this.appDetail.type.filter((function(e){return"H5"===e.terminalType}))[0].terminalEntrance),this.appDetail.type.filter((function(e){return"WEB"===e.terminalType})).length&&(this.appDetail.types.push("WEB"),this.appDetail.webEntry=this.appDetail.type.filter((function(e){return"WEB"===e.terminalType}))[0].terminalEntrance,this.appDetail.webOpenMethod=this.appDetail.type.filter((function(e){return"WEB"===e.terminalType}))[0].openMode),this.appDetail.type.filter((function(e){return"IOS"===e.terminalType})).length&&(this.appDetail.types.push("IOS"),this.appDetail.iosEntry=this.appDetail.type.filter((function(e){return"IOS"===e.terminalType}))[0].terminalEntrance),this.appDetail.type.filter((function(e){return"ANDROID"===e.terminalType})).length&&(this.appDetail.types.push("ANDROID"),this.appDetail.androidEntry=this.appDetail.type.filter((function(e){return"ANDROID"===e.terminalType}))[0].terminalEntrance)}},{key:"changeForceUpdate",value:function(e,t){this.$set(this.appDetail,e,t),this.$forceUpdate()}},{key:"submitApp",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.appDetail.type=[],this.$refs.appDetailForm.validate((function(e){e&&(t.appDetail.types.includes("H5")&&t.appDetail.type.push({terminalType:"H5",terminalEntrance:t.appDetail.htmlEntry}),t.appDetail.types.includes("WEB")&&t.appDetail.type.push({terminalType:"WEB",terminalEntrance:t.appDetail.webEntry,openMode:t.appDetail.webOpenMethod}),t.appDetail.types.includes("IOS")&&t.appDetail.type.push({terminalType:"IOS",terminalEntrance:t.appDetail.iosEntry}),t.appDetail.types.includes("ANDROID")&&t.appDetail.type.push({terminalType:"ANDROID",terminalEntrance:t.appDetail.androidEntry}),t.doSave())}));case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"doSave",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t,a,i,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$http.post("create"===this.method?h["a"].appCreate:h["a"].appUpdate,{id:"create"===this.method?"":this.id,appName:this.appDetail.appName,logoUrl:this.appDetail.logoUrl,note:this.appDetail.note,secureDomainName:this.appDetail.secureDomainName,type:this.appDetail.type});case 2:t=e.sent,a=t.data,a.data,i=a.status,n=a.message,i?(this.$message.success("提交成功，等待审核"),this.$emit("success"),this.$emit("cancel")):this.$message.error(n);case 8:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"cancelApply",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.$confirm("确认取消该轻应用申请?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(r["a"])(regeneratorRuntime.mark((function e(){var a,i,n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$http.get(h["a"].appCancel+"?id="+t.id);case 2:a=e.sent,i=a.data,i.data,n=i.status,r=i.message,n?(t.$message.success("取消成功"),t.$emit("cancel")):t.$message.error(r);case 8:case"end":return e.stop()}}),e)}))));case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"refreshSecret",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.$confirm("是否刷新该应用密钥?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(r["a"])(regeneratorRuntime.mark((function e(){var a,i,n,r,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$http.get(h["a"].appSecretRefresh+"?id="+t.id);case 2:a=e.sent,i=a.data,n=i.data,r=i.status,s=i.message,r?(t.$message.success("刷新成功"),t.appDetail.appSecret=n):t.$message.error(s);case 8:case"end":return e.stop()}}),e)}))));case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"headerMessage",get:function(){return"create"===this.method?"创建轻应用":this.isPreview?"查看轻应用":"修改轻应用"}},{key:"showHtmlEntry",get:function(){return this.appDetail.types.includes("H5")}},{key:"showWebEntry",get:function(){return this.appDetail.types.includes("WEB")}},{key:"showIosEntry",get:function(){return this.appDetail.types.includes("IOS")}},{key:"showAndroidEntry",get:function(){return this.appDetail.types.includes("ANDROID")}}]),t}(d["e"]);u["__decorate"]([Object(d["d"])({type:String})],j.prototype,"id",void 0),u["__decorate"]([Object(d["d"])({type:String})],j.prototype,"method",void 0),u["__decorate"]([Object(d["d"])({type:Number})],j.prototype,"authStatus",void 0),u["__decorate"]([Object(d["f"])("id",{immediate:!0})],j.prototype,"handleChangeId",null),u["__decorate"]([Object(d["f"])("fileList")],j.prototype,"handleAttachChange",null),j=u["__decorate"]([Object(d["a"])({components:{AccessTeam:S,ImageUpload:g["a"]}})],j);var T=j,C=T,E=(a("b9b8"),Object(k["a"])(C,m,y,!1,null,"6bb61480",null)),$=E.exports,N=function(e){function t(){var e;return Object(s["a"])(this,t),e=Object(l["a"])(this,Object(c["a"])(t).apply(this,arguments)),e.searchTDO={current:1,query:{appName:"",status:""},size:15},e.appList=[],e.loading=!0,e.isListPage=!0,e.total=0,e.selectedApp={},e}return Object(o["a"])(t,e),Object(p["a"])(t,[{key:"handleGetting",value:function(e){e&&this.getAppList()}},{key:"getAppList",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t,a,i,n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.$http.post(h["a"].getAppList,this.searchTDO);case 3:t=e.sent,a=t.data,i=a.data,n=a.status,r=a.message,n?(this.appList=i.records,this.total=i.total):this.$message.error(r);case 9:return e.prev=9,this.loading=!1,e.finish(9);case 12:case"end":return e.stop()}}),e,this,[[0,,9,12]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"handleCurrentChange",value:function(e){this.searchTDO.current=e,this.getAppList()}},{key:"createNewApp",value:function(){this.btnDisabled?this.$message.error("您的资质审核未通过，暂无权限创建轻应用"):(this.selectedApp={method:"create"},this.isListPage=!1)}},{key:"getAppDetail",value:function(e){this.btnDisabled?this.$message.error("您的资质审核未通过，暂无权限访问应用详情"):(this.selectedApp=e,this.selectedApp.method="preview",this.isListPage=!1)}},{key:"beforeCreate",value:function(){var e=this;this.$http.get(h["a"].getQualificationData).then((function(t){t.data.status?localStorage.setItem("openPlatformAuth",t.data.data.authStatus):e.$message.error(t.data.message)}))}},{key:"btnDisabled",get:function(){return 2!==Number(localStorage.getItem("openPlatformAuth"))}}]),t}(d["e"]);u["__decorate"]([Object(d["f"])("isListPage",{immediate:!0})],N.prototype,"handleGetting",null),N=u["__decorate"]([Object(d["a"])({components:{AppDetail:$}})],N);var R=N,P=R,F=(a("db41"),Object(k["a"])(P,i,n,!1,null,"b8e60e8c",null));t["default"]=F.exports},5147:function(e,t,a){var i=a("2b4c")("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(a){try{return t[i]=!1,!"/./"[e](t)}catch(n){}}return!0}},5384:function(e,t,a){"use strict";t["a"]={getAppApplyList:"/admin/openApp/manage/list",getAppList:"/admin/openApp/manage/showList",appDetail:"/admin/openApp/manage/showApp",appPass:"/admin/openApp/manage/pass",appReject:"/admin/openApp/manage/reject",appCancel:"/admin/openApp/manage/cancel",appCreate:"/admin/openApp/manage/createApp",appUpdate:"/admin/openApp/manage/updateApp",appSecretRefresh:"/admin/openApp/manage/refreshSecret",getQualificationData:"/admin/devQualification/getByTenant",cancelQualification:"/admin/devQualification/cancelAudit",saveQualification:"/admin/devQualification/save",submitQualification:"/admin/devQualification/submit",editQualification:"/admin/devQualification/update",getAllQualificationList:"/admin/devQualificationAudit/paging",agreeQualificationApply:"/admin/devQualificationAudit/passAudit",refusequalificationApply:"/admin/devQualificationAudit/rejectAudit",createAccessTeam:"/admin/openApp/authTenant/accessTeam",cancelAccessTeam:"/admin/openApp/authTenant/cancle",createGenerateCode:"/admin/openApp/authTenant/generateCode",passAccessTeam:"/admin/openApp/authTenant/pass",rejectAccessTeam:"/admin/openApp/authTenant/reject",showAccessDetail:"/admin/openApp/authTenant/showDetail",getApplyList:"/admin/openApp/authTenant/showList",checkAuthorizationCode:"/admin/openApp/authTenant/testCode",getDataType:"/admin/openApp/authTenant/getDataType",getAccessTeamList:"/admin/openApp/authTenant/freshAuthTenantInfo"}},6762:function(e,t,a){"use strict";var i=a("5ca1"),n=a("c366")(!0);i(i.P,"Array",{includes:function(e){return n(this,e,arguments.length>1?arguments[1]:void 0)}}),a("9c6c")("includes")},"9d55":function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"upload"},[a("div",{staticClass:"upload-img"},[a("img",{attrs:{src:e.src,alt:""}}),e._m(0)]),a("el-upload",{ref:"upload",attrs:{action:"/api/file/upload",accept:"image/jpeg,image/png,image/jpg","http-request":e.httpRequest,"on-change":function(t){return e.onChange(t)},"auto-upload":!1,multiple:!1,"show-file-list":!1,limit:1}},[a("i",{staticClass:"el-icon-plus"})])],1)},n=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"mask"},[a("i",{staticClass:"el-icon-delete"})])}],r=a("d225"),s=a("b0b4"),p=a("308d"),l=a("6bb5"),c=a("4e2b"),o=a("9ab4"),u=a("60a3"),d=a("6156"),h=function(e){function t(){return Object(r["a"])(this,t),Object(p["a"])(this,Object(l["a"])(t).apply(this,arguments))}return Object(c["a"])(t,e),Object(s["a"])(t,[{key:"created",value:function(){}}]),t}(u["e"]);o["__decorate"]([Object(u["d"])({type:String})],h.prototype,"src",void 0),o["__decorate"]([Object(u["d"])({type:Function,required:!0})],h.prototype,"httpRequest",void 0),o["__decorate"]([Object(u["d"])({type:Function,required:!0})],h.prototype,"onChange",void 0),h=o["__decorate"]([Object(u["a"])({components:{Upload:d["a"]}})],h);var m=h,y=m,g=(a("b581"),a("2877")),f=Object(g["a"])(y,i,n,!1,null,"522d8830",null);t["a"]=f.exports},b581:function(e,t,a){"use strict";var i=a("bf29"),n=a.n(i);n.a},b9b8:function(e,t,a){"use strict";var i=a("309b"),n=a.n(i);n.a},bf29:function(e,t,a){},ca2e:function(e,t,a){},d2c8:function(e,t,a){var i=a("aae3"),n=a("be13");e.exports=function(e,t,a){if(i(t))throw TypeError("String#"+a+" doesn't accept regex!");return String(n(e))}},db41:function(e,t,a){"use strict";var i=a("ca2e"),n=a.n(i);n.a},eb2e:function(e,t,a){"use strict";var i=a("006e"),n=a.n(i);n.a}}]);
//# sourceMappingURL=chunk-380370de.7857bf94.js.map