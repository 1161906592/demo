(window["webpackJsonpmicro_name_"]=window["webpackJsonpmicro_name_"]||[]).push([["chunk-44e337bc"],{"0a49":function(e,t,a){var n=a("9b43"),i=a("626a"),r=a("4bf8"),s=a("9def"),o=a("cd1c");e.exports=function(e,t){var a=1==e,l=2==e,d=3==e,c=4==e,u=6==e,p=5==e||u,m=t||o;return function(t,o,f){for(var h,g,v=r(t),b=i(v),y=n(o,f,3),k=s(b.length),O=0,w=a?m(t,k):l?m(t,0):void 0;k>O;O++)if((p||O in b)&&(h=b[O],g=y(h,O,v),e))if(a)w[O]=g;else if(g)switch(e){case 3:return!0;case 5:return h;case 6:return O;case 2:w.push(h)}else if(c)return!1;return u?-1:d||c?c:w}}},"386d":function(e,t,a){"use strict";var n=a("cb7c"),i=a("83a1"),r=a("5f1b");a("214f")("search",1,(function(e,t,a,s){return[function(a){var n=e(this),i=void 0==a?void 0:a[t];return void 0!==i?i.call(a,n):new RegExp(a)[t](String(n))},function(e){var t=s(a,e,this);if(t.done)return t.value;var o=n(e),l=String(this),d=o.lastIndex;i(d,0)||(o.lastIndex=0);var c=r(o,l);return i(o.lastIndex,d)||(o.lastIndex=d),null===c?-1:c.index}]}))},"456d":function(e,t,a){var n=a("4bf8"),i=a("0d58");a("5eda")("keys",(function(){return function(e){return i(n(e))}}))},"478f":function(e,t,a){"use strict";var n=a("5841a"),i=a.n(n);i.a},5279:function(e,t,a){"use strict";var n=a("c69d"),i=a.n(n);i.a},"5841a":function(e,t,a){},"5eda":function(e,t,a){var n=a("5ca1"),i=a("8378"),r=a("79e5");e.exports=function(e,t){var a=(i.Object||{})[e]||Object[e],s={};s[e]=t(a),n(n.S+n.F*r((function(){a(1)})),"Object",s)}},7514:function(e,t,a){"use strict";var n=a("5ca1"),i=a("0a49")(5),r="find",s=!0;r in[]&&Array(1)[r]((function(){s=!1})),n(n.P+n.F*s,"Array",{find:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),a("9c6c")(r)},"75ac":function(e,t,a){"use strict";var n=a("b9dc"),i=a.n(n);i.a},"80c8":function(e,t,a){"use strict";var n={getInterfaceList:"/admin/system/interface/page",addInterface:"/admin/system/interface/add",editInterface:"/admin/system/interface/update",deleteInterface:"/admin/system/interface/delete",getFunctionList:"/admin/menu/operation/page",addFunction:"/admin/menu/operation/add",editFunction:"/admin/menu/operation/update",deleteFunction:"/admin/menu/operation/delete",getMenuList:"/admin/navigation/list",addMenu:"/admin/navigation/add",editMenu:"/admin/navigation/update",getMenuDetail:"/admin/navigation/get",addMenuFunc:"/admin/navigation/operation/add",deleteMenuFunc:"/admin/navigation/operation/delete",addMenuInter:"/admin/navigation/operation/add/interface",deleteMenuInter:"/admin/navigation/operation//delete/interface",deleteMenu:"/admin/navigation/delete/",getSelectInterList:"/admin/navigation/pageChosenInterface",getUnSelectFuncList:"/admin/navigation/pageOperation",getUnSelectInterList:"/admin/navigation/pageInterface",moveMenuOrder:"/admin/navigation/moveOrder/",getSubsystemList:"/admin/subsystem/list",addSubsystem:"/admin/subsystem/add",updateSubsystem:"/admin/subsystem/update",deleteSubsystem:"/admin/subsystem/delete",getTenantList:"/admin/tenant/paging",getTenantNavList:"/admin/navigation/listByTenantId/",addTenant:"/admin/tenant/add",updateTenant:"/admin/tenant/update",updateTenantNav:"/admin/tenant/saveNavigation/",updateMobileApp:"/admin/tenant/saveMobileApp/",getAdminByTenant:"/admin/person/getAdminByTenant/",getAllAppList:"/admin/mobile/app/listByTenantId/",getTeamBaseType:"/admin/baseType/listByTenantId/",saveTeamBaseType:"/admin/tenant/saveBaseType/",deleteTenant:"/admin/tenant/delete",getRoleList:"/admin/role/paging",roleList:"/admin/role/list",addRole:"/admin/role/add",updateRole:"/admin/role/update",getRoleOperationList:"/admin/role/listNavigationAndOperationByRoleId/",getAllOperationList:"/admin/navigation/listWithOperation",updateRoleNavOperation:"/admin/role/saveRoleNavigationOperations/",deleteRole:"/admin/role/delete",getAllDataList:"/admin/role/listDataResourceItems",getSelectDataList:"/admin/role/listDataResourcesByRoleId/",updateDataView:"/admin/role/saveRoleDataResources/",getAPPOrganizeList:"/admin/mobile/app/type/paging",addAPPOrganize:"/admin/mobile/app/type/add",updateAPPOrganize:"/admin/mobile/app/type/update",deleteAPPOrganize:"/admin/mobile/app/type/delete",getAPPManagementList:"/admin/mobile/app/paging",addAPPManagement:"/admin/mobile/app/add",updateAPPManagement:"/admin/mobile/app/update",deleteAPPManagement:" /admin/mobile/app/delete",getBaseTypeList:"/admin/baseType/list",getBaseTypeAttrsList:"/admin/baseType/attr/pagingAttr",addBaseType:"/admin/baseType/add",updateBaseType:"/admin/baseType/update",deleteBaseType:"/admin/baseType/delete",addAttr:"/admin/baseType/attr/add",updateAttr:"/admin/baseType/attr/update",deleteBaseTypeAttr:"/admin/baseType/attr/delete",upAttrSort:"/admin/baseType/attr/upAttrSort",downAttrSort:"/admin/baseType/attr/downAttrSort",filterBaseTypeList:"/admin/baseType/filterBaseTypeList",getPackageList:"/admin/package/paging",addPackage:"/admin/package/add",updatePackage:"/admin/package/update",deletePackage:"/admin/package/delete",getPackageDetail:"/admin/package/getInfoById",getPackageBaseType:"/admin/package/listBaseTypeByPackageId",savePackageBaseType:"/admin/package/saveBaseType",getTeamList:"/admin/package/empoweredTenant",deleteAuthTeam:"/admin/package/deleteEmpoweredTenant",getNotAuthTeamData:"/admin/package/notEmpowerTenant",addAuthTeam:"/admin/package/saveEmpowerTenant",getFuncConfig:"/admin/package/listWithOperation",getHasFuncConfig:"/admin/package/listOperationByPackageId",saveFuncConfig:"/admin/package/savePackageNavigationOperations",getAllTeamList:"/admin/system/account/tenant/select/all/paging",getSystemUser:"/admin/system/account/paging",addSystemUser:"/admin/system/account/add",updateSystemUser:"/admin/system/account/update",getSysUserDetail:"/admin/system/account/info/id",updateName:"/admin/system/account/updateUsername/id",updateMobile:"/admin/system/account/updateMobile/id",updatePass:"/admin/system/account/updatePassword/id",lockSysUser:"/admin/system/account/changeLocked/id",ownSelectTeamList:"/admin/system/account/tenant/paging",ownUnSelectTeamList:"/admin/system/account/tenant/select/paging",deleteAccountTeam:"/admin/system/account/tenant/delete/id",addAccountTeam:"/admin/system/account/tenant/add",getAccountRoleList:"/admin/system/account/role/paging",getAccountUnSelectRole:"/admin/system/account/role/select/paging",deleteAccountRole:"/admin/system/account/role/delete/id",addAccountRole:"/admin/system/account/role/add",businessObjectDefinition:{baseAdd:"/admin/general/base/add",baseUpdate:"/admin/general/base/update",baseDelete:"/admin/general/base/delete",baseGetObjectBaseTypeTree:"/admin/general/base/getObjectBaseTypeTree",baseGet:"/admin/general/base/get",baseList:"/admin/general/base/list",typeDetailAdd:"/admin/general/typeDetail/add",typeDetailUpdate:"/admin/general/typeDetail/update",typeDetailDelete:"/admin/general/typeDetail/delete",typeDetailAttrPagingAttr:"/admin/general/typeDetail/attr/pagingAttr",typeDetailAttrTransferData:"/admin/general/typeDetail/attr/transferData",typeDetailAttrBind:"/admin/general/typeDetail/attr/bind",typeDetailAttrAddAttr:"/admin/general/typeDetail/attr/addAttr",typeDetailAttrUpAttrSort:"/admin/general/typeDetail/attr/upAttrSort",typeDetailAttrDownAttrSort:"/admin/general/typeDetail/attr/downAttrSort",typeDetailAttrDelete:"/admin/general/typeDetail/attr/delete",typeDetailAttrUpdate:"/admin/general/typeDetail/attr/update"},createGenerateCode:"/admin/openApp/authTenant/generateCode",getTenantInfo:"/admin/tenant/current/info",getTenantAdmins:"/admin/tenant/current/admins",getDictList:"/admin/dict/list"};t["a"]=n},"83a1":function(e,t){e.exports=Object.is||function(e,t){return e===t?0!==e||1/e===1/t:e!=e&&t!=t}},"8e6e":function(e,t,a){var n=a("5ca1"),i=a("990b"),r=a("6821"),s=a("11e9"),o=a("f1ae");n(n.S,"Object",{getOwnPropertyDescriptors:function(e){var t,a,n=r(e),l=s.f,d=i(n),c={},u=0;while(d.length>u)a=l(n,t=d[u++]),void 0!==a&&o(c,t,a);return c}})},"990b":function(e,t,a){var n=a("9093"),i=a("2621"),r=a("cb7c"),s=a("7726").Reflect;e.exports=s&&s.ownKeys||function(e){var t=n.f(r(e)),a=i.f;return a?t.concat(a(e)):t}},a50e:function(e,t,a){},b9dc:function(e,t,a){},bd86:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var n=a("85f2"),i=a.n(n);function r(e,t,a){return t in e?i()(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}},c69d:function(e,t,a){},cd1c:function(e,t,a){var n=a("e853");e.exports=function(e,t){return new(n(e))(t)}},e853:function(e,t,a){var n=a("d3f4"),i=a("1169"),r=a("2b4c")("species");e.exports=function(e){var t;return i(e)&&(t=e.constructor,"function"!=typeof t||t!==Array&&!i(t.prototype)||(t=void 0),n(t)&&(t=t[r],null===t&&(t=void 0))),void 0===t?Array:t}},e946:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"my-container"},[e.navVisible||e.dataVisible?e._e():a("div",[a("div",{staticClass:"header"},[a("div",{staticClass:"left"},[a("el-input",{staticClass:"input",attrs:{size:"small",placeholder:"名称",maxlength:100,clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.search(t)}},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}}),a("el-input",{staticClass:"input",attrs:{size:"small",placeholder:"编码",maxlength:100,clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.search(t)}},model:{value:e.code,callback:function(t){e.code=t},expression:"code"}}),a("q-search-button",{on:{click:e.search}},[e._v("查询")])],1),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.handleAdd}},[a("i",{staticClass:"font_family icon-xinzenglanse"}),e._v("\n        添加\n      ")])],1),a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"main-body"},[a("el-table",{ref:"multipleTable",staticStyle:{width:"100%","min-height":"calc(100vh - 296px)"},attrs:{data:e.tableData,"tooltip-effect":"dark"}},[a("el-table-column",{attrs:{align:"center",prop:"id",label:"序号",type:"index",width:"100",index:function(t){return(e.pagination.current-1)*e.pagination.size+t+1}}}),a("el-table-column",{attrs:{align:"center",prop:"name",label:"角色名称","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{align:"center",prop:"code",label:"编码","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{align:"center",prop:"roleType",label:"角色类型",formatter:function(e){return{GENERAL:"通用角色",NORMAL:"自定义角色"}[e.roleType]},"show-overflow-tooltip":""}}),a("el-table-column",{attrs:{align:"center",prop:"defaultRole",label:"默认角色",formatter:function(e){return e.defaultRole?"是":"否"},"show-overflow-tooltip":""}}),a("el-table-column",{attrs:{align:"center",prop:"remark",label:"描述","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{align:"center",label:"操作",width:"400"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"text",disabled:Boolean("GENERAL"===t.row.roleType)},on:{click:function(a){return e.handleEditRole(t.row)}}},[a("i",{staticClass:"font_family icon-bianji"}),e._v("\n              编辑\n            ")]),a("span",{staticClass:"divide"},[e._v("|")]),a("el-button",{attrs:{size:"mini",type:"text",disabled:Boolean("GENERAL"===t.row.roleType)},on:{click:function(a){return e.handleDelete(t.row)}}},[a("i",{staticClass:"font_family icon-shanchu"}),e._v("\n              删除\n            ")]),a("span",{staticClass:"divide"},[e._v("|")]),a("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(a){return e.handleEditNav(t.row)}}},[a("i",{staticClass:"font_family icon-chakan"}),e._v("\n              菜单权限\n            ")]),a("span",{staticClass:"divide"},[e._v("|")]),a("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(a){return e.handleEditData(t.row)}}},[a("i",{staticClass:"font_family icon-chakan"}),e._v("\n              数据权限\n            ")])]}}],null,!1,1105620099)})],1)],1),a("div",[a("q-pagination",{attrs:{"current-page":e.pagination.current,"page-size":e.pagination.size,"page-sizes":[10,20,50,100],layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"current-change":function(t){return e.handleCurrentChange(t)},"size-change":function(t){return e.handleSizeChange(t)},"update:currentPage":function(t){return e.$set(e.pagination,"current",t)},"update:current-page":function(t){return e.$set(e.pagination,"current",t)}}})],1)]),a("role-management-detail",{attrs:{value:e.roleVisible,data:e.roleItem},on:{"update:value":function(t){e.roleVisible=t},complete:e.handleHiddenRole}}),e.navVisible?a("role-management-nav",{attrs:{data:e.roleItem},on:{hidden:e.handleHiddenNav}}):e._e(),e.dataVisible?a("data-view",{attrs:{data:e.roleItem},on:{hidden:e.handleHiddenData}}):e._e()],1)},i=[],r=(a("8e6e"),a("ac6a"),a("456d"),a("386d"),a("7f7f"),a("bd86")),s=(a("96cf"),a("3b8d")),o=a("d225"),l=a("b0b4"),d=a("308d"),c=a("6bb5"),u=a("4e2b"),p=a("9ab4"),m=a("60a3"),f=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:(e.form.id?"编辑":"添加")+"角色","close-on-click-modal":!1,visible:e.addDialog,width:"600px"},on:{"update:visible":function(t){e.addDialog=t},close:e.handleBack}},[a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"form",attrs:{size:"small","label-width":"100px",model:e.form,rules:e.formRules}},[a("el-form-item",{attrs:{label:"角色名称：",prop:"name"}},[a("el-input",{attrs:{placeholder:"请输入",maxlength:100,clearable:""},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),a("el-form-item",{attrs:{label:"编码：",prop:"code"}},[a("el-input",{attrs:{placeholder:"包含字母、数字、横线、下划线和点,点不能作为开头,长度3-100位",maxlength:100,clearable:""},model:{value:e.form.code,callback:function(t){e.$set(e.form,"code",t)},expression:"form.code"}})],1),a("el-form-item",{attrs:{label:"默认角色：",prop:"defaultRole"}},[a("el-radio",{attrs:{placeholder:"请输入",label:!0},model:{value:e.form.defaultRole,callback:function(t){e.$set(e.form,"defaultRole",t)},expression:"form.defaultRole"}},[e._v("是")]),a("el-radio",{attrs:{placeholder:"请输入",label:!1},model:{value:e.form.defaultRole,callback:function(t){e.$set(e.form,"defaultRole",t)},expression:"form.defaultRole"}},[e._v("否")])],1),a("el-form-item",{attrs:{label:"描述：",prop:"remark"}},[a("el-input",{attrs:{autosize:{minRows:3,maxRows:5},maxlength:225,"show-word-limit":"",placeholder:"请输入",type:"textarea"},model:{value:e.form.remark,callback:function(t){e.$set(e.form,"remark",t)},expression:"form.remark"}})],1),a("div",{staticClass:"btn"},[a("el-button",{attrs:{size:"small"},on:{click:function(t){return e.handleBack(!1)}}},[e._v("取消")]),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.handleSave}},[e._v("确定")])],1)],1)],1)},h=[],g=a("80c8"),v=function(e){function t(){var e;return Object(o["a"])(this,t),e=Object(d["a"])(this,Object(c["a"])(t).apply(this,arguments)),e.addDialog=!1,e.form={},e.formRules={name:{required:!0,message:"该选项为必填项",trigger:"blur"},code:{required:!0,message:"该选项为必填项",trigger:"blur"},defaultRole:{required:!0,message:"该选项为必填项",trigger:"blur"}},e.loading=!1,e}return Object(u["a"])(t,e),Object(l["a"])(t,[{key:"newValue",value:function(e){var t=this;this.addDialog=e,e&&this.$nextTick((function(){var e=t.$refs.form;e.resetFields(),t.form=JSON.parse(JSON.stringify(t.data)),t.form.remark=t.data.remark?t.data.remark:""}))}},{key:"created",value:function(){}},{key:"handleSave",value:function(){var e=this,t=this.$refs.form;t.validate((function(t){t&&e.saveForm()}))}},{key:"saveForm",value:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var t,a,n,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.loading=!0,"string"===typeof this.form.remark&&(this.form.remark=this.form.remark.trim()),e.prev=2,e.next=5,this.$http.post(this.form.id?g["a"].updateRole:g["a"].addRole,this.form);case 5:t=e.sent,a=t.data,a.data,n=a.status,i=a.message,n?(this.$message.success(this.form.id?"修改成功":"添加成功"),this.handleBack(!0)):this.$message.error(i);case 11:return e.prev=11,this.loading=!1,e.finish(11);case 14:case"end":return e.stop()}}),e,this,[[2,,11,14]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"handleBack",value:function(e){this.addDialog=!1,this.$emit("complete",e)}}]),t}(m["e"]);p["__decorate"]([Object(m["d"])({type:Boolean,default:!1})],v.prototype,"value",void 0),p["__decorate"]([Object(m["d"])({type:Object,default:{}})],v.prototype,"data",void 0),p["__decorate"]([Object(m["f"])("value")],v.prototype,"newValue",null),v=p["__decorate"]([Object(m["a"])({})],v);var b=v,y=b,k=(a("75ac"),a("2877")),O=Object(k["a"])(y,f,h,!1,null,"9633556a",null),w=O.exports,T=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"sub-container"},[a("div",{staticClass:"header"},[e._v("角色名称："+e._s(e.data.name))]),a("div",{staticClass:"bottom"},[a("el-tree",{ref:"roleTree",attrs:{data:e.allOperationList,props:e.defaultProps,"default-checked-keys":e.navIdList,"node-key":"id","default-expand-all":"","show-checkbox":"","check-strictly":"","expand-on-click-node":!1,"render-content":e.renderContent},on:{"check-change":e.handleCheck}})],1),a("div",{staticClass:"btn"},[a("el-button",{attrs:{size:"small"},on:{click:e.handleBack}},[e._v("返回")]),a("el-button",{directives:[{name:"show",rawName:"v-show",value:!e.disabled,expression:"!disabled"}],attrs:{type:"primary",size:"small"},on:{click:e.handleSave}},[e._v(e._s(e.data?"保存":"添加")+" ")])],1)])},R=[],x=(a("7514"),function(e){function t(){var e;return Object(o["a"])(this,t),e=Object(d["a"])(this,Object(c["a"])(t).apply(this,arguments)),e.loading=!1,e.allOperationList=[],e.navIdList=[],e.roleOperationMap={},e.defaultProps={children:"children",label:"name"},e.styleScopedId="",e.treeIdMap={},e.disabled="GENERAL"===e.data.roleType,e}return Object(u["a"])(t,e),Object(l["a"])(t,[{key:"created",value:function(){this.matchOperation()}},{key:"mounted",value:function(){var e=this.$refs.roleTree;this.styleScopedId=Object.keys(e.$el.dataset).find((function(e){return"v-"===e.substring(0,2)}))}},{key:"matchOperation",value:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.loading=!0,e.prev=1,e.next=4,this.getAllOperationList();case 4:return e.next=6,this.getRoleOperationList();case 6:return e.prev=6,this.loading=!1,e.finish(6);case 9:case"end":return e.stop()}}),e,this,[[1,,6,9]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"getRoleOperationList",value:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var t,a,n,i,r,s=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$http.get(g["a"].getRoleOperationList+this.data.id);case 2:t=e.sent,a=t.data,n=a.data,i=a.status,r=a.message,i?(this.navIdList=n.navigationIds,this.roleOperationMap={},n.navigationOperationIds.forEach((function(e){s.roleOperationMap[e]=!0}))):this.$message.error(r);case 8:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"addDisalbeProp",value:function(e){var t=this;e.forEach((function(e){e.disabled=t.disabled,e.children&&e.children.length&&t.addDisalbeProp(e.children)}))}},{key:"getAllOperationList",value:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var t,a,n,i,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$http.get(g["a"].getAllOperationList);case 2:t=e.sent,a=t.data,n=a.data,i=a.status,r=a.message,i?(this.addDisalbeProp(n),this.allOperationList=n):this.$message.error(r);case 8:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"handleCheck",value:function(e,t){this.treeIdMap[e.id].forEach((function(e){e.checked=t}))}},{key:"renderContent",value:function(e,t){var a=this,n=t.node,i=t.data,r=(t.store,function(e){return a.styleScopedId&&(e.attrs=e.attrs||{},e.attrs["data-"+a.styleScopedId]=!0),e});return this.treeIdMap[i.id]||(this.treeIdMap[i.id]=i.oparations.map((function(e){return{id:e.id,checked:a.roleOperationMap[e.id]}}))),e("div",r({class:"tree-item"}),[i.name,e("div",r({class:"right"}),i.oparations.map((function(t,s){return e("div",r({class:"item",props:{key:s}}),[e("el-checkbox",{style:{marginRight:"8px"},props:{disabled:!n.checked||a.disabled,checked:a.treeIdMap[i.id][s].checked,value:a.treeIdMap[i.id][s].checked},on:{input:function(e){a.treeIdMap[i.id][s].checked=e}}}),t.operationName])})))])}},{key:"handleSave",value:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var t,a,n,i,r,s,o,l=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t={},a=this.$refs.roleTree,a.getCheckedNodes().forEach((function(e){t[e.id]=!0})),n=Object.keys(this.treeIdMap).filter((function(e){return t[e]})).map((function(e){return{navigationId:e,operationIds:l.treeIdMap[e].filter((function(e){return e.checked})).map((function(e){return e.id}))}})),this.loading=!0,e.prev=5,e.next=8,this.$http.post(g["a"].updateRoleNavOperation+this.data.id,n);case 8:i=e.sent,r=i.data,r.data,s=r.status,o=r.message,s?(this.$message.success("保存成功"),this.$emit("hidden")):this.$message.error(o);case 14:return e.prev=14,this.loading=!1,e.finish(14);case 17:case"end":return e.stop()}}),e,this,[[5,,14,17]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"handleBack",value:function(){this.$emit("hidden")}}]),t}(m["e"]));p["__decorate"]([Object(m["d"])({type:Object,required:!0})],x.prototype,"data",void 0),x=p["__decorate"]([Object(m["a"])({})],x);var A=x,D=A,j=(a("478f"),Object(k["a"])(D,T,R,!1,null,"40df8885",null)),_=j.exports,L=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"sub-container"},[a("div",{staticClass:"header"},[e._v("角色名称："+e._s(e.data.name))]),a("div",{staticClass:"bottom"},e._l(e.allOperationList,(function(t){return a("div",{key:t.dataResourceType,staticClass:"box"},[a("div",{staticClass:"name"},[e._v(e._s(t.desc))]),a("div",{staticClass:"children"},[a("el-radio-group",{attrs:{disabled:e.disabled},model:{value:t.checked,callback:function(a){e.$set(t,"checked",a)},expression:"item.checked"}},e._l(t.children,(function(t){return a("el-radio",{key:t.dataScopeEnum,attrs:{label:t.dataScopeEnum}},[e._v(e._s(t.desc))])})),1)],1)])})),0),a("div",{staticClass:"btn"},[a("el-button",{attrs:{size:"small"},on:{click:e.handleBack}},[e._v("返回")]),a("el-button",{directives:[{name:"show",rawName:"v-show",value:!e.disabled,expression:"!disabled"}],attrs:{type:"primary",size:"small"},on:{click:e.handleSave}},[e._v(e._s(e.data?"保存":"添加")+" ")])],1)])},S=[],I=function(e){function t(){var e;return Object(o["a"])(this,t),e=Object(d["a"])(this,Object(c["a"])(t).apply(this,arguments)),e.loading=!1,e.allOperationList=[],e.navIdList=[],e.roleOperationMap={},e.defaultProps={children:"children",label:"desc",id:"dataResourceType"},e.styleScopedId="",e.treeIdMap={},e.disabled="GENERAL"===e.data.roleType,e}return Object(u["a"])(t,e),Object(l["a"])(t,[{key:"created",value:function(){this.matchOperation()}},{key:"matchOperation",value:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.loading=!0,e.prev=1,e.next=4,this.getRoleOperationList();case 4:this.getAllOperationList();case 5:return e.prev=5,this.loading=!1,e.finish(5);case 8:case"end":return e.stop()}}),e,this,[[1,,5,8]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"getAllOperationList",value:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var t,a,n,i,r,s=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$http.get(g["a"].getAllDataList);case 2:t=e.sent,a=t.data,n=a.data,i=a.status,r=a.message,i?(n.dataResourceTypeVOS.forEach((function(e){e.children=JSON.parse(JSON.stringify(n.dataScopeEnumVOS)),s.roleOperationMap[e.dataResourceType]?e.checked=s.roleOperationMap[e.dataResourceType]:e.checked=""})),this.allOperationList=n.dataResourceTypeVOS):this.$message.error(r);case 8:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getRoleOperationList",value:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var t,a,n,i,r,s=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$http.get(g["a"].getSelectDataList+this.data.id);case 2:t=e.sent,a=t.data,n=a.data,i=a.status,r=a.message,i?(this.roleOperationMap={},n.forEach((function(e){s.roleOperationMap[e.dataResourceType]=e.dataScopeEnum}))):this.$message.error(r);case 8:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"handleSave",value:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var t,a,n,i,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=[],this.allOperationList.forEach((function(e){e.checked&&t.push({dataResourceType:e.dataResourceType,dataScopeEnum:e.checked})})),this.loading=!0,e.prev=3,e.next=6,this.$http.post(g["a"].updateDataView+this.data.id,t);case 6:a=e.sent,n=a.data,n.data,i=n.status,r=n.message,i?(this.$message.success("保存成功"),this.$emit("hidden")):this.$message.error(r);case 12:return e.prev=12,this.loading=!1,e.finish(12);case 15:case"end":return e.stop()}}),e,this,[[3,,12,15]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"handleBack",value:function(){this.$emit("hidden")}}]),t}(m["e"]);p["__decorate"]([Object(m["d"])({type:Object,required:!0})],I.prototype,"data",void 0),I=p["__decorate"]([Object(m["a"])({})],I);var C=I,P=C,$=(a("fff2"),Object(k["a"])(P,L,S,!1,null,"49684dd2",null)),M=$.exports;function B(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function E(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?B(Object(a),!0).forEach((function(t){Object(r["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):B(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var N=function(e){function t(){var e;return Object(o["a"])(this,t),e=Object(d["a"])(this,Object(c["a"])(t).apply(this,arguments)),e.loading=!1,e.tableData=[],e.name="",e.code="",e.pagination={current:1,size:10},e.total=0,e.roleVisible=!1,e.navVisible=!1,e.dataVisible=!1,e.roleItem={id:"",name:"",code:"",roleType:"NORMAL",defaultRole:!1,remark:""},e}return Object(u["a"])(t,e),Object(l["a"])(t,[{key:"created",value:function(){this.getTableData()}},{key:"search",value:function(){this.pagination.current=1,this.getTableData()}},{key:"getTableData",value:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var t,a,n,i,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.loading=!0,e.prev=1,e.next=4,this.$http.post(g["a"].getRoleList,E({},this.pagination,{query:{name:this.name,code:this.code}}));case 4:t=e.sent,a=t.data,n=a.data,i=a.status,r=a.message,i?(this.tableData=n.records,this.total=n.total):this.$message.error(r);case 10:return e.prev=10,this.loading=!1,e.finish(10);case 13:case"end":return e.stop()}}),e,this,[[1,,10,13]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"handleCurrentChange",value:function(e){this.pagination.current=e,this.getTableData()}},{key:"handleSizeChange",value:function(e){this.pagination.size=e,this.getTableData()}},{key:"handleAdd",value:function(){this.roleItem={id:"",name:"",code:"",roleType:"NORMAL",defaultRole:!1,remark:""},this.roleVisible=!0}},{key:"handleEditRole",value:function(e){this.roleItem=e,this.roleVisible=!0}},{key:"handleDelete",value:function(e){var t=this,a=this;this.$confirm("确认删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.$http.get(g["a"].deleteRole+"/"+e.id).then((function(e){e.status&&(e.data.status?(t.$message({type:"success",message:"删除成功!"}),a.getTableData()):a.$message({showClose:!0,message:e.data.message,type:"error"}))}))})).catch((function(){}))}},{key:"handleHiddenRole",value:function(e){this.roleVisible=!1,e&&this.search()}},{key:"handleEditNav",value:function(e){this.navVisible=!0,this.roleItem=e}},{key:"handleHiddenNav",value:function(){this.navVisible=!1,this.search()}},{key:"handleEditData",value:function(e){this.dataVisible=!0,this.roleItem=e}},{key:"handleHiddenData",value:function(){this.dataVisible=!1,this.search()}}]),t}(m["e"]);N=p["__decorate"]([Object(m["a"])({components:{RoleManagementDetail:w,RoleManagementNav:_,DataView:M}})],N);var z=N,V=z,F=(a("5279"),Object(k["a"])(V,n,i,!1,null,"350d2c20",null));t["default"]=F.exports},f1ae:function(e,t,a){"use strict";var n=a("86cc"),i=a("4630");e.exports=function(e,t,a){t in e?n.f(e,t,i(0,a)):e[t]=a}},fff2:function(e,t,a){"use strict";var n=a("a50e"),i=a.n(n);i.a}}]);
//# sourceMappingURL=chunk-44e337bc.fbfd0039.js.map