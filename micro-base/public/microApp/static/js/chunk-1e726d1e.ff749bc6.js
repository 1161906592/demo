(window["webpackJsonpmicro_name_"]=window["webpackJsonpmicro_name_"]||[]).push([["chunk-1e726d1e"],{"2a64":function(e,t,a){"use strict";var s=a("f036"),r=a.n(s);r.a},"3286f":function(e,t,a){"use strict";var s=a("573e"),r=a.n(s);r.a},"4f82":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("el-tabs",{attrs:{type:"card"},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"流程管理",name:"process"}},[a("process-list")],1),a("el-tab-pane",{attrs:{label:"分类管理",name:"group"}},[a("group-manage")],1)],1)],1)},r=[],n=a("d225"),i=a("308d"),o=a("6bb5"),c=a("4e2b"),l=a("9ab4"),p=a("60a3"),u=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"wrap"},[a("div",{staticClass:"header"},[a("div",{staticClass:"left"},[a("el-input",{staticStyle:{width:"240px"},attrs:{size:"small",placeholder:"流程名称"},model:{value:e.processName,callback:function(t){e.processName=t},expression:"processName"}}),a("el-select",{staticStyle:{width:"240px","margin-left":"20px"},attrs:{size:"small",placeholder:"请选择流程类型",clearable:""},on:{change:e.getTableData},model:{value:e.typeId,callback:function(t){e.typeId=t},expression:"typeId"}},e._l(e.typeOptions,(function(e,t){return a("el-option",{key:t,attrs:{label:e.procdefTypeName,value:e.id}})})),1),a("q-search-button",{staticStyle:{"margin-left":"10px"},on:{click:e.getTableData}})],1),a("div",{staticClass:"left"},[a("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-plus"},on:{click:e.handleNew}},[e._v("创建新流程")])],1)]),a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{"margin-top":"20px"}},[a("el-table",{ref:"multipleTable",staticStyle:{width:"100%","min-height":"calc(100vh - 366px)"},attrs:{data:e.tableData}},[a("el-table-column",{attrs:{align:"center",prop:"id",label:"序号",type:"index",index:e.indexCustom,width:"100"}}),a("el-table-column",{attrs:{prop:"procdefName",label:"流程名称","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"procdefKey",label:"流程标识","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"processStatus",label:"发布状态","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return["RELEASED"===t.row.processStatus?a("span",{staticStyle:{"background-color":"#1ebc3d",padding:"0.3em 0.7em 0.3em 0.7em","border-radius":"0.5em",color:"white"}},[e._v("已发布")]):"ERROR_STATUS"===t.row.processStatus?a("span",{staticStyle:{"background-color":"red",padding:"0.3em 0.7em 0.3em 0.7em","border-radius":"0.5em",color:"white"}},[e._v("错误状态")]):a("span",{staticStyle:{"background-color":"orange",padding:"0.3em 0.7em 0.3em 0.7em","border-radius":"0.5em",color:"white"}},[e._v("未发布")])]}}])}),a("el-table-column",{attrs:{label:"操作",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"text",icon:"el-icon-edit",title:"编辑"},on:{click:function(a){return e.handleEdit(t.row)}}},[e._v("\n            编辑\n          ")]),a("el-button",{attrs:{size:"mini",type:"text",icon:"el-icon-delete",title:"删除"},on:{click:function(a){return e.handleDelete(t.row)}}},[e._v("\n            删除\n          ")])]}}])})],1)],1),a("q-pagination",{attrs:{"current-page":e.pagination.current,"page-sizes":[10,20,50,100],"page-size":e.pagination.size,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"current-change":e.getTableData,"size-change":e.pageSizeChange,"update:currentPage":function(t){return e.$set(e.pagination,"current",t)},"update:current-page":function(t){return e.$set(e.pagination,"current",t)}}})],1)},d=[],g=(a("8e6e"),a("ac6a"),a("456d"),a("bd86")),m=(a("96cf"),a("3b8d")),f=a("b0b4"),h=a("e129");function b(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,s)}return a}function v(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?b(Object(a),!0).forEach((function(t){Object(g["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):b(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var y=function(e){function t(){var e;return Object(n["a"])(this,t),e=Object(i["a"])(this,Object(o["a"])(t).apply(this,arguments)),e.processName="",e.pagination={size:10,current:1},e.total=0,e.typeOptions=[],e.typeId="",e.tableData=[],e.loading=!1,e.indexCustom=0,e}return Object(c["a"])(t,e),Object(f["a"])(t,[{key:"mounted",value:function(){this.getAllProcessType(),this.getTableData()}},{key:"handleNew",value:function(){this.$router.push("/processNew")}},{key:"handleEdit",value:function(e){var t=this;console.log(e),"RELEASED"===e.processStatus?this.$confirm("确定要编辑流程？此操作会将流程置为未发布状态，是否继续？","确认",{confirmButtonText:"确定",cancelButtonText:"取消"}).then((function(){t.$http.get(h["a"].processManage.updateProcessStatus,{params:{procdefKey:e.procdefKey,status:0}}).then((function(e){e.data.status||t.$message.error(e.data.message)})),t.$router.push({path:"/processNew",query:{item:JSON.stringify(e)}})})):this.$router.push({path:"/processNew",query:{item:JSON.stringify(e)}})}},{key:"pageSizeChange",value:function(e){this.pagination.size=e,this.getTableData()}},{key:"getAllProcessType",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(){var t,a,s,r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.loading=!0,e.prev=1,e.next=4,this.$http.get(h["a"].processManage.getAllProcessType);case 4:t=e.sent,a=t.data,s=a.data,r=a.status,n=a.message,r?this.typeOptions=s:this.$message.error(n);case 10:return e.prev=10,this.loading=!1,e.finish(10);case 13:case"end":return e.stop()}}),e,this,[[1,,10,13]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"getTableData",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(){var t,a,s,r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.loading=!0,e.prev=1,e.next=4,this.$http.get(h["a"].processManage.getPageProcess,{params:v({processName:this.processName,typeId:this.typeId},this.pagination)});case 4:t=e.sent,a=t.data,s=a.data,r=a.status,n=a.message,r?(this.tableData=s.records,this.total=s.total,this.indexCustom=(s.current-1)*s.size+1):this.$message.error(n);case 10:return e.prev=10,this.loading=!1,e.finish(10);case 13:case"end":return e.stop()}}),e,this,[[1,,10,13]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"switchToProcessDetails",value:function(){}},{key:"handleDelete",value:function(e){var t=this;this.$confirm("是否删除流程相关数据？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(m["a"])(regeneratorRuntime.mark((function a(){var s,r,n,i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,t.$http.delete(h["a"].processManage.deleteProcdefInfo,{params:{id:e.id}});case 2:s=a.sent,r=s.data,r.data,n=r.status,i=r.message,n?(t.$message.success("删除成功"),t.getTableData()):t.$message.error(i);case 8:case"end":return a.stop()}}),a)}))))}}]),t}(p["e"]);l["__decorate"]([Object(p["b"])("switch")],y.prototype,"switchToProcessDetails",null),y=l["__decorate"]([Object(p["a"])({})],y);var w=y,P=w,D=(a("2a64"),a("2877")),T=Object(D["a"])(P,u,d,!1,null,"7000e6ee",null),O=T.exports,k=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"warp"},[a("div",{staticClass:"header"},[a("div",{staticClass:"left"}),a("div",{staticClass:"left"},[a("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-plus"},on:{click:e.handleAdd}},[e._v("添加")])],1)]),a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{"margin-top":"20px"}},[a("el-table",{ref:"multipleTable",staticStyle:{width:"100%","min-height":"calc(100vh - 366px)"},attrs:{data:e.tableData}},[a("el-table-column",{attrs:{align:"center",prop:"id",label:"序号",type:"index",index:e.indexCustom,width:"100"}}),a("el-table-column",{attrs:{prop:"id",label:"流程分类ID","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"procdefTypeName",label:"流程分类名称","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{label:"操作",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"text",icon:"el-icon-edit",title:"编辑"},on:{click:function(a){return e.handleEdit(t.row)}}},[e._v("\n            编辑\n          ")]),a("el-button",{attrs:{size:"mini",type:"text",icon:"el-icon-delete",title:"删除"},on:{click:function(a){return e.handleDelete(t.row)}}},[e._v("\n            删除\n          ")])]}}])})],1)],1),a("q-pagination",{attrs:{"current-page":e.pagination.current,"page-sizes":[10,20,50,100],"page-size":e.pagination.size,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"current-change":e.getTableData,"size-change":e.pageSizeChange,"update:currentPage":function(t){return e.$set(e.pagination,"current",t)},"update:current-page":function(t){return e.$set(e.pagination,"current",t)}}}),a("el-dialog",{attrs:{title:e.dialogTitle,visible:e.dialog,width:"420px","close-on-click-modal":!1},on:{"update:visible":function(t){e.dialog=t}}},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}]},[a("el-form",{ref:"form",staticStyle:{width:"100%"},attrs:{model:e.form,rules:e.formRules,"label-width":"121px",size:"small"}},[a("el-form-item",{attrs:{label:"流程分类名称：",prop:"procdefTypeName"}},[a("el-input",{attrs:{placeholder:"请输入流程分类名称"},model:{value:e.form.procdefTypeName,callback:function(t){e.$set(e.form,"procdefTypeName","string"===typeof t?t.trim():t)},expression:"form.procdefTypeName"}})],1)],1),a("div",{staticClass:"dialog-btn"},[a("el-button",{attrs:{size:"small"},on:{click:function(t){e.dialog=!1}}},[e._v("返回")]),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.handleSureSave}},[e._v("确定")])],1)],1)])],1)},x=[],j=function(e){function t(){var e;return Object(n["a"])(this,t),e=Object(i["a"])(this,Object(o["a"])(t).apply(this,arguments)),e.loading=!1,e.tableData=[],e.dialog=!1,e.dialogLoading=!1,e.dialogTitle="",e.form={},e.formRules={procdefTypeName:{required:!0,message:"该选项为必填项",trigger:"change"}},e.pagination={size:10,current:1,query:{}},e.total=0,e.indexCustom=0,e}return Object(c["a"])(t,e),Object(f["a"])(t,[{key:"created",value:function(){this.getTableData()}},{key:"pageSizeChange",value:function(e){this.pagination.size=e,this.getTableData().then()}},{key:"getTableData",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(){var t,a,s,r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.loading=!0,e.prev=1,e.next=4,this.$http.post(h["a"].processManage.getAllProcessTypePaging,this.pagination);case 4:t=e.sent,a=t.data,s=a.data,r=a.status,n=a.message,r?(console.table(s),this.tableData=s.records,this.total=s.total,this.indexCustom=(s.current-1)*s.size+1):this.$message.error(n);case 10:return e.prev=10,this.loading=!1,e.finish(10);case 13:case"end":return e.stop()}}),e,this,[[1,,10,13]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"handleAdd",value:function(){var e=this;this.dialog=!0,this.dialogTitle="添加流程分类",this.form={},this.$nextTick((function(){var t=e.$refs.form;t.clearValidate()}))}},{key:"handleEdit",value:function(e){var t=this;this.dialog=!0,this.dialogTitle="修改流程分类",this.form=JSON.parse(JSON.stringify(e)),this.$nextTick((function(){var e=t.$refs.form;e.clearValidate()}))}},{key:"handleSureSave",value:function(){var e=this,t=this.$refs.form;t.validate((function(t){t&&e.saveProcessType()}))}},{key:"saveProcessType",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(){var t,a,s,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.dialogLoading=!0,e.prev=1,e.next=4,this.$http.post(h["a"].processManage.addProcessType,this.form);case 4:t=e.sent,a=t.data,a.data,s=a.status,r=a.message,s?(this.$message.success(this.form.id?"修改成功":"添加成功"),this.getTableData(),this.dialog=!1):this.$message.error(r);case 10:return e.prev=10,this.dialogLoading=!1,e.finish(10);case 13:case"end":return e.stop()}}),e,this,[[1,,10,13]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"handleDelete",value:function(e){var t=this;this.$confirm("将要删除流程分类："+e.procdefTypeName+"，是否继续？","确认",{confirmButtonText:"确定",cancelButtonText:"取消"}).then((function(){t.deleteItem(e)}))}},{key:"deleteItem",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t){var a,s,r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$http.get(h["a"].processManage.deleteProcessType+t.id);case 2:a=e.sent,s=a.data,s.data,r=s.status,n=s.message,r?(this.$message.success("删除成功"),this.getTableData()):this.$message.error(n);case 8:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()}]),t}(p["e"]);j=l["__decorate"]([Object(p["a"])({})],j);var S=j,$=S,_=(a("a374"),Object(D["a"])($,k,x,!1,null,"91b7d424",null)),N=_.exports,z=function(e){function t(){var e;return Object(n["a"])(this,t),e=Object(i["a"])(this,Object(o["a"])(t).apply(this,arguments)),e.activeName="process",e}return Object(c["a"])(t,e),t}(p["e"]);z=l["__decorate"]([Object(p["a"])({components:{ProcessList:O,GroupManage:N}})],z);var R=z,A=R,F=(a("3286f"),Object(D["a"])(A,s,r,!1,null,"0750dd18",null));t["default"]=F.exports},"573e":function(e,t,a){},"93fc":function(e,t,a){},a374:function(e,t,a){"use strict";var s=a("93fc"),r=a.n(s);r.a},e129:function(e,t,a){"use strict";var s={formManage:{getFormList:"/admin/formdesigner/getFormList",delFormDefine:"/admin/formdesigner/delFormDefine",getEventType:"/api/eventType/getEventType",checkFormName:"/admin/formdesigner/checkFormName",updateFormDefine:"/admin/formdesigner/updateFormDefine",insertFormDefine:"/admin/formdesigner/insertFormDefine",getFormDefine:"/admin/formdesigner/getFormDefine"},processManage:{getAllProcessType:"/admin/processType/procdeftype/findAll",getAllProcessTypePaging:"/admin/processType/paging",getPageProcess:"/admin/processDesigner/manager/process/pagingProcessDefineInfo",deleteProcdefInfo:"/admin/processDesigner/manager/process/deleteProcdefInfo",addProcessType:"/admin/processType/procdeftype/insert",deleteProcessType:"/admin/processType/procdeftype/delete/",saveProcessFile:"/admin/processDesigner/manager/file/saveProcessFile",uploadProcessFile:"/admin/processDesigner/manager/file/uploadProcessFile",getAllProcess:"/admin/processDesigner/manager/process/getAllProcess",updateProcessType:"/admin/processDesigner/manager/process/updateProcessType",getProcdefById:"/admin/processDesigner/manager/process/getProcdefById",getAllOrg:"/admin/processDesigner/public/visible/getAllOrg",getAllRole:"/admin/processDesigner/public/visible/getAllRole",getAllUser:"/admin/processDesigner/public/visible/getAllUser",getProcessVisibleOrg:"/admin/processDesigner/manager/visible/getProcessVisibleOrg",getProcessVisibleRole:"/admin/processDesigner/manager/visible/getProcessVisibleRole",getProcessVisiblePerson:"/admin/processDesigner/manager/visible/getProcessVisiblePerson",saveProcessVisibleOrg:"/admin/processDesigner/manager/visible/saveProcessVisibleOrg",saveProcessVisibleRole:"/admin/processDesigner/manager/visible/saveProcessVisibleRole",saveProcessVisibleUser:"/admin/processDesigner/manager/visible/saveProcessVisibleUser",saveProcessForm:"/admin/processDesigner/manager/processForm/save",getAssignTaskList:"/admin/processDesigner/public/process/getAssignTaskList",saveUserTaskDesignator:"/admin/processDesigner/manager/process/saveUserTaskDesignator",getProcdefByKey:"/admin/processDesigner/public/processForm/getProcdefByKey",getProcessImage:"/admin/processDesigner/manager/file/getProcessImage",downloadProcessFile:"/admin/processDesigner/manager/file/downloadProcessFile",updateProcessStatus:"/admin/processDesigner/manager/process/updateProcessStatus",getAllProcessTypeWithDelete:"/admin/processType/procdeftype/findAllDelete/"}};t["a"]=s},f036:function(e,t,a){}}]);
//# sourceMappingURL=chunk-1e726d1e.ff749bc6.js.map