{"version":3,"sources":["webpack://micro_[name]/./src/microApps/organization/views/organizeTypeManage/OrganizationCustomProps.vue?2737","webpack://micro_[name]/./src/microApps/organization/views/organizeTypeManage/components/AddOrgProp.vue?e229","webpack://micro_[name]/./src/microApps/organization/views/organizeTypeManage/components/AddOrgProp.vue","webpack://micro_[name]/./src/microApps/organization/views/organizeTypeManage/components/AddOrgProp.vue?95b0","webpack://micro_[name]/./src/microApps/organization/views/organizeTypeManage/components/AddOrgProp.vue?bd71","webpack://micro_[name]/./src/microApps/organization/views/organizeTypeManage/OrganizationCustomProps.vue","webpack://micro_[name]/./src/microApps/organization/views/organizeTypeManage/OrganizationCustomProps.vue?0c71","webpack://micro_[name]/./src/microApps/organization/views/organizeTypeManage/OrganizationCustomProps.vue?2ef9","webpack://micro_[name]/./src/microApps/organization/views/organizeTypeManage/components/AddOrgProp.vue?e144","webpack://micro_[name]/./src/microApps/organization/views/organizeTypeManage/OrganizationCustomProps.vue?651e","webpack://micro_[name]/./src/microApps/organization/api/index.ts"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","staticStyle","attrs","basicForm","name","on","$event","openTypeTreeNodeForm","slot","model","value","treeMessage","callback","$$v","$set","expression","ref","data","defaultProps","filterNode","handleNodeClick","scopedSlots","_u","key","fn","node","style","width","treeLevel","label","_v","_s","remove","id","_e","dialogTitle","visibleDialog","formData","closeDialog","saveTypeAndAttr","staticRenderFns","addDialog","directives","rawName","addForm","formRules","noChecked","hasChecked","transferData","saveSensorAttribute","hasCustomRole","qTouch","getBaseTypeByCode","code","loading","required","trigger","message","selected","newValue","$nextTick","$refs","resetFields","JSON","parse","stringify","getTypeAndAttrs","$emit","rest","validate","valid","url","getTypeDetail","typeVO","Object","assign","$http","post","then","res","status","$message","success","error","catch","_this","get","result","forEach","item","push","attrName","type","String","default","Boolean","components","component","filterText","children","pagination","condition","currentPage","total","tableData","pageSize","mode","getTypeTreeData","val","tree","filter","indexOf","buttonName","parentId","$confirm","confirmButtonText","cancelButtonText","deleteType","showClose","getCustomAttributeList","filters","formatterAttrType","AddOrgProp","api","getBaseTypeList","findTypeTree","getTemplateByTypeDetaiId","getTreeData","getAttrList","saveOrUpdateTypeAndAttrs","saveCustomAttrItems","getOrgTreeData","getOrgInfo","addOrgBaseInfo","updateOrgBaseInfo","saveOrgAccess","delete","download","upload"],"mappings":"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","file":"static/js/chunk-47729500.088bd28e.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"main\"},[_c('q-left-right-layout',{staticStyle:{\"width\":\"100%\"},attrs:{\"left-title\":\"组织机构类型\",\"right-title\":\"\" + (_vm.basicForm.name ? _vm.basicForm.name : '类型') + '详情',\"btn-tip\":\"添加一级菜单\"},on:{\"click\":function($event){return _vm.openTypeTreeNodeForm('addTop', '')}}},[_c('div',{attrs:{\"slot\":\"left\"},slot:\"left\"},[_c('el-input',{staticClass:\"inpW\",attrs:{\"placeholder\":\"输入关键字进行过滤\",\"maxlength\":100,\"size\":\"small\"},model:{value:(_vm.treeMessage.filterText),callback:function ($$v) {_vm.$set(_vm.treeMessage, \"filterText\", $$v)},expression:\"treeMessage.filterText\"}}),_c('div',{staticClass:\"tree-body\"},[_c('el-tree',{ref:\"tree\",staticClass:\"filter-tree\",attrs:{\"data\":_vm.treeMessage.data,\"props\":_vm.treeMessage.defaultProps,\"node-key\":\"id\",\"default-expand-all\":\"\",\"highlight-current\":\"\",\"expand-on-click-node\":false,\"filter-node-method\":_vm.filterNode},on:{\"node-click\":_vm.handleNodeClick},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar node = ref.node;\nvar data = ref.data;\nreturn _c('span',{staticClass:\"custom-tree-node\"},[_c('span',{staticStyle:{\"display\":\"inline-block\",\"text-overflow\":\"ellipsis\",\"overflow\":\"hidden\",\"white-space\":\"nowrap\",\"word-break\":\"keep-all\"},style:({ width: 190 - (node.treeLevel - 1) * 18 + 'px' }),attrs:{\"title\":node.label}},[_vm._v(\"\\n              \"+_vm._s(node.label)+\"\\n            \")]),_c('span',[_c('el-button',{attrs:{\"type\":\"text\",\"size\":\"mini\",\"icon\":\"el-icon-plus\",\"title\":\"添加子节点\"},on:{\"click\":function($event){return _vm.openTypeTreeNodeForm('add', data)}}}),_c('el-button',{attrs:{\"type\":\"text\",\"size\":\"mini\",\"icon\":\"el-icon-edit\",\"title\":\"编辑节点\"},on:{\"click\":function($event){return _vm.openTypeTreeNodeForm('edit', data)}}}),_c('el-button',{attrs:{\"type\":\"text\",\"size\":\"mini\",\"icon\":\"el-icon-delete\",\"title\":\"删除节点\"},on:{\"click\":function($event){return _vm.remove(node, data)}}})],1)])}}])})],1)],1),_c('div',{staticClass:\"right-content\",attrs:{\"slot\":\"right\"},slot:\"right\"},[_c('div',{staticClass:\"basic-attribute\"},[_c('div',{staticClass:\"content-title\"},[_c('i',{staticClass:\"el-icon-menu icon-blue\"}),_vm._v(\"基础信息\")]),_c('div',{staticClass:\"basic-attribute-body\"},[_c('el-form',{ref:\"\",attrs:{\"label-width\":\"100px\",\"size\":\"mini\",\"status-icon\":\"\",\"model\":_vm.basicForm}},[_c('el-row',{attrs:{\"gutter\":20}},[_c('el-col',{attrs:{\"span\":12}},[_c('el-form-item',{attrs:{\"label\":\"名称：\",\"prop\":\"name\"}},[_c('el-input',{staticClass:\"el-input-refact\",attrs:{\"size\":\"small\",\"disabled\":\"\"},model:{value:(_vm.basicForm.name),callback:function ($$v) {_vm.$set(_vm.basicForm, \"name\", $$v)},expression:\"basicForm.name\"}})],1)],1),_c('el-col',{attrs:{\"span\":12}},[_c('el-form-item',{attrs:{\"label\":\"父节点名称：\"}},[_c('el-input',{staticClass:\"el-input-refact\",attrs:{\"size\":\"small\",\"disabled\":\"\"},model:{value:(_vm.basicForm.parentName),callback:function ($$v) {_vm.$set(_vm.basicForm, \"parentName\", $$v)},expression:\"basicForm.parentName\"}})],1)],1),_c('el-col',{attrs:{\"span\":12}},[_c('el-form-item',{attrs:{\"label\":\"编号：\",\"prop\":\"code\"}},[_c('el-input',{staticClass:\"el-input-refact\",attrs:{\"size\":\"small\",\"disabled\":\"\"},model:{value:(_vm.basicForm.code),callback:function ($$v) {_vm.$set(_vm.basicForm, \"code\", $$v)},expression:\"basicForm.code\"}})],1)],1)],1)],1)],1),_c('el-divider')],1),(_vm.hasCustomRole)?_c('div',{staticClass:\"basic-attribute\"},[_c('div',{staticClass:\"content-title\"},[_c('i',{staticClass:\"el-icon-menu icon-blue\"}),_vm._v(\"自定义信息\")]),_c('base-data-info-table',{ref:\"baseDataInfoTable\",attrs:{\"id\":_vm.basicForm.id,\"active\":\"/admin/typeDetail/attr/pagingAttr/organization/\"}})],1):_vm._e()])]),_c('add-org-prop',{attrs:{\"dialogTitle\":_vm.dialogTitle,\"dialogVisible\":_vm.visibleDialog,\"data\":_vm.formData},on:{\"close\":_vm.closeDialog,\"submit\":_vm.saveTypeAndAttr}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('el-dialog',{attrs:{\"title\":_vm.dialogTitle,\"visible\":_vm.addDialog,\"close-on-click-modal\":false,\"width\":\"600px\"},on:{\"update:visible\":function($event){_vm.addDialog=$event},\"close\":_vm.closeDialog}},[_c('el-form',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}],ref:\"addForm\",attrs:{\"size\":\"small\",\"label-width\":\"100px\",\"model\":_vm.addForm,\"rules\":_vm.formRules}},[_c('el-form-item',{attrs:{\"label\":\"类型名称：\",\"prop\":\"name\"}},[_c('el-input',{attrs:{\"maxlength\":100,\"placeholder\":\"请输入\",\"clearable\":\"\"},model:{value:(_vm.addForm.name),callback:function ($$v) {_vm.$set(_vm.addForm, \"name\", $$v)},expression:\"addForm.name\"}})],1),_c('el-form-item',{attrs:{\"label\":\"类型编码：\",\"prop\":\"code\"}},[_c('el-input',{attrs:{\"maxlength\":100,\"placeholder\":\"包含字母、数字、横线、下划线和点,点不能作为开头,长度3-100位\",\"clearable\":\"\"},model:{value:(_vm.addForm.code),callback:function ($$v) {_vm.$set(_vm.addForm, \"code\", $$v)},expression:\"addForm.code\"}})],1),_c('div',{staticStyle:{\"margin-left\":\"20px\"}},[(_vm.hasCustomRole)?_c('el-transfer',{attrs:{\"filterable\":\"\",\"titles\":['未选择', '已选择'],\"button-texts\":['解绑', '绑定'],\"format\":{ noChecked: '${total}', hasChecked: '${checked}/${total}' },\"data\":_vm.transferData.data},model:{value:(_vm.transferData.selected),callback:function ($$v) {_vm.$set(_vm.transferData, \"selected\", $$v)},expression:\"transferData.selected\"}}):_vm._e()],1),_c('div',{staticClass:\"dialog-footer\"},[_c('el-button',{attrs:{\"size\":\"small\"},on:{\"click\":_vm.closeDialog}},[_vm._v(\"取消\")]),_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"small\"},on:{\"click\":function($event){return _vm.saveSensorAttribute()}}},[_vm._v(\"确定\")])],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\n/**\r\n *\r\n * @author fqq\r\n */\r\nimport { Vue, Component, Prop, Model, Watch } from \"vue-property-decorator\";\r\n\r\nimport Url from \"../../../api\";\r\n\r\n@Component({\r\n  components: {}\r\n})\r\nexport default class AddOrgProp extends Vue {\r\n  @Prop({ type: String, default: \"添加组织机构类型\" })\r\n  dialogTitle?: string;\r\n\r\n  @Prop({ type: Boolean, default: false })\r\n  dialogVisible!: boolean;\r\n\r\n  @Prop({ type: Object, default: () => ({}) })\r\n  data!: any;\r\n\r\n  hasCustomRole: boolean = qTouch.getBaseTypeByCode(\"organization\");\r\n\r\n  @Watch(\"dialogVisible\")\r\n  handleVisible(newValue: boolean) {\r\n    this.addDialog = newValue;\r\n    if (newValue) {\r\n      this.$nextTick(() => {\r\n        let ref: any = this.$refs.addForm;\r\n        ref.resetFields();\r\n        this.addForm = JSON.parse(JSON.stringify(this.data));\r\n        this.getTypeAndAttrs();\r\n      });\r\n    }\r\n  }\r\n\r\n  addDialog = false;\r\n  addForm: any = {\r\n    id: \"\",\r\n    name: \"\",\r\n    code: \"\"\r\n  };\r\n  loading = false;\r\n  formRules: any = {\r\n    name: { required: true, trigger: \"blur\", message: \"请输入名称\" },\r\n    code: { required: true, trigger: \"blur\", message: \"请输入编码\" }\r\n  };\r\n  transferData: any = {\r\n    data: [],\r\n    selected: []\r\n  };\r\n\r\n  closeDialog() {\r\n    this.addDialog = false;\r\n    this.$emit(\"close\");\r\n  }\r\n\r\n  saveSensorAttribute() {\r\n    let rest: any = this.$refs.addForm;\r\n    rest.validate((valid: any) => {\r\n      if (valid) {\r\n        this.loading = true;\r\n        let url = this.addForm.id ? Url.getTypeDetail + \"/updateTypeAndAttrs/organization\" : Url.getTypeDetail + \"/addTypeAndAttrs/organization\";\r\n        let typeVO = Object.assign(this.addForm, { attrs: this.transferData.selected });\r\n        this.$http\r\n          .post(url, typeVO)\r\n          .then((res: any) => {\r\n            this.loading = false;\r\n            if (res.data.status) {\r\n              this.$message.success(\"操作成功\");\r\n              this.addDialog = false;\r\n              this.$emit(\"submit\", res.data.data);\r\n            } else {\r\n              this.$message.error(res.data.message);\r\n            }\r\n          })\r\n          .catch(() => {\r\n            this.loading = false;\r\n          });\r\n      } else {\r\n        return false;\r\n      }\r\n    });\r\n  }\r\n\r\n  // 获取组织机构和自定义属性，用于transfer\r\n  getTypeAndAttrs() {\r\n    let _this = this;\r\n    this.$http.get(Url.getTypeDetail + \"/attr/transferData/organization?typeDetailId=\" + this.addForm.id).then((res: any) => {\r\n      if (res.status) {\r\n        if (res.data.status) {\r\n          let result = res.data.data;\r\n          _this.transferData.data = [];\r\n          result.data.forEach(function(item: any) {\r\n            _this.transferData.data.push({\r\n              key: item.id,\r\n              label: item.attrName\r\n            });\r\n          });\r\n          _this.transferData.selected = result.selected;\r\n        } else {\r\n          this.$message.error(res.data.message);\r\n        }\r\n      }\r\n    });\r\n  }\r\n}\r\n","import mod from \"-!../../../../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../../node_modules/babel-loader/lib/index.js!../../../../../../node_modules/ts-loader/index.js??ref--14-3!../../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AddOrgProp.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../../node_modules/babel-loader/lib/index.js!../../../../../../node_modules/ts-loader/index.js??ref--14-3!../../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AddOrgProp.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./AddOrgProp.vue?vue&type=template&id=2a951a48&scoped=true&\"\nimport script from \"./AddOrgProp.vue?vue&type=script&lang=ts&\"\nexport * from \"./AddOrgProp.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./AddOrgProp.vue?vue&type=style&index=0&id=2a951a48&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"2a951a48\",\n  null\n  \n)\n\nexport default component.exports","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\nimport { Vue, Component, Watch, Prop } from \"vue-property-decorator\";\r\nimport AddOrgProp from \"./components/AddOrgProp.vue\";\r\n\r\nimport Url from \"../../api\";\r\nimport { formatterAttrType } from \"@/utils/dataFormat\";\r\n\r\n@Component({\r\n  // 过滤器\r\n  filters: {\r\n    formatterAttrType\r\n  },\r\n  components: {\r\n    AddOrgProp\r\n  }\r\n})\r\nexport default class OrganizationCustomProps extends Vue {\r\n  // 类型树信息\r\n  treeMessage: any = {\r\n    // 过滤条件\r\n    filterText: \"\",\r\n    // tree数据\r\n    data: [],\r\n    // 配置选项\r\n    defaultProps: {\r\n      children: \"children\",\r\n      label: \"name\"\r\n    }\r\n  };\r\n  // 选中表单信息\r\n  basicForm: any = {\r\n    name: \"\"\r\n  };\r\n\r\n  // 分页信息\r\n  pagination: any = {\r\n    condition: \"\",\r\n    currentPage: 1,\r\n    total: 0,\r\n    tableData: [],\r\n    pageSize: 10\r\n  };\r\n\r\n  // 添加或编辑树节点弹窗\r\n  dialogTitle = \"\";\r\n  visibleDialog: boolean = false;\r\n  // 弹窗表单信息\r\n  formData: any = {\r\n    id: \"\",\r\n    name: \"\",\r\n    code: \"\"\r\n  };\r\n  mode: string = \"add\";\r\n\r\n  hasCustomRole: boolean = qTouch.getBaseTypeByCode(\"organization\");\r\n\r\n  created() {\r\n    this.getTypeTreeData();\r\n  }\r\n\r\n  // 根据父组件参数获取类型树数据\r\n  getTypeTreeData() {\r\n    this.$http.get(Url.getTypeDetail + \"/findTypeTree/organization\").then((res: any) => {\r\n      if (res.status) {\r\n        if (res.data.status) {\r\n          let data = res.data.data;\r\n          this.treeMessage.data = data ? data : [];\r\n          if (!this.basicForm.id) {\r\n            this.handleNodeClick(this.treeMessage.data[0]);\r\n          }\r\n        } else {\r\n          this.$message.error(res.data.message);\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  // 树节点点击事件\r\n  handleNodeClick(data: any) {\r\n    this.basicForm = Object.assign({}, data);\r\n  }\r\n\r\n  // 监听是否tree过滤条件\r\n  @Watch(\"treeMessage.filterText\")\r\n  setFilterText(val: any) {\r\n    (this.$refs.tree as any).filter(val);\r\n  }\r\n\r\n  // 过滤tree\r\n  filterNode(value: any, data: any) {\r\n    if (!value) return true;\r\n    return data[this.treeMessage.defaultProps.label].indexOf(value) !== -1;\r\n  }\r\n\r\n  // 打开节点弹窗\r\n  openTypeTreeNodeForm(buttonName: any, data: any) {\r\n    switch (buttonName) {\r\n      case \"add\":\r\n        this.dialogTitle = \"添加组织机构类型\";\r\n        this.formData = {\r\n          parentId: data.id,\r\n          treeLevel: data.treeLevel + 1\r\n        };\r\n        break;\r\n      case \"edit\":\r\n        this.dialogTitle = \"编辑组织机构类型\";\r\n        this.formData = Object.assign({}, data);\r\n        break;\r\n      case \"addTop\":\r\n        this.dialogTitle = \"添加组织机构类型\";\r\n        this.formData = { treeLevel: 1 };\r\n        break;\r\n    }\r\n    this.mode = buttonName;\r\n    this.visibleDialog = true;\r\n  }\r\n\r\n  // 删除节点\r\n  remove(node: any, data: any) {\r\n    this.$confirm(\"删除该类型将会删除其所有子类型及下属数据，是否删除？\", \"提示\", {\r\n      confirmButtonText: \"确定\",\r\n      cancelButtonText: \"取消\",\r\n      type: \"warning\"\r\n    }).then(() => {\r\n      this.$http.get(Url.deleteType + \"/\" + data.id).then((res: any) => {\r\n        if (res.status) {\r\n          if (res.data.status) {\r\n            this.$message.success(\"操作成功\");\r\n            if (data.id === this.basicForm.id) {\r\n              this.basicForm.id = null;\r\n            }\r\n            this.getTypeTreeData();\r\n          } else {\r\n            this.$message({\r\n              showClose: true,\r\n              message: res.data.message,\r\n              type: \"error\"\r\n            });\r\n          }\r\n        }\r\n      });\r\n    });\r\n  }\r\n\r\n  // 保存树节点\r\n  saveTypeAndAttr(data: any) {\r\n    this.visibleDialog = false;\r\n    this.basicForm = Object.assign({}, data);\r\n    this.getTypeTreeData();\r\n    if (this.mode === \"edit\") {\r\n      // this.getCustomAttributeList();\r\n      (this.$refs[\"baseDataInfoTable\"] as any).getCustomAttributeList();\r\n    }\r\n  }\r\n\r\n  closeDialog() {\r\n    this.visibleDialog = false;\r\n  }\r\n}\r\n","import mod from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/ts-loader/index.js??ref--14-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./OrganizationCustomProps.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/ts-loader/index.js??ref--14-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./OrganizationCustomProps.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./OrganizationCustomProps.vue?vue&type=template&id=114fcd73&scoped=true&\"\nimport script from \"./OrganizationCustomProps.vue?vue&type=script&lang=ts&\"\nexport * from \"./OrganizationCustomProps.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./OrganizationCustomProps.vue?vue&type=style&index=0&id=114fcd73&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"114fcd73\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AddOrgProp.vue?vue&type=style&index=0&id=2a951a48&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AddOrgProp.vue?vue&type=style&index=0&id=2a951a48&lang=scss&scoped=true&\"","import mod from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./OrganizationCustomProps.vue?vue&type=style&index=0&id=114fcd73&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./OrganizationCustomProps.vue?vue&type=style&index=0&id=114fcd73&lang=scss&scoped=true&\"","const api = {\r\n  getBaseTypeList: \"/admin/baseType/list\",\r\n  getTypeDetail: \"/admin/typeDetail\", //六种类型树基础接口\r\n  findTypeTree: \"/admin/typeDetail/findTypeTree\", //获取类型树\r\n  getTemplateByTypeDetaiId: \"/admin/typeDetail/getTemplateByTypeDetaiId\", //获取自定义属性信息\r\n\r\n  getTreeData: \"/admin/typeDetail/findTypeTree/organization\", //组织机构类型树\r\n  getAttrList: \"/admin/typeDetail/attr/pagingAttr/organization\", //获取自定义属性列表\r\n  getTypeAndAttrs: \"/admin/typeDetail/attr/transferData/organization\", //获取组织机构类型及自定义属性\r\n  saveOrUpdateTypeAndAttrs: \"/admin/typeDetail/saveOrUpdateTypeAndAttrs/organization\", //保存组织机构类型和自定义属性\r\n  saveCustomAttrItems: \"/admin/typeDetail/saveCustomAttrItems\", //保存选项配置\r\n  deleteType: \"/admin/typeDetail/delete\",\r\n  //组织机构信息\r\n  getOrgTreeData: \"/admin/organization/orgTree\", //组织机构树\r\n  getOrgInfo: \"/admin/organization/getOrgDetailById\", //组织机构信息\r\n  addOrgBaseInfo: \"/admin/organization/add\", //保存组织机构基础信息\r\n  updateOrgBaseInfo: \"/admin/organization/update\", //保存组织机构基础信息\r\n  saveOrgAccess: \"/admin/organization/saveOrgAccess\", //保存数据权限\r\n  delete: \"/admin/organization/delete\", // 删除组织机构\r\n\r\n  //excel导入\r\n  download: \"/api/excel/download/orgTemplate\",\r\n  upload: \"/api/excel/upload/orgTemplate\"\r\n};\r\nexport default api;\r\n"],"sourceRoot":""}