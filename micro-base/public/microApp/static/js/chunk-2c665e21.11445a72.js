(window["webpackJsonpmicro_name_"]=window["webpackJsonpmicro_name_"]||[]).push([["chunk-2c665e21"],{"02e5":function(e,t,a){"use strict";var s=a("5fc7"),o=a.n(s);o.a},"0797":function(e,t,a){"use strict";var s={getCodesListByCatalog:"/admin/code/info/list/catalog/",getInspectQRCodes:"/admin/catalog/tree",getSensorsListByPart:"/api/partsSensorRelation/getSensorIds",getSensorInfoById:"/api/sensor/getSensorById",getPartsList:"/admin/parts/getList",getCodeById:"/api/sensor/getSensorById",updateCode:"/api/sensor/getSensorById",saveCode:"/api/sensor/getSensorById",deleteCode:"/api/sensor/getSensorById",addTemplateNode:"/api/sensor/getSensorById",previewCode:"/api/sensor/getSensorById",deleteTemplate:"/api/sensor/getSensorById",getPlansListByCatalog:"/api/sensor/getSensorById",getInspectPlans:"/api/sensor/getSensorById",catalog:{add:"/admin/catalog/add",update:"/admin/catalog/update",delete:"/admin/catalog/delete/",tree:"/admin/catalog/tree",typeTree:"/admin/catalog/tree/"},qrCode:{listById:"/admin/code/info/list/catalog/",save:"/admin/code/info/save",update:"/admin/code/info/update",delete:"/admin/code/info/delete/",preview:"/admin/code/info/preview/",detail:"/admin/code/info/detail/",isBinded:"/admin/code/info/verify/device/"},template:{list:"/admin/inspect/template/list/catalog/",listForOrg:"/admin/inspect/template/getInspectTemplateByOrgId",detail:"/admin/inspect/template/get/",save:"/admin/inspect/template/saveTemplate",delete:"/admin/inspect/template/"},personGroup:{group:{add:"/admin/person/group/add",all:"/admin/person/group/all",list:"/admin/person/group/list",delete:"/admin/person/group/delete/",update:"/admin/person/group/update"},person:{list:"/admin/inspect/person/list/",add:"/admin/inspect/person/add",update:"/admin/inspect/person/put",delete:"/admin/inspect/person/delete/"}},record:{list:"/admin/inspect/record/pagination",save:"/admin/inspect/record/save"},other:{getAllUserList:"/admin/getUserList",getAllUser:"/admin/processDesigner/public/visible/getAllUser",getAllEventType:"/admin/event/type/tree"}};t["a"]=s},3008:function(e,t,a){},"31f9":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("person-group",{attrs:{selected:e.selectedMulty,mode:"manage"}})],1)},o=[],r=a("d225"),n=a("308d"),i=a("6bb5"),l=a("4e2b"),d=a("9ab4"),p=a("60a3"),u=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"main-form"},[a("el-card",{staticStyle:{height:"100%"},attrs:{shadow:"never"}},[a("div",{attrs:{slot:"header"},slot:"header"},[a("i",{staticClass:"el-icon-info"}),e._v("\n      成员组列表\n      "),e.buttonsVisible?a("el-button",{staticStyle:{float:"right","margin-top":"-6px"},attrs:{size:"small"},on:{click:function(t){return e.editOrAdd("new",{})}}},[e._v("创建人员组")]):e._e(),e.buttonsVisible?e._e():a("el-button",{staticStyle:{float:"right","margin-top":"-6px"},attrs:{size:"small"},on:{click:e.getPersonGroup}},[e._v("确认选择")])],1),a("el-table",{ref:"personGroupRef",staticStyle:{height:"calc(100% - 34px)"},attrs:{data:e.personGroupList},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),a("el-table-column",{attrs:{label:"人员组名称",prop:"groupName","header-align":"center",width:"200"}}),a("el-table-column",{attrs:{label:"组内成员",prop:"personNames","header-align":"center"}}),e.buttonsVisible?a("el-table-column",{attrs:{label:"操作",align:"center","header-align":"center",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"medium",type:"text",icon:"el-icon-edit"},on:{click:function(a){return e.editOrAdd("edit",t.row)}}}),a("el-button",{attrs:{size:"medium",type:"text",icon:"el-icon-delete"},on:{click:function(a){return e.deletePersonGroup(t.row)}}})]}}],null,!1,4173391154)}):e._e()],1),a("q-pagination",{attrs:{"current-page":e.searchDTO.page,"page-size":e.searchDTO.rows,total:e.searchDTO.total},on:{"update:currentPage":function(t){return e.$set(e.searchDTO,"page",t)},"update:current-page":function(t){return e.$set(e.searchDTO,"page",t)}}})],1),a("el-dialog",{attrs:{title:"成员组设置",visible:e.showEditDialog,"close-on-click-modal":!1},on:{"update:visible":function(t){e.showEditDialog=t}}},[a("el-form",{model:{value:e.groupForm,callback:function(t){e.groupForm=t},expression:"groupForm"}},[a("el-row",[a("el-form-item",{attrs:{label:"成员组名称","label-width":"120px",prop:"personGroupName"}},[a("el-input",{staticStyle:{width:"30%"},attrs:{size:"small"},model:{value:e.groupForm.groupName,callback:function(t){e.$set(e.groupForm,"groupName",t)},expression:"groupForm.groupName"}})],1)],1),a("el-row",[a("el-form-item",{attrs:{label:"成员组名称","label-width":"120px",prop:"persons"}},[a("el-transfer",{attrs:{data:e.personTransferData,titles:["所有成员","组内成员"],props:e.personTransferProps},on:{change:e.handleChange},model:{value:e.groupForm.personIds,callback:function(t){e.$set(e.groupForm,"personIds",t)},expression:"groupForm.personIds"}})],1)],1),a("el-row",{staticStyle:{"text-align":"right"}},[a("el-button",{attrs:{size:"small"},on:{click:function(t){return e.savePersonGroup()}}},[e._v("保存")])],1)],1)],1)],1)},c=[],g=(a("ac6a"),a("b0b4")),m=a("0797"),h=function(e){function t(){var e;return Object(r["a"])(this,t),e=Object(n["a"])(this,Object(i["a"])(t).apply(this,arguments)),e.personGroupList=[],e.multipleSelection=[],e.searchDTO={page:1,rows:10,total:0},e.personTransferData=[],e.personTransferProps={key:"userId",label:"userName"},e.groupForm={id:"",personIds:[],groupName:""},e.editMode="",e.showEditDialog=!1,e.buttonsVisible=!1,e}return Object(l["a"])(t,e),Object(g["a"])(t,[{key:"getPersonGroupList",value:function(){var e=this;this.$http.get(m["a"].personGroup.group.list).then((function(t){t.data.status?(e.personGroupList=t.data.data,e.searchDTO.total=t.data.data.length):e.$message.error(t.data.message)}))}},{key:"handleSelectionChange",value:function(e){this.multipleSelection=e}},{key:"getPersonGroup",value:function(){this.multipleSelection.length>0?this.$emit("personGroup",this.multipleSelection):this.$message.warning("请选择人员组")}},{key:"editOrAdd",value:function(e,t){var a=this;this.showEditDialog=!0,this.editMode=e,"edit"===e?(this.groupForm.id=t.id,this.groupForm.groupName=t.groupName,this.groupForm.personIds=[],t.persons.forEach((function(e){a.groupForm.personIds.push(e.id)}))):(this.groupForm.id="",this.groupForm.groupName=""),this.$http.get(m["a"].other.getAllUser,{params:{size:1e3,current:1}}).then((function(e){e.data.status?a.personTransferData=e.data.data:a.$message.error(e.data.message)}))}},{key:"handleChange",value:function(e){this.groupForm.personIds=e}},{key:"savePersonGroup",value:function(){var e=this;"edit"===this.editMode?this.$http.post(m["a"].personGroup.group.update,this.groupForm).then((function(t){t.data.status?(e.$message.success("修改成功！"),e.getPersonGroupList(),e.showEditDialog=!1):e.$message.error(t.data.message)})):this.$http.post(m["a"].personGroup.group.add,this.groupForm).then((function(t){t.data.status?(e.showEditDialog=!1,e.$message.success("保存成功！"),e.getPersonGroupList()):e.$message.error(t.data.message)}))}},{key:"deletePersonGroup",value:function(e){var t=this;this.$http.get(m["a"].personGroup.group.delete+e.id).then((function(e){e.data.status?(t.$message.success("删除成功"),t.getPersonGroupList()):t.$message.error(e.data.message)}))}},{key:"getSelections",value:function(){var e=this,t=this.$refs.personGroupRef;setTimeout((function(){e.selected.forEach((function(a){e.personGroupList.forEach((function(s){s.id===a&&(e.multipleSelection.push(s),t.toggleRowSelection(s,!0))}))}))}),150)}},{key:"created",value:function(){this.buttonsVisible="manage"===this.mode,this.getPersonGroupList()}},{key:"mounted",value:function(){this.getSelections()}}]),t}(p["e"]);d["__decorate"]([Object(p["d"])({type:Array,default:function(){return[]},required:!0})],h.prototype,"selected",void 0),d["__decorate"]([Object(p["d"])({type:String,default:"manage",required:!0})],h.prototype,"mode",void 0),h=d["__decorate"]([p["a"]],h);var f=h,v=f,b=(a("02e5"),a("ffe0"),a("2877")),y=Object(b["a"])(v,u,c,!1,null,"41714496",null),w=y.exports,S=function(e){function t(){var e;return Object(r["a"])(this,t),e=Object(n["a"])(this,Object(i["a"])(t).apply(this,arguments)),e.selectedMulty=[],e}return Object(l["a"])(t,e),t}(p["e"]);S=d["__decorate"]([Object(p["a"])({components:{PersonGroup:w}})],S);var I=S,O=I,G=(a("8201"),Object(b["a"])(O,s,o,!1,null,"5064d250",null));t["default"]=G.exports},"443f":function(e,t,a){},"5fc7":function(e,t,a){},8201:function(e,t,a){"use strict";var s=a("3008"),o=a.n(s);o.a},ffe0:function(e,t,a){"use strict";var s=a("443f"),o=a.n(s);o.a}}]);
//# sourceMappingURL=chunk-2c665e21.11445a72.js.map