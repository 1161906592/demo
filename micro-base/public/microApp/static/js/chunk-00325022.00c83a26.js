(window["webpackJsonpmicro_name_"]=window["webpackJsonpmicro_name_"]||[]).push([["chunk-00325022"],{"18e0":function(e,t,i){},"3cc0":function(e,t,i){"use strict";var n={getEventTypeTree:"/admin/event/type/tree",addEventType:"/admin/event/type/add",updateEventType:"/admin/event/type/update",deleteEventType:"/admin/event/type/delete",getFormList:"/admin/formdesigner/getFormList",addEventDefinition:"/admin/event/definition/add",updateEventDefinition:"/admin/event/definition/update",deleteEventDefinition:"/admin/event/definition/delete",getEventDefinition:"/admin/event/definition/paging",getEventRecord:"/admin/event/record/paging",getDeviceType:"/admin/typeDetail/findTypeTree/device",getFormListWithDeleted:"/admin/formdesigner/getFormListDelete/",addEventTemplate:"/admin/event/template/add",updateEventTemplate:"/admin/event/template/update",getEventTemplate:"/admin/event/template/paging",deleteEventTemplate:"/admin/event/template/delete/",getAllProcessByUserVisible:"/admin/processDesigner/public/visible/getAllProcessByUserVisible",getTemplateById:"/admin/event/template/getById",getOrgTreeData:"admin/organization/orgTree",getProcessImg:"/admin/processInstance/getProcessImg"};t["a"]=n},"7f7f":function(e,t,i){var n=i("86cc").f,o=Function.prototype,a=/^\s*function ([^ (]*)/,s="name";s in o||i("9e1e")&&n(o,s,{configurable:!0,get:function(){try{return(""+this).match(a)[1]}catch(e){return""}}})},"82d1":function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"container"},[i("el-button",{staticStyle:{position:"absolute",right:"20px",top:"20px"},attrs:{size:"small"},on:{click:function(t){return e.$router.back()}}},[e._v("返回")]),i("el-form",{ref:"submitForm",attrs:{"label-width":"100px",model:e.submitForm,rules:e.submitFormRules,size:"small",inline:""}},[i("el-form-item",{attrs:{label:"模板名称：",prop:"name"}},[i("el-input",{staticClass:"input",attrs:{size:"small"},model:{value:e.submitForm.name,callback:function(t){e.$set(e.submitForm,"name",t)},expression:"submitForm.name"}})],1),i("el-form-item",{attrs:{label:"模板编码：",prop:"code"}},[i("el-input",{staticStyle:{width:"420px"},attrs:{size:"small",placeholder:"包含字母、数字、横线、下划线和点,点不能作为开头,长度3-100位"},model:{value:e.submitForm.code,callback:function(t){e.$set(e.submitForm,"code",t)},expression:"submitForm.code"}})],1),i("el-form-item",{attrs:{label:"备注：",prop:"remark"}},[i("el-input",{staticClass:"input",attrs:{size:"small",maxlength:255},model:{value:e.submitForm.remark,callback:function(t){e.$set(e.submitForm,"remark",t)},expression:"submitForm.remark"}})],1)],1),i("el-form",{attrs:{"label-width":"130px",size:"small"},model:{value:e.inspectProject,callback:function(t){e.inspectProject=t},expression:"inspectProject"}},[i("div",{staticClass:"template-wrap"},[i("div",{staticClass:"title"},[e._v("模板项目配置：")]),i("el-button",{attrs:{size:"mini",type:"primary",icon:"el-icon-plus"},on:{click:e.addArg}},[e._v("添加选项")])],1),e._l(e.inspectProject,(function(t,n){return i("div",{key:n,staticClass:"inline"},[i("el-form-item",{attrs:{label:t.name+"："}},["text"===t.typeCode?i("el-input",{staticStyle:{width:"100%"},attrs:{size:"small",placeholder:t.config.presetText,disabled:""}}):e._e(),"number"===t.typeCode?i("el-input-number",{staticStyle:{width:"200px"},attrs:{size:"small",max:t.config.numMax,min:t.config.numMin,placeholder:"数值范围："+t.config.numMin+" - "+t.config.numMax,disabled:""}}):e._e(),"select"===t.typeCode?i("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择",size:"small",disabled:""},model:{value:t.config.defaultItem,callback:function(i){e.$set(t.config,"defaultItem",i)},expression:"optionsItem.config.defaultItem"}},e._l(t.config.options,(function(e,t){return i("el-option",{key:t,attrs:{value:e.content,label:e.content}})})),1):e._e(),"multiSelect"===t.typeCode?i("el-checkbox-group",{attrs:{size:"small",disabled:""},model:{value:t.config.default,callback:function(i){e.$set(t.config,"default",i)},expression:"optionsItem.config.default"}},e._l(t.config.options,(function(e,t){return i("el-checkbox-button",{key:t,attrs:{value:e.content,label:e.content}})})),1):e._e(),"image"===t.typeCode?i("el-upload",{staticClass:"avatar-uploader",attrs:{action:"/formdesigner/form/uploadimg/",accept:".jpg,.jpeg,.png,.bmp","show-file-list":!1,disabled:""}},[i("el-button",{attrs:{size:"mini",disabled:""}},[e._v("图片上传")]),i("div",{attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传jpg/jpeg/png/bmp文件，不超过 "+e._s(t.config.imgMaxNum)+" 张")])],1):e._e(),"location"===t.typeCode?i("el-input",{staticStyle:{width:"100%"},attrs:{size:"small",placeholder:"定位地址",disabled:""}},[i("el-button",{attrs:{slot:"append",size:"mini",icon:"el-icon-location"},slot:"append"})],1):e._e()],1),i("el-button",{staticStyle:{"margin-left":"20px"},attrs:{size:"mini",circle:"",icon:"el-icon-edit"},on:{click:function(i){return e.editItem(t)}}}),i("el-button",{attrs:{size:"mini",circle:"",icon:"el-icon-close"},on:{click:function(i){return e.deleteItem(t)}}})],1)})),i("el-row",{staticStyle:{"padding-top":"12px","border-top":"1px solid #eeeeee"}},[i("el-button",{staticStyle:{"margin-left":"120px"},attrs:{type:"primary",size:"small",icon:"el-icon-folder-checked"},on:{click:e.save}},[e._v("保存模板 ")])],1)],2),e.showAddDialog?i("edit-dialog",{attrs:{add:e.isAdd,arg:e.singleArg},on:{addArg:e.addSingleArg,close:function(t){e.showAddDialog=!1}}}):e._e()],1)},o=[],a=(i("7f7f"),i("96cf"),i("3b8d")),s=i("d225"),l=i("b0b4"),r=i("308d"),c=i("6bb5"),p=i("4e2b"),u=i("9ab4"),m=i("60a3"),d=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{attrs:{visible:e.addOptionsDialog,title:"选项设置",width:"500px","close-on-click-modal":!1},on:{"update:visible":function(t){e.addOptionsDialog=t},close:e.changeVisibleFalse}},[i("el-form",{ref:"form",attrs:{model:e.singleOption,rules:e.formRules,"label-width":"100px",size:"small"}},[i("el-form-item",{attrs:{label:"项目名称：",prop:"name"}},[i("el-input",{attrs:{size:"small",maxlength:7,placeholder:"请输入(不超过7个字符)"},model:{value:e.singleOption.name,callback:function(t){e.$set(e.singleOption,"name",t)},expression:"singleOption.name"}})],1),i("el-form-item",{attrs:{label:"项目类型：",prop:"typeCode"}},[i("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择字段类型",size:"small"},on:{change:e.typeChange},model:{value:e.singleOption.typeCode,callback:function(t){e.$set(e.singleOption,"typeCode",t)},expression:"singleOption.typeCode"}},e._l(e.itemOptions,(function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),"location"!==e.singleOption.typeCode?i("el-form-item",{attrs:{label:"选项设置："}},["select"===e.singleOption.typeCode||"multiSelect"===e.singleOption.typeCode?i("div",[e._l(e.singleOption.config.options,(function(t,n){return i("el-row",{key:n,staticStyle:{"margin-bottom":"6px"}},[i("el-col",{attrs:{span:15}},[i("el-input",{attrs:{size:"small"},model:{value:t.content,callback:function(i){e.$set(t,"content",i)},expression:"optionsItem.content"}})],1),i("el-col",{attrs:{span:6}},[i("el-checkbox",{staticStyle:{"margin-left":"20px"},model:{value:t.defaultChosen,callback:function(i){e.$set(t,"defaultChosen",i)},expression:"optionsItem.defaultChosen"}},[e._v("默认选中 ")])],1),i("el-col",{attrs:{span:3}},[i("el-button",{staticStyle:{"margin-left":"20px"},attrs:{size:"mini",icon:"el-icon-close",circle:""},on:{click:function(i){return i.preventDefault(),e.removeOptionItem(t)}}})],1)],1)})),i("el-row",[i("el-button",{staticStyle:{float:"left"},attrs:{type:"text",icon:"el-icon-plus"},on:{click:e.addOptionItem}},[e._v("\n            添加选项\n          ")])],1)],2):e._e(),"number"===e.singleOption.typeCode?i("div",[i("el-row",[i("el-input-number",{attrs:{precision:2,placeholder:"最小值",max:e.singleOption.config.numMax},model:{value:e.singleOption.config.numMin,callback:function(t){e.$set(e.singleOption.config,"numMin",t)},expression:"singleOption.config.numMin"}}),i("span",[e._v("  至  ")]),i("el-input-number",{attrs:{precision:2,placeholder:"最大值",min:e.singleOption.config.numMin},model:{value:e.singleOption.config.numMax,callback:function(t){e.$set(e.singleOption.config,"numMax",t)},expression:"singleOption.config.numMax"}})],1)],1):e._e(),"image"===e.singleOption.typeCode?i("div",[i("el-row",[i("el-input-number",{attrs:{precision:0,min:1,max:9,placeholder:"最大张数"},model:{value:e.singleOption.config.imgMaxNum,callback:function(t){e.$set(e.singleOption.config,"imgMaxNum",t)},expression:"singleOption.config.imgMaxNum"}})],1)],1):e._e(),"text"===e.singleOption.typeCode?i("div",[i("el-row",[i("el-input",{attrs:{size:"small",placeholder:"预设文本"},model:{value:e.singleOption.config.presetText,callback:function(t){e.$set(e.singleOption.config,"presetText",t)},expression:"singleOption.config.presetText"}})],1)],1):e._e()]):e._e()],1),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{size:"small"},on:{click:e.changeVisibleFalse}},[e._v("取消")]),i("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.addOptionsToList}},[e._v("确定")])],1)],1)},g=[],f=function(e){function t(){var e;return Object(s["a"])(this,t),e=Object(r["a"])(this,Object(c["a"])(t).apply(this,arguments)),e.singleOption={name:"",typeCode:"",config:{options:[],numMin:0,numMax:10,imgMaxNum:9,presetText:""}},e.addOptionsDialog=!1,e.itemOptions=[{value:"select",label:"单项选择"},{value:"multiSelect",label:"多项选择"},{value:"number",label:"数值"},{value:"image",label:"图片"},{value:"text",label:"文本"},{value:"location",label:"定位"}],e.formRules={name:{required:!0,message:"请输入项目名称",trigger:"change"},typeCode:{required:!0,message:"请选择项目类型",trigger:"change"}},e}return Object(p["a"])(t,e),Object(l["a"])(t,[{key:"created",value:function(){this.add?this.singleOption={name:"",typeCode:"",config:{options:[],numMin:0,numMax:10,imgMaxNum:9,presetText:""}}:this.singleOption=JSON.parse(JSON.stringify(this.arg)),this.addOptionsDialog=!0}},{key:"typeChange",value:function(){"select"===this.singleOption.typeCode||"multiSelect"===this.singleOption.typeCode?this.singleOption.config.options=[]:"number"===this.singleOption.typeCode?(this.$set(this.singleOption.config,"numMin",0),this.$set(this.singleOption.config,"numMax",10)):"text"===this.singleOption.typeCode?this.$set(this.singleOption.config,"presetText",""):"image"===this.singleOption.typeCode&&this.$set(this.singleOption.config,"imgMaxNum",1)}},{key:"addOptionItem",value:function(){this.singleOption.config.options.push({})}},{key:"removeOptionItem",value:function(e){var t=this.singleOption.config.options.indexOf(e);-1!==t&&this.singleOption.config.options.splice(t,1)}},{key:"changeVisibleFalse",value:function(){this.$emit("close")}},{key:"addOptionsToList",value:function(){var e=this;this.$refs.form.validate((function(t){if(!t)return!1;switch(e.singleOption.typeCode){case"select":case"multiSelect":if(0===e.singleOption.config.options.length)return void e.$message.info("请添加选项");break;case"number":if(""===e.singleOption.config.numMin||void 0===e.singleOption.config.numMin||""===e.singleOption.config.numMax||void 0===e.singleOption.config.numMax)return void e.$message.info("请设置最大值或最小值");break;case"image":if(""===e.singleOption.config.imgMaxNum||void 0===e.singleOption.config.imgMaxNum)return void e.$message.info("请设置图片的最大张数");break}e.$emit("addArg",e.singleOption)}))}},{key:"beforeDestroy",value:function(){this.singleOption=null}}]),t}(m["e"]);u["__decorate"]([Object(m["d"])({type:Object,required:!1,default:function(){}})],f.prototype,"arg",void 0),u["__decorate"]([Object(m["d"])({type:Boolean,required:!0,default:!0})],f.prototype,"add",void 0),f=u["__decorate"]([Object(m["a"])({})],f);var h=f,b=h,v=i("2877"),y=Object(v["a"])(b,d,g,!1,null,"a8eb7f96",null),O=y.exports,x=i("3cc0"),k=function(e){function t(){var e;return Object(s["a"])(this,t),e=Object(r["a"])(this,Object(c["a"])(t).apply(this,arguments)),e.preData={},e.submitForm={name:"",remark:"",code:"",items:[]},e.submitFormRules={name:{required:!0,message:"请输入模板名称",trigger:"change"},code:{required:!0,message:"请输入模板编码",trigger:"change"}},e.inspectProject=[],e.showDeleteButton=!0,e.showAddDialog=!1,e.isAdd=!1,e.singleArg={},e.index=null,e}return Object(p["a"])(t,e),Object(l["a"])(t,[{key:"created",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t,i=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=this.$route.query.id,!t){e.next=5;break}return e.next=4,this.getTemplateById(t);case 4:this.preData.items.map((function(e){i.inspectProject.push({argTemplate:e.argTemplate?e.argTemplate:{presetText:null},config:e.argTemplate?e.argTemplate:{presetText:null},name:e.name,typeCode:e.typeCode})}));case 5:this.submitForm=this.preData;case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getTemplateById",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){var i,n,o,a,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$http.get(x["a"].getTemplateById+"/"+t);case 2:i=e.sent,n=i.data,o=n.data,a=n.status,s=n.message,a?this.preData=o:this.$message.error(s);case 8:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"addArg",value:function(){this.showAddDialog=!0,this.isAdd=!0}},{key:"editItem",value:function(e){this.index=this.inspectProject.indexOf(e),this.isAdd=!1,this.showAddDialog=!0,this.singleArg=e}},{key:"addSingleArg",value:function(e){e.config.default=[],e.config.options.filter((function(e){return e.defaultChosen})).map((function(t){e.config.default.push(t.content)})),e.config.defaultItem=e.config.default.join(""),e.argTemplate=e.config,this.isAdd?this.$set(this.inspectProject,this.inspectProject.length,e):this.$set(this.inspectProject,this.index,e),this.showAddDialog=!1,this.submitForm.items=this.inspectProject}},{key:"deleteItem",value:function(e){var t=this.inspectProject.indexOf(e);-1!==t&&this.inspectProject.splice(t,1),this.submitForm.items=this.inspectProject}},{key:"save",value:function(){var e=this;this.$refs.submitForm.validate(function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(i){var n,o,a,s,l;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!i){t.next=10;break}return n=e.$route.query.id,t.next=4,e.$http.post(x["a"][n?"updateEventTemplate":"addEventTemplate"],e.submitForm);case 4:o=t.sent,a=o.data,a.data,s=a.status,l=a.message,s?(e.$message.success(n?"修改成功":"添加成功"),e.$router.back()):e.$message.error(l);case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}}]),t}(m["e"]);k=u["__decorate"]([Object(m["a"])({components:{EditDialog:O}})],k);var _=k,w=_,C=(i("c2df"),Object(v["a"])(w,n,o,!1,null,"31182a0e",null));t["default"]=C.exports},c2df:function(e,t,i){"use strict";var n=i("18e0"),o=i.n(n);o.a}}]);
//# sourceMappingURL=chunk-00325022.00c83a26.js.map