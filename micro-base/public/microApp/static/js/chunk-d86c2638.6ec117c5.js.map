{"version":3,"sources":["webpack://micro_[name]/./src/microApps/deviceManage/views/deviceManage/components/DeviceDataChart.vue?16c1","webpack://micro_[name]/./src/microApps/deviceManage/views/deviceManage/DeviceIndex.vue?6028","webpack://micro_[name]/./src/microApps/deviceManage/views/deviceManage/DeviceList.vue?0579","webpack://micro_[name]/./src/microApps/deviceManage/views/deviceManage/DeviceList.vue","webpack://micro_[name]/./src/microApps/deviceManage/views/deviceManage/DeviceList.vue?d870","webpack://micro_[name]/./src/microApps/deviceManage/views/deviceManage/DeviceList.vue?2c9f","webpack://micro_[name]/./src/microApps/deviceManage/views/deviceManage/DeviceData.vue?275d","webpack://micro_[name]/./src/microApps/deviceManage/views/deviceManage/DeviceData.vue","webpack://micro_[name]/./src/microApps/deviceManage/views/deviceManage/DeviceData.vue?fd6f","webpack://micro_[name]/./src/microApps/deviceManage/views/deviceManage/DeviceData.vue?cda5","webpack://micro_[name]/./src/microApps/deviceManage/views/deviceManage/components/DeviceDataChart.vue?f38f","webpack://micro_[name]/./src/microApps/deviceManage/views/deviceManage/components/DeviceDataChart.vue","webpack://micro_[name]/./src/microApps/deviceManage/views/deviceManage/components/DeviceDataChart.vue?f628","webpack://micro_[name]/./src/microApps/deviceManage/views/deviceManage/components/DeviceDataChart.vue?088b","webpack://micro_[name]/./src/microApps/deviceManage/views/deviceManage/DeviceIndex.vue","webpack://micro_[name]/./src/microApps/deviceManage/views/deviceManage/DeviceIndex.vue?6513","webpack://micro_[name]/./src/microApps/deviceManage/views/deviceManage/DeviceIndex.vue?b2e6","webpack://micro_[name]/./src/utils/genCascader.ts","webpack://micro_[name]/./src/microApps/deviceManage/views/deviceManage/DeviceData.vue?5b15","webpack://micro_[name]/./src/microApps/deviceManage/views/deviceManage/DeviceList.vue?c2f3"],"names":["render","_vm","this","_h","$createElement","_c","_self","whichComponent","tag","attrs","deviceId","deviceName","on","switchComponent","$event","staticRenderFns","staticClass","nativeOn","type","indexOf","_k","keyCode","key","search","model","value","pagination","query","callback","$$v","$set","expression","typeOptions","label","checkStrictly","typeDetailId","downloadExcel","_v","ref","staticStyle","uploadProcessFileUrl","httpHeaders","uploadFileSuccess","uploadFileError","uploadFileList","switchToDetails","directives","name","rawName","tableData","getAllSelected","scopedSlots","_u","fn","scope","_s","$index","current","size","row","image","domProps","status","bound","isNormal","deviceStatusRelations","map","d","statusName","join","handleDelete","total","handleSizeChange","handleCurrentChange","loading","code","typedetailId","multipleSelection","api","upload","accessToken","cookie","get","getList","getTypeOptions","Array","isArray","length","$http","post","getPaging","then","res","data","records","$message","error","message","finally","getDeviceTypeTree","genCascader","val","ids","$confirm","confirmButtonText","cancelButtonText","multipleDelete","response","success","warning","push","id","deleteDevices","forEach","item","a","document","createElement","href","download","click","file","component","$emit","currentTableData","_f","time","unit","getSensorData","dateType","sensorList","sensorCheckedList","chartData","echarts","clear","init","$refs","chart","getSensorList","clearTimeout","timer","newTimer","getBindSensor","currentData","dataList","sensorName","xaxisData","renderChart","m","reduce","b","concat","sensorHistory","filter","getCurrentData","info","i","j","sensorId","n","shift","handleChange","_isDestroyed","setTimeout","setOption","tooltip","trigger","formatter","p","o","marker","seriesName","legend","grid","left","right","top","bottom","xAxis","boundaryGap","format","show","yAxis","series","index","xAxisIndex","yAxisIndex","String","required","immediate","filters","timeFilter","_l","getHistoryData","timeQuantum","getTimeQuantumData","presentData","lineChart","timerStatus","renderSensorNum","dispose","mergeCurrentData","timerScheduler","presentDate","Date","valueOf","dateTypeNum","historySensorIdDataMap","some","sensorIdDataMap","historyAttrCodeDataMap","attr","sensor","attrCodeDataMap","currentDataTime","currentAttr","undefined","startTime","endTime","resultMap","sensorCheckedNameMap","result","buttonName","components","DeviceDetail","DeviceList","DeviceDataChart","DeviceData","children"],"mappings":"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","file":"static/js/chunk-d86c2638.6ec117c5.js","sourcesContent":["import mod from \"-!../../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DeviceDataChart.vue?vue&type=style&index=0&id=4d43984c&scoped=true&lang=scss&\"; export default mod; export * from \"-!../../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DeviceDataChart.vue?vue&type=style&index=0&id=4d43984c&scoped=true&lang=scss&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c(_vm.whichComponent,{tag:\"component\",attrs:{\"deviceId\":_vm.deviceId,\"deviceName\":_vm.deviceName},on:{\"switch\":_vm.switchComponent,\"update:deviceId\":function($event){_vm.deviceId=$event},\"update:device-id\":function($event){_vm.deviceId=$event}}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"container\"},[_c('div',{staticClass:\"header\"},[_c('div',{staticClass:\"left\"},[_c('el-input',{staticClass:\"input\",attrs:{\"size\":\"small\",\"maxlength\":100,\"placeholder\":\"设备名称\",\"clearable\":\"\"},nativeOn:{\"keyup\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.search($event)}},model:{value:(_vm.pagination.query.name),callback:function ($$v) {_vm.$set(_vm.pagination.query, \"name\", $$v)},expression:\"pagination.query.name\"}}),_c('el-cascader',{staticClass:\"input\",attrs:{\"size\":\"small\",\"placeholder\":\"设备类型\",\"clearable\":\"\",\"options\":_vm.typeOptions,\"props\":{ label: 'name', value: 'id', checkStrictly: true }},nativeOn:{\"keyup\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.search($event)}},model:{value:(_vm.typeDetailId),callback:function ($$v) {_vm.typeDetailId=$$v},expression:\"typeDetailId\"}}),_c('q-search-button',{on:{\"click\":_vm.search}})],1),_c('el-button',{attrs:{\"size\":\"small\",\"icon\":\"el-icon-download\"},on:{\"click\":_vm.downloadExcel}},[_vm._v(\"下载Excel模板\")]),_c('el-upload',{ref:\"upload\",staticStyle:{\"display\":\"inline-block\",\"margin-left\":\"20px\",\"margin-right\":\"20px\"},attrs:{\"action\":_vm.uploadProcessFileUrl,\"show-file-list\":false,\"headers\":_vm.httpHeaders,\"on-success\":_vm.uploadFileSuccess,\"on-error\":_vm.uploadFileError,\"multiple\":\"\",\"limit\":1,\"file-list\":_vm.uploadFileList}},[_c('el-button',{attrs:{\"size\":\"small\",\"icon\":\"el-icon-upload\"}},[_vm._v(\"批量导入\")])],1),_c('el-button',{attrs:{\"size\":\"small\",\"type\":\"primary\",\"icon\":\"el-icon-plus\"},on:{\"click\":function($event){return _vm.switchToDetails('add')}}},[_vm._v(\"添加\")])],1),_c('div',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}],staticStyle:{\"margin-top\":\"20px\"}},[_c('el-table',{ref:\"multipleTable\",staticStyle:{\"width\":\"100%\",\"min-height\":\"calc(100vh - 294px)\"},attrs:{\"data\":_vm.tableData},on:{\"selection-change\":_vm.getAllSelected}},[_c('el-table-column',{attrs:{\"align\":\"center\",\"prop\":\"id\",\"label\":\"序号\",\"type\":\"index\",\"width\":\"100\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('span',[_vm._v(_vm._s(scope.$index + (_vm.pagination.current - 1) * _vm.pagination.size + 1)+\" \")])]}}])}),_c('el-table-column',{attrs:{\"prop\":\"code\",\"label\":\"设备编码\",\"min-width\":\"\",\"show-overflow-tooltip\":\"\"}}),_c('el-table-column',{attrs:{\"prop\":\"name\",\"label\":\"设备名称\",\"min-width\":\"\",\"show-overflow-tooltip\":\"\"}}),_c('el-table-column',{attrs:{\"prop\":\"orgName\",\"label\":\"所属组织\",\"min-width\":\"\",\"show-overflow-tooltip\":\"\"}}),_c('el-table-column',{attrs:{\"label\":\"设备图片\",\"prop\":\"image\",\"min-width\":\"\",\"show-overflow-tooltip\":\"\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return _c('div',{staticClass:\"img-wrap\"},[(scope.row.image)?_c('el-image',{staticClass:\"img\",attrs:{\"src\":scope.row.image,\"fit\":\"contain\"}}):[_vm._v(\"\\n            暂无图片\\n          \")]],2)}}])}),_c('el-table-column',{attrs:{\"prop\":\"typeDetailName\",\"label\":\"设备类型\",\"min-width\":\"\",\"show-overflow-tooltip\":\"\"}}),_c('el-table-column',{attrs:{\"prop\":\"status\",\"label\":\"是否可用\",\"min-width\":\"\",\"show-overflow-tooltip\":\"\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('span',{domProps:{\"textContent\":_vm._s(scope.row.status ? '启用' : '未启用')}})]}}])}),_c('el-table-column',{attrs:{\"prop\":\"bound\",\"label\":\"是否被绑定\",\"min-width\":\"\",\"show-overflow-tooltip\":\"\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('span',{domProps:{\"textContent\":_vm._s(scope.row.bound === true ? '绑定' : '未绑定')}})]}}])}),_c('el-table-column',{attrs:{\"prop\":\"status\",\"label\":\"设备状态\",\"min-width\":\"\",\"show-overflow-tooltip\":\"\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [(scope.row.isNormal !== false)?_c('span',[_vm._v(\"正常\")]):_c('span',[_vm._v(_vm._s(scope.row.deviceStatusRelations.map(function (d) { return d.statusName; }).join(\"、\")))])]}}])}),_c('el-table-column',{attrs:{\"align\":\"center\",\"label\":\"操作\",\"width\":\"200\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"size\":\"mini\",\"type\":\"text\",\"icon\":\"el-icon-view\",\"title\":\"查看\"},on:{\"click\":function($event){return _vm.switchToDetails('data', scope.row)}}},[_vm._v(\"查看\")]),_c('el-button',{attrs:{\"size\":\"mini\",\"type\":\"text\",\"icon\":\"el-icon-edit\",\"title\":\"编辑\"},on:{\"click\":function($event){return _vm.switchToDetails('edit', scope.row)}}},[_vm._v(\"编辑\")]),_c('el-button',{attrs:{\"size\":\"mini\",\"type\":\"text\",\"icon\":\"el-icon-delete\",\"title\":\"删除\"},on:{\"click\":function($event){return _vm.handleDelete(scope.row)}}},[_vm._v(\"删除\")])]}}])})],1)],1),_c('q-pagination',{attrs:{\"current-page\":_vm.pagination.current,\"size\":\"small\",\"page-size\":_vm.pagination.size,\"page-sizes\":[10, 20, 50, 100],\"layout\":\"total, sizes, prev, pager, next, jumper\",\"total\":_vm.pagination.total},on:{\"size-change\":_vm.handleSizeChange,\"current-change\":_vm.handleCurrentChange,\"update:currentPage\":function($event){return _vm.$set(_vm.pagination, \"current\", $event)},\"update:current-page\":function($event){return _vm.$set(_vm.pagination, \"current\", $event)}}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\nimport { Vue, Component, Emit } from \"vue-property-decorator\";\r\nimport api from \"@/microApps/deviceManage/api\";\r\nimport genCascader from \"@/utils/genCascader\";\r\nimport cookieUtils from \"@/utils/cookie\";\r\n\r\n@Component({})\r\nexport default class DeviceList extends Vue {\r\n  // 表格信息\r\n  tableData: any = [];\r\n  loading = false;\r\n  // 分页信息\r\n  pagination: any = {\r\n    current: 1,\r\n    size: 10,\r\n    total: 0,\r\n    query: {\r\n      name: \"\",\r\n      code: \"\",\r\n      typedetailId: \"\"\r\n    }\r\n  };\r\n  // 复选框选中行数据\r\n  multipleSelection: Array<any> = [];\r\n  typeOptions: Array<any> = [];\r\n  typeDetailId: string[] = [];\r\n  uploadProcessFileUrl: string = api.upload;\r\n  httpHeaders: any = {\r\n    accessToken: \"Bearer \" + cookieUtils.get(\"accessToken\")\r\n  };\r\n  uploadFileList: any[] = [];\r\n\r\n  created() {\r\n    this.getList(); //获取表格\r\n    this.getTypeOptions();\r\n  }\r\n\r\n  // 切换到详情页面（添加和编辑）\r\n  @Emit(\"switch\")\r\n  switchToDetails() {}\r\n\r\n  // 根据关键字，每页查询数量，当前页获得所有链表\r\n  search() {\r\n    this.pagination.current = 1;\r\n    this.getList();\r\n  }\r\n\r\n  getList() {\r\n    this.loading = true;\r\n    let typedetailId = this.typeDetailId;\r\n    if (Array.isArray(typedetailId)) {\r\n      if (typedetailId.length) {\r\n        this.pagination.query.typedetailId = typedetailId[typedetailId.length - 1];\r\n      } else {\r\n        this.pagination.query.typedetailId = \"\";\r\n      }\r\n    }\r\n    this.$http\r\n      .post(api.getPaging, this.pagination)\r\n      .then((res: any) => {\r\n        this.loading = false;\r\n        if (res.data.status) {\r\n          this.tableData = res.data.data.records;\r\n          this.pagination.total = res.data.data.total;\r\n        } else {\r\n          this.$message.error(res.data.message);\r\n        }\r\n      })\r\n      .finally(() => {\r\n        this.loading = false;\r\n      });\r\n  }\r\n\r\n  async getTypeOptions() {\r\n    let {\r\n      data: { data, status, message }\r\n    } = await this.$http.get(api.getDeviceTypeTree);\r\n    if (status) {\r\n      this.typeOptions = data;\r\n      genCascader(this.typeOptions);\r\n    } else {\r\n      this.$message.error(message);\r\n    }\r\n  }\r\n\r\n  handleCurrentChange(val: number) {\r\n    this.pagination.current = val;\r\n    this.getList();\r\n  }\r\n\r\n  handleSizeChange(val: number) {\r\n    this.pagination.size = val;\r\n    this.getList();\r\n  }\r\n\r\n  // 删除设备信息\r\n  deleteDevices(ids: any) {\r\n    if (ids.length !== 0) {\r\n      this.$confirm(\"是否删除设备相关数据？\", \"提示\", {\r\n        confirmButtonText: \"确定\",\r\n        cancelButtonText: \"取消\",\r\n        type: \"warning\"\r\n      }).then(() => {\r\n        this.$http.post(api.multipleDelete, ids).then((response: any) => {\r\n          if (response.data.status) {\r\n            this.$message.success(\"操作成功\");\r\n            this.getList();\r\n          } else {\r\n            this.$message.error(response.data.message);\r\n          }\r\n        });\r\n      });\r\n    } else {\r\n      this.$message.warning(\"请选择要删除的数据！\");\r\n    }\r\n  }\r\n\r\n  // 单个删除\r\n  handleDelete(row: any) {\r\n    let ids: any = [];\r\n    ids.push(row.id);\r\n    this.deleteDevices(ids);\r\n  }\r\n\r\n  // 批量删除\r\n  multipleDelete() {\r\n    let ids: any = [];\r\n    this.multipleSelection.forEach(item => {\r\n      ids.push(item.id);\r\n    });\r\n    this.deleteDevices(ids);\r\n  }\r\n\r\n  // 获得所有复选框选中数据\r\n  getAllSelected(val: Array<any>) {\r\n    this.multipleSelection = val;\r\n  }\r\n\r\n  handleSeeNotNormal() {}\r\n\r\n  downloadExcel() {\r\n    let a = document.createElement(\"a\");\r\n    a.href = api.download;\r\n    a.click();\r\n  }\r\n\r\n  uploadFileSuccess(data: any, file: any) {\r\n    const chosenFile: any = file;\r\n    if (data.status) {\r\n      this.$message.success(data.message);\r\n      this.getList();\r\n    } else {\r\n      this.$message.error(data.message);\r\n      this.getList();\r\n    }\r\n  }\r\n\r\n  uploadFileError() {\r\n    this.$message.error(\"操作失败！\");\r\n  }\r\n}\r\n","import mod from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/ts-loader/index.js??ref--14-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DeviceList.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/ts-loader/index.js??ref--14-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DeviceList.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./DeviceList.vue?vue&type=template&id=d2ecf58c&scoped=true&\"\nimport script from \"./DeviceList.vue?vue&type=script&lang=ts&\"\nexport * from \"./DeviceList.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./DeviceList.vue?vue&type=style&index=0&id=d2ecf58c&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"d2ecf58c\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"main\"},[_c('div',{staticClass:\"header\"},[_c('div',{staticClass:\"left\"},[_vm._v(\"\\n      \"+_vm._s(_vm.deviceName)+\"\\n      \")]),_c('el-button',{attrs:{\"size\":\"small\"},on:{\"click\":function($event){return _vm.$emit('switch')}}},[_vm._v(\"返回\")])],1),_c('el-table',{staticStyle:{\"margin-top\":\"16px\"},attrs:{\"data\":_vm.currentTableData}},[_c('el-table-column',{attrs:{\"align\":\"center\",\"prop\":\"id\",\"label\":\"序号\",\"type\":\"index\",\"width\":\"100\"}}),_c('el-table-column',{attrs:{\"prop\":\"time\",\"label\":\"时间\",\"show-overflow-tooltip\":\"\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('span',[_vm._v(_vm._s(_vm._f(\"timeFilter\")(scope.row.time)))])]}}])}),_c('el-table-column',{attrs:{\"prop\":\"sensorName\",\"label\":\"传感器名称\",\"show-overflow-tooltip\":\"\"}}),_c('el-table-column',{attrs:{\"prop\":\"name\",\"label\":\"检测项目\",\"show-overflow-tooltip\":\"\"}}),_c('el-table-column',{attrs:{\"prop\":\"value\",\"label\":\"数据\",\"show-overflow-tooltip\":\"\",\"formatter\":function (row) { return ((row.value) + \" \" + (row.unit || '')); }}})],1),_c('div',{staticClass:\"header\",staticStyle:{\"margin-top\":\"20px\"}},[_c('div',{staticClass:\"left\"},[_vm._v(\"\\n      历史数据\\n      \"),_c('el-select',{staticStyle:{\"margin-left\":\"8px\"},attrs:{\"size\":\"small\"},on:{\"change\":_vm.getSensorData},model:{value:(_vm.dateType),callback:function ($$v) {_vm.dateType=$$v},expression:\"dateType\"}},[_c('el-option',{attrs:{\"label\":\"过去两小时\",\"value\":\"two\"}}),_c('el-option',{attrs:{\"label\":\"过去四小时\",\"value\":\"four\"}}),_c('el-option',{attrs:{\"label\":\"过去六小时\",\"value\":\"six\"}}),_c('el-option',{attrs:{\"label\":\"过去八小时\",\"value\":\"eight\"}}),_c('el-option',{attrs:{\"label\":\"过去十小时\",\"value\":\"ten\"}}),_c('el-option',{attrs:{\"label\":\"过去十二小时\",\"value\":\"twelve\"}}),_c('el-option',{attrs:{\"label\":\"过去十四小时\",\"value\":\"fourteen\"}}),_c('el-option',{attrs:{\"label\":\"过去十六小时\",\"value\":\"sixteen\"}}),_c('el-option',{attrs:{\"label\":\"过去十八小时\",\"value\":\"eighteen\"}}),_c('el-option',{attrs:{\"label\":\"过去二十小时\",\"value\":\"twenty\"}}),_c('el-option',{attrs:{\"label\":\"过去二十二小时\",\"value\":\"twenty_two\"}}),_c('el-option',{attrs:{\"label\":\"过去二十四小时\",\"value\":\"twenty_four\"}})],1)],1)]),_c('div',{ref:\"chart\",staticClass:\"chart\"})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\n/**\r\n * @Describe: Describe\r\n * @Author: liuyang\r\n * @Date: 2019-10-28 10:46\r\n */\r\nimport { Vue, Component, Prop, Model, Watch } from \"vue-property-decorator\";\r\nimport api from \"@/microApps/deviceManage/api\";\r\nimport moment from \"moment\";\r\nimport echarts from \"echarts\";\r\n\r\n@Component({\r\n  filters: {\r\n    timeFilter: function(b: string) {\r\n      if (b) {\r\n        return moment(b).format(\"YYYY-MM-DD HH:mm:ss\");\r\n      }\r\n    }\r\n  }\r\n})\r\nexport default class SensorDataStatistics extends Vue {\r\n  @Prop({ type: String, required: true })\r\n  deviceId!: string;\r\n  @Prop({ type: String, required: true })\r\n  deviceName!: string;\r\n\r\n  sensorList: any[] = [];\r\n  sensorCheckedList: boolean[] = [];\r\n  dateType: string = \"two\";\r\n  currentTableData: any[] = [];\r\n  echarts: any;\r\n  timer: any;\r\n  newTimer: any;\r\n  chartData: any[] = [];\r\n\r\n  @Watch(\"dataType\", { immediate: true })\r\n  handleDataTypeChange() {\r\n    if (this.echarts) this.echarts.clear();\r\n  }\r\n\r\n  mounted() {\r\n    this.echarts = echarts.init(this.$refs.chart as any);\r\n    this.getSensorList();\r\n    this.getSensorData();\r\n  }\r\n\r\n  destroyed() {\r\n    clearTimeout(this.timer);\r\n    clearTimeout(this.newTimer);\r\n  }\r\n\r\n  async getSensorList() {\r\n    let {\r\n      data: { status, data, message }\r\n    } = await this.$http.get(api.getBindSensor + this.deviceId);\r\n    if (status && data.length) {\r\n      this.sensorList = data;\r\n      this.sensorCheckedList = data.map((d: any) => d.name);\r\n    } else {\r\n      this.$message.error(message);\r\n    }\r\n  }\r\n\r\n  data: any[] = [];\r\n\r\n  get currentData() {\r\n    // return this.data.filter((d: any) => this.sensorCheckedList.some(i => i === d.sensorName));\r\n    return this.data;\r\n  }\r\n\r\n  @Watch(\"currentData\")\r\n  handleChange() {\r\n    if (this.currentData.length) {\r\n      this.chartData = this.currentData.map((d: any) => {\r\n        return {\r\n          dataList: d.chartData.dataList.map((a: any) => {\r\n            return {\r\n              ...a,\r\n              sensorName: d.sensorName\r\n            };\r\n          }),\r\n          xaxisData: d.chartData.xaxisData\r\n        };\r\n      });\r\n      this.renderChart(this.chartData);\r\n      this.currentTableData = this.currentData\r\n        .map((d: any) => {\r\n          return d.currentData.map((m: any) => {\r\n            return {\r\n              ...m,\r\n              sensorName: d.sensorName\r\n            };\r\n          });\r\n        })\r\n        .reduce((a: any[], b: any[]) => a.concat(b));\r\n    }\r\n  }\r\n\r\n  async getSensorData() {\r\n    if (this.echarts) this.echarts.clear();\r\n    clearTimeout(this.timer);\r\n    try {\r\n      let {\r\n        data: { status, data, message }\r\n      } = await this.$http.get(api.sensorHistory + this.deviceId + \"/\" + this.dateType);\r\n      if (status) {\r\n        if (data) {\r\n          data = data.filter((d: any) => d);\r\n          this.data = data;\r\n          if (data.length) {\r\n            this.getCurrentData();\r\n          } else {\r\n            if (this.newTimer) clearTimeout(this.newTimer);\r\n          }\r\n        } else {\r\n          this.$message.info(\"暂无数据\");\r\n        }\r\n      } else {\r\n        this.$message.error(message);\r\n      }\r\n    } finally {\r\n      if (this.newTimer) {\r\n        clearTimeout(this.timer);\r\n      }\r\n    }\r\n  }\r\n\r\n  async getCurrentData() {\r\n    clearTimeout(this.timer);\r\n    clearTimeout(this.newTimer);\r\n    try {\r\n      let {\r\n        data: { status, data, message }\r\n      } = await this.$http.get(api.getCurrentData + this.deviceId);\r\n      if (status) {\r\n        data.forEach((i: any) => {\r\n          this.data.forEach((j: any) => {\r\n            if (i.sensorId === j.sensorId) {\r\n              if (j.chartData.xaxisData[j.chartData.xaxisData.length - 1] !== i.currentData[0].time) {\r\n                j.chartData.dataList.forEach((m: any) => {\r\n                  i.currentData.forEach((n: any) => {\r\n                    if (n.code === m.code) {\r\n                      m.data.shift();\r\n                      m.data.push(n.value);\r\n                    }\r\n                  });\r\n                });\r\n                j.chartData.xaxisData.shift();\r\n                j.chartData.xaxisData.push(i.currentData[0].time);\r\n                j.currentData = i.currentData;\r\n              }\r\n            } else {\r\n              // this.$message.info(\"暂无最新数据\");\r\n            }\r\n          });\r\n        });\r\n        this.handleChange();\r\n      } else {\r\n        this.$message.error(message);\r\n      }\r\n    } finally {\r\n      if (!(this as any)._isDestroyed) {\r\n        this.newTimer = setTimeout(() => {\r\n          this.getCurrentData();\r\n        }, 5000);\r\n      }\r\n    }\r\n  }\r\n\r\n  renderChart(data: any) {\r\n    this.echarts.setOption({\r\n      tooltip: {\r\n        trigger: \"axis\",\r\n        formatter: function(p: any) {\r\n          let a: any = {};\r\n          p.forEach((o: any) => {\r\n            if (a[o.name]) {\r\n              a[o.name].push(`${o.marker} ${o.seriesName}： ${o.data.value} ${o.data.unit ? o.data.unit : \"\"}`);\r\n            } else {\r\n              a[o.name] = [`${o.marker} ${o.seriesName}： ${o.data.value} ${o.data.unit ? o.data.unit : \"\"}`];\r\n            }\r\n          });\r\n          let b = \"\";\r\n          for (let key in a) {\r\n            b = b + `${key}<br/>${a[key].reduce((m: any, n: any) => m + \"<br/>\" + n)}<br/>`;\r\n          }\r\n          // console.log(b);\r\n          // let str = p\r\n          //   .map((i: any) => {\r\n          //     return `${i.marker} ${i.seriesName}: ${i.data.value} ${i.data.unit ? i.data.unit : \"\"}`;\r\n          //   })\r\n          //   .join(\"<br/>\");\r\n          // return `${p[0].axisValue}<br/>${str}`;\r\n          return b;\r\n        }\r\n      },\r\n      legend: {\r\n        data: data\r\n          .map((d: any) => {\r\n            return d.dataList.map((d: any) => `${d.sensorName}：${d.name}`);\r\n          })\r\n          .reduce((a: any[], b: any[]) => a.concat(b))\r\n      },\r\n      grid: {\r\n        left: 10,\r\n        right: 10,\r\n        top: 20,\r\n        bottom: 0\r\n      },\r\n      xAxis: data.map((d: any) => {\r\n        return {\r\n          type: \"category\",\r\n          boundaryGap: false,\r\n          data: d.xaxisData.map((d: string) => moment(d).format(\"HH:mm:ss\")),\r\n          show: false\r\n        };\r\n      }),\r\n      yAxis: data\r\n        .map((d: any) => {\r\n          return d.dataList.map(() => {\r\n            return {\r\n              type: \"value\",\r\n              show: false\r\n            };\r\n          });\r\n        })\r\n        .reduce((a: any[], b: any[]) => a.concat(b)),\r\n      series: data\r\n        .map((d: any, index: number) => {\r\n          d.dataList.forEach((d: any) => {\r\n            d.xAxisIndex = index;\r\n          });\r\n          return d.dataList;\r\n        })\r\n        .reduce((a: any[], b: any[]) => a.concat(b))\r\n        .map((d: any, index: number) => {\r\n          return {\r\n            xAxisIndex: d.xAxisIndex,\r\n            yAxisIndex: index,\r\n            name: `${d.sensorName}：${d.name}`,\r\n            type: \"line\",\r\n            data: d.data.map((item: any) => {\r\n              return {\r\n                value: item,\r\n                unit: d.unit\r\n              };\r\n            })\r\n          };\r\n        })\r\n    });\r\n  }\r\n}\r\n","import mod from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/ts-loader/index.js??ref--14-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DeviceData.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/ts-loader/index.js??ref--14-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DeviceData.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./DeviceData.vue?vue&type=template&id=9844de80&scoped=true&\"\nimport script from \"./DeviceData.vue?vue&type=script&lang=ts&\"\nexport * from \"./DeviceData.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./DeviceData.vue?vue&type=style&index=0&id=9844de80&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"9844de80\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"main\"},[_c('div',{staticClass:\"header\"},[_c('div',{staticClass:\"left\"},[_vm._v(\"\\n      设备名称：\"),_c('span',[_vm._v(_vm._s(_vm.deviceName))])]),_c('el-button',{attrs:{\"size\":\"small\"},on:{\"click\":function($event){return _vm.$emit('switch')}}},[_vm._v(\"返回\")])],1),_c('div',{staticClass:\"title\"},[_c('div',{staticClass:\"label\"},[_vm._v(\"传感器最新数据\")]),_c('el-checkbox-group',{staticStyle:{\"margin-left\":\"30px\"},attrs:{\"disabled\":_vm.sensorList.length === 1},model:{value:(_vm.sensorCheckedList),callback:function ($$v) {_vm.sensorCheckedList=$$v},expression:\"sensorCheckedList\"}},_vm._l((_vm.sensorList),function(item,index){return _c('el-checkbox',{key:index,attrs:{\"label\":item.name}},[_vm._v(_vm._s(item.name))])}),1)],1),_c('el-table',{staticStyle:{\"margin-top\":\"10px\"},attrs:{\"data\":_vm.currentTableData}},[_c('el-table-column',{attrs:{\"align\":\"center\",\"prop\":\"id\",\"label\":\"序号\",\"type\":\"index\",\"width\":\"100\"}}),_c('el-table-column',{attrs:{\"prop\":\"time\",\"label\":\"时间\",\"show-overflow-tooltip\":\"\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('span',[_vm._v(_vm._s(_vm._f(\"timeFilter\")(scope.row.time)))])]}}])}),_c('el-table-column',{attrs:{\"prop\":\"sensorName\",\"label\":\"传感器名称\",\"show-overflow-tooltip\":\"\"}}),_c('el-table-column',{attrs:{\"prop\":\"name\",\"label\":\"检测项目\",\"show-overflow-tooltip\":\"\"}}),_c('el-table-column',{attrs:{\"prop\":\"value\",\"label\":\"数据\",\"show-overflow-tooltip\":\"\",\"formatter\":function (row) { return ((row.value) + \" \" + (row.unit || '')); }}})],1),_c('div',{staticClass:\"title\"},[_vm._v(\"历史数据趋势\")]),_c('div',{staticClass:\"chart-control\"},[_c('span',[_vm._v(\"按时段查看：\")]),_c('el-select',{attrs:{\"size\":\"small\",\"clearable\":false},model:{value:(_vm.dateType),callback:function ($$v) {_vm.dateType=$$v},expression:\"dateType\"}},[_c('el-option',{attrs:{\"label\":\"过去十五分钟\",\"value\":\"quarter\"}}),_c('el-option',{attrs:{\"label\":\"过去三十分钟\",\"value\":\"half\"}}),_c('el-option',{attrs:{\"label\":\"过去四十五分钟\",\"value\":\"threeQuarters\"}}),_c('el-option',{attrs:{\"label\":\"过去一小时\",\"value\":\"hour\"}}),_c('el-option',{attrs:{\"label\":\"过去一个半小时\",\"value\":\"halfAndHour\"}}),_c('el-option',{attrs:{\"label\":\"过去两小时\",\"value\":\"twoHours\"}})],1),_c('q-search-button',{staticStyle:{\"margin\":\"0 20px 0 10px\"},attrs:{\"size\":\"small\",\"type\":\"primary\"},on:{\"click\":_vm.getHistoryData}}),_c('span',[_vm._v(\"自定义时间段：\")]),_c('el-date-picker',{attrs:{\"type\":\"datetimerange\",\"range-separator\":\"至\",\"size\":\"small\",\"value-format\":\"yyyy-MM-dd HH:mm:ss\",\"start-placeholder\":\"开始日期\",\"end-placeholder\":\"结束日期\",\"clearable\":false},model:{value:(_vm.timeQuantum),callback:function ($$v) {_vm.timeQuantum=$$v},expression:\"timeQuantum\"}}),_c('q-search-button',{staticStyle:{\"margin-left\":\"10px\"},attrs:{\"size\":\"small\",\"type\":\"primary\"},on:{\"click\":_vm.getTimeQuantumData}})],1),_c('div',{ref:\"chart\",staticClass:\"chart\"})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\n/**\r\n * @Description: -\r\n * @Author: - 彭鑫\r\n * @Date: - 2019年11月13日11:13:18\r\n **/\r\n\r\nimport { Vue, Component, Prop, Watch } from \"vue-property-decorator\";\r\nimport api from \"@/microApps/deviceManage/api\";\r\nimport moment from \"moment\";\r\nimport echarts from \"echarts\";\r\n\r\n@Component({\r\n  filters: {\r\n    timeFilter: function(b: string) {\r\n      if (b) {\r\n        return moment(b).format(\"YYYY-MM-DD HH:mm:ss\");\r\n      }\r\n    }\r\n  }\r\n})\r\nexport default class DeviceDataChart extends Vue {\r\n  @Prop({ type: String, required: true })\r\n  deviceId!: string;\r\n  @Prop({ type: String, required: true })\r\n  deviceName!: string;\r\n\r\n  presentData: any[] = [];\r\n  data: any[] = []; // 第一次获取的数据\r\n  lineChart: any = null;\r\n\r\n  sensorList: any[] = []; // 设备绑定\r\n  sensorCheckedList: any[] = [];\r\n  dateType: string = \"\";\r\n  timeQuantum: string[] = [];\r\n  // setMaxTime: string = moment(new Date()).format(\"YYYY-MM-DD HH:mm:ss\");\r\n  // setMinTime: string = moment(new Date(new Date().getTime() - 60 * 60 * 1000)).format(\"YYYY-MM-DD HH:mm:ss\");\r\n\r\n  timer: any = null; // 图表数据定时器\r\n\r\n  // 已选传感器\r\n  get sensorCheckedNameMap() {\r\n    let resultMap: any = {};\r\n    this.sensorCheckedList.forEach(d => {\r\n      resultMap[d] = true;\r\n    });\r\n    return resultMap;\r\n  }\r\n  // 监听初始数据，修改图表数据\r\n  get chartData() {\r\n    return this.data\r\n      .filter((d: any) => this.sensorCheckedNameMap[d.sensorName])\r\n      .map((d: any) => {\r\n        if (d.chartData) {\r\n          return {\r\n            dataList: d.chartData.dataList.map((a: any) => {\r\n              return {\r\n                ...a,\r\n                sensorName: d.sensorName\r\n              };\r\n            }),\r\n            xaxisData: d.chartData.xaxisData,\r\n            sensorName: d.sensorName\r\n          };\r\n        } else {\r\n          return {\r\n            dataList: [],\r\n            xaxisData: [],\r\n            sensorName: \"\"\r\n          };\r\n        }\r\n      });\r\n  }\r\n  // 监听图表数据，重新渲染图表和表格\r\n  @Watch(\"chartData\")\r\n  handleChange() {\r\n    this.renderChart(this.chartData);\r\n  }\r\n  // 表格显示用实时数据\r\n  get currentTableData() {\r\n    let result: any[] = [];\r\n    if (this.sensorCheckedList.length && this.presentData.length) {\r\n      result = this.presentData\r\n        .map((i: any) => {\r\n          return i.currentData.map((m: any) => {\r\n            return {\r\n              ...m,\r\n              sensorName: i.sensorName\r\n            };\r\n          });\r\n        })\r\n        .reduce((a: any[], b: any[]) => a.concat(b))\r\n        .filter((d: any) => this.sensorCheckedNameMap[d.sensorName]);\r\n    }\r\n    return result;\r\n  }\r\n\r\n  created() {\r\n    this.getSensorList();\r\n    // this.getHistoryData();\r\n    this.getCurrentData();\r\n  }\r\n\r\n  mounted() {\r\n    this.lineChart = echarts.init(this.$refs[\"chart\"] as any);\r\n  }\r\n\r\n  destroyed() {\r\n    this.lineChart.dispose();\r\n    clearTimeout(this.timer);\r\n  }\r\n\r\n  // 获取绑定传感器列表\r\n  async getSensorList() {\r\n    let {\r\n      data: { status, data, message }\r\n    } = await this.$http.get(api.getBindSensor + this.deviceId);\r\n    if (status && data.length) {\r\n      this.sensorList = data;\r\n      this.sensorCheckedList = data.map((d: any) => d.name);\r\n    } else {\r\n      this.$message.error(message);\r\n    }\r\n  }\r\n\r\n  // 获取初始化数据\r\n  async getHistoryData() {\r\n    if (!this.dateType || this.dateType === \"\") {\r\n      this.$message.error(\"时间段不能为空\");\r\n      return;\r\n    }\r\n    this.timerStatus = \"queryHistoryData\";\r\n    if (this.lineChart) this.lineChart.clear();\r\n    this.timeQuantum = [];\r\n    try {\r\n      let {\r\n        data: { status, data, message }\r\n      } = await this.$http.get(api.sensorHistory + this.deviceId + \"/\" + this.dateType);\r\n      if (status) {\r\n        this.data = data;\r\n        // 成功后获取增量数据\r\n        this.timerStatus = \"queryCurrentData\";\r\n      } else {\r\n        this.$message.error(message);\r\n      }\r\n    } finally {\r\n      // this.timerScheduler();\r\n    }\r\n  }\r\n\r\n  // 获取最新的传感器数据\r\n  async getCurrentData() {\r\n    try {\r\n      let {\r\n        data: { status, data, message }\r\n      } = await this.$http.get(api.getCurrentData + this.deviceId);\r\n      if (status) {\r\n        this.presentData = data;\r\n        if (this.timerStatus === \"queryCurrentData\") {\r\n          this.mergeCurrentData(data);\r\n        }\r\n      } else {\r\n        this.$message.error(message);\r\n      }\r\n    } finally {\r\n      this.timerScheduler();\r\n    }\r\n  }\r\n\r\n  // 合并增量数据\r\n  mergeCurrentData(data: any[]) {\r\n    let presentDate: number = new Date().valueOf();\r\n    let dateTypeNum: number = 2;\r\n    switch (this.dateType) {\r\n      case \"quarter\":\r\n        dateTypeNum = 0.25;\r\n        break;\r\n      case \"half\":\r\n        dateTypeNum = 0.5;\r\n        break;\r\n      case \"threeQuarters\":\r\n        dateTypeNum = 0.75;\r\n        break;\r\n      case \"hour\":\r\n        dateTypeNum = 1;\r\n        break;\r\n      case \"halfAndHour\":\r\n        dateTypeNum = 1.5;\r\n        break;\r\n      default:\r\n        dateTypeNum = 2;\r\n    }\r\n    // 对比增量数据 存在新的数据 重新拉取历史数据\r\n    let historySensorIdDataMap: any = {};\r\n    this.data.forEach((item: any) => {\r\n      historySensorIdDataMap[item.sensorId] = item;\r\n    });\r\n    if (\r\n      data.some((item: any) => {\r\n        return !historySensorIdDataMap[item.sensorId] && presentDate - new Date(item.currentData[0].time).valueOf() < dateTypeNum * 3600000;\r\n      })\r\n    ) {\r\n      this.getHistoryData();\r\n      return;\r\n    }\r\n\r\n    let sensorIdDataMap: any = {}; // 增量数据的传感器ID map用于通过传感器ID查找传感器\r\n    data.forEach((item: any) => {\r\n      sensorIdDataMap[item.sensorId] = item;\r\n    });\r\n    this.data.forEach((item: any) => {\r\n      // 对比增量数据 存在新的数据 重新拉取历史数据\r\n      let historyAttrCodeDataMap: any = {};\r\n      item.chartData.dataList.forEach((attr: any) => {\r\n        historyAttrCodeDataMap[attr.code] = attr;\r\n      });\r\n      let sensor = sensorIdDataMap[item.sensorId];\r\n      if (\r\n        sensor.currentData.some((attr: any) => {\r\n          return !historyAttrCodeDataMap[attr.code];\r\n        })\r\n      ) {\r\n        this.getHistoryData();\r\n        return;\r\n      }\r\n      let attrCodeDataMap: any = {}; // 传感器属性数据的code map用于通过属性code查找属性\r\n      sensor.currentData.forEach((attr: any) => {\r\n        attrCodeDataMap[attr.code] = attr;\r\n      });\r\n      let currentDataTime = sensor.currentData[0].time;\r\n      if (item.chartData && item.chartData.xaxisData[item.chartData.xaxisData.length - 1] !== currentDataTime) {\r\n        item.chartData.dataList.forEach((attr: any) => {\r\n          let currentAttr = attrCodeDataMap[attr.code];\r\n          if (currentAttr === undefined) {\r\n            attr.data.push(\"\");\r\n          } else {\r\n            attr.data.push(currentAttr.value);\r\n          }\r\n        });\r\n\r\n        item.chartData.xaxisData.push(currentDataTime);\r\n        item.currentData = sensor.currentData;\r\n      }\r\n      if (presentDate - new Date(item.chartData.xaxisData[0]).valueOf() > dateTypeNum * 3600000) {\r\n        item.chartData.xaxisData.shift();\r\n        item.chartData.dataList.forEach((m: any) => {\r\n          m.data.shift();\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  // 获取时间段对应数据\r\n  async getTimeQuantumData() {\r\n    if (!this.timeQuantum.length || this.timeQuantum === []) {\r\n      this.$message.error(\"时间段不能为空\");\r\n      return;\r\n    }\r\n    this.timerStatus = \"queryTimeQuantumData\";\r\n    this.dateType = \"\";\r\n    if (this.lineChart) this.lineChart.clear();\r\n    try {\r\n      let {\r\n        data: { status, data, message }\r\n      } = await this.$http.post(`${api.getTimeQuantumData}/${this.deviceId}`, {\r\n        startTime: this.timeQuantum[0],\r\n        endTime: this.timeQuantum[1]\r\n      });\r\n      if (status) {\r\n        this.data = data;\r\n      } else {\r\n        this.$message.error(message);\r\n      }\r\n    } catch (e) {\r\n      this.$message.error(\"查询失败\");\r\n    }\r\n  }\r\n\r\n  // 定时器任务状态\r\n  timerStatus: \"init\" | \"queryHistoryData\" | \"queryCurrentData\" | \"queryTimeQuantumData\" = \"init\";\r\n\r\n  // 定时器调度\r\n  timerScheduler() {\r\n    if ((this as any)._isDestroyed) return;\r\n    this.timer = setTimeout(() => {\r\n      if ((this as any)._isDestroyed) return;\r\n      switch (this.timerStatus) {\r\n        case \"init\":\r\n        case \"queryTimeQuantumData\":\r\n        case \"queryCurrentData\":\r\n          this.getCurrentData();\r\n          break;\r\n        case \"queryHistoryData\":\r\n          this.getHistoryData();\r\n          this.getCurrentData();\r\n          break;\r\n      }\r\n    }, 10000);\r\n  }\r\n\r\n  renderSensorNum: number = 0;\r\n\r\n  // 图表渲染\r\n  renderChart(data: any[]) {\r\n    if (this.renderSensorNum && data.length !== this.renderSensorNum) {\r\n      this.lineChart.clear(); // 如果选中的传感器发生变化 清空重绘 正常情况使用增量绘制\r\n    }\r\n    this.renderSensorNum = data.length;\r\n    if (!data.length) return;\r\n    this.lineChart.setOption({\r\n      tooltip: {\r\n        trigger: \"axis\",\r\n        formatter: function(p: any) {\r\n          let a: any = {};\r\n          p.forEach((o: any) => {\r\n            if (a[o.name]) {\r\n              if (o.data.value) a[o.name].push(`${o.marker} ${o.seriesName}： ${o.data.value} ${o.data.unit ? o.data.unit : \"\"}`);\r\n            } else {\r\n              a[o.name] = [`${o.marker} ${o.seriesName}： ${o.data.value} ${o.data.unit ? o.data.unit : \"\"}`];\r\n            }\r\n          });\r\n          let b = \"\";\r\n          for (let key in a) {\r\n            b = b + `${key}<br/>${a[key].reduce((m: any, n: any) => m + \"<br/>\" + n)}<br/>`;\r\n          }\r\n          return b;\r\n        }\r\n      },\r\n      legend: {\r\n        data: data\r\n          .map((d: any) => {\r\n            return d.dataList.map((d: any) => `${d.sensorName}：${d.name}`);\r\n          })\r\n          .reduce((a: any[], b: any[]) => a.concat(b))\r\n      },\r\n      grid: {\r\n        left: 50,\r\n        right: 50,\r\n        top: 50,\r\n        bottom: 30\r\n      },\r\n      xAxis: data.map((d: any) => {\r\n        return {\r\n          type: \"category\",\r\n          boundaryGap: false,\r\n          data: d.xaxisData.map((d: string) => moment(d).format(\"HH:mm:ss\")),\r\n          show: false\r\n        };\r\n      }),\r\n      yAxis: data\r\n        .map((d: any) => {\r\n          return d.dataList.map(() => {\r\n            return {\r\n              type: \"value\",\r\n              show: false\r\n            };\r\n          });\r\n        })\r\n        .reduce((a: any[], b: any[]) => a.concat(b)),\r\n      series: data\r\n        .map((d: any, index: number) => {\r\n          d.dataList.forEach((d: any) => {\r\n            d.xAxisIndex = index;\r\n          });\r\n          return d.dataList;\r\n        })\r\n        .reduce((a: any[], b: any[]) => a.concat(b))\r\n        .map((d: any, index: number) => {\r\n          return {\r\n            xAxisIndex: d.xAxisIndex,\r\n            yAxisIndex: index,\r\n            name: `${d.sensorName}：${d.name}`,\r\n            type: \"line\",\r\n            data: d.data.map((item: any) => {\r\n              return {\r\n                value: item,\r\n                unit: d.unit\r\n              };\r\n            })\r\n          };\r\n        })\r\n    });\r\n  }\r\n}\r\n","import mod from \"-!../../../../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../../node_modules/babel-loader/lib/index.js!../../../../../../node_modules/ts-loader/index.js??ref--14-3!../../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DeviceDataChart.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../../node_modules/babel-loader/lib/index.js!../../../../../../node_modules/ts-loader/index.js??ref--14-3!../../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DeviceDataChart.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./DeviceDataChart.vue?vue&type=template&id=4d43984c&scoped=true&\"\nimport script from \"./DeviceDataChart.vue?vue&type=script&lang=ts&\"\nexport * from \"./DeviceDataChart.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./DeviceDataChart.vue?vue&type=style&index=0&id=4d43984c&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"4d43984c\",\n  null\n  \n)\n\nexport default component.exports","\n\n\n\n\n\n\r\nimport { Vue, Component } from \"vue-property-decorator\";\r\nimport DeviceDetail from \"./DeviceDetail.vue\";\r\nimport DeviceList from \"./DeviceList.vue\";\r\nimport DeviceData from \"./DeviceData.vue\";\r\nimport DeviceDataChart from \"./components/DeviceDataChart.vue\";\r\n\r\n@Component({\r\n  components: {\r\n    DeviceDetail,\r\n    DeviceList,\r\n    DeviceDataChart,\r\n    DeviceData\r\n  }\r\n})\r\nexport default class DeviceIndex extends Vue {\r\n  whichComponent: string = \"DeviceList\";\r\n  deviceId: string = \"\";\r\n  deviceName: string = \"\";\r\n  switchComponent(buttonName: String, row: any) {\r\n    switch (buttonName) {\r\n      case \"add\":\r\n        this.whichComponent = \"DeviceDetail\";\r\n        this.deviceId = \"\";\r\n        break;\r\n      case \"edit\":\r\n        this.whichComponent = \"DeviceDetail\";\r\n        this.deviceId = row.id;\r\n        break;\r\n      case \"data\":\r\n        this.whichComponent = \"DeviceDataChart\";\r\n        this.deviceId = row.id;\r\n        this.deviceName = row.name;\r\n        break;\r\n      default:\r\n        this.whichComponent = \"DeviceList\";\r\n    }\r\n  }\r\n}\r\n","import mod from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/ts-loader/index.js??ref--14-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DeviceIndex.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/ts-loader/index.js??ref--14-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DeviceIndex.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./DeviceIndex.vue?vue&type=template&id=60dc1632&scoped=true&\"\nimport script from \"./DeviceIndex.vue?vue&type=script&lang=ts&\"\nexport * from \"./DeviceIndex.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"60dc1632\",\n  null\n  \n)\n\nexport default component.exports","function genCascader(data: any[]) {\r\n  data.forEach(item => {\r\n    if (!item.children || !item.children.length) {\r\n      delete item.children;\r\n    } else {\r\n      genCascader(item.children);\r\n    }\r\n  });\r\n}\r\n\r\nexport default genCascader;\r\n","import mod from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DeviceData.vue?vue&type=style&index=0&id=9844de80&scoped=true&lang=scss&\"; export default mod; export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DeviceData.vue?vue&type=style&index=0&id=9844de80&scoped=true&lang=scss&\"","import mod from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DeviceList.vue?vue&type=style&index=0&id=d2ecf58c&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DeviceList.vue?vue&type=style&index=0&id=d2ecf58c&lang=scss&scoped=true&\""],"sourceRoot":""}