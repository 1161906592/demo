{"version":3,"sources":["webpack://micro_[name]/./src/microApps/myProcess/views/myApproval/ApprovalList.vue?26ec","webpack://micro_[name]/./src/microApps/myProcess/views/myApproval/ApprovalList.vue","webpack://micro_[name]/./src/microApps/myProcess/views/myApproval/ApprovalList.vue?b3c9","webpack://micro_[name]/./src/microApps/myProcess/views/myApproval/ApprovalList.vue?a20f","webpack://micro_[name]/./src/microApps/myProcess/api/index.ts","webpack://micro_[name]/./src/microApps/myProcess/views/myApproval/ApprovalList.vue?8093","webpack://micro_[name]/./src/microApps/myProcess/components/DealProcessDetails.vue?2744","webpack://micro_[name]/./src/microApps/myProcess/components/DealProcessDetails.vue","webpack://micro_[name]/./src/microApps/myProcess/components/DealProcessDetails.vue?ca42","webpack://micro_[name]/./src/microApps/myProcess/components/DealProcessDetails.vue?5585","webpack://micro_[name]/./src/microApps/myProcess/components/DealProcessDetails.vue?93c9"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","staticStyle","selectedTab","key","attrs","on","getTasksData","model","value","queryCriteriaDealing","callback","$$v","$set","expression","getAllProcessed","queryCriteriaProcessed","_v","getAllProcessedClosed","queryCriteriaClosed","_e","directives","name","rawName","needDealTableTotal","ref","needDealTableData","indexCustomNeedDeal","row","$moment","createTime","format","scopedSlots","_u","fn","scope","$event","dealProcess","getCurrentNode","processInstanceId","current","pageSize","pageSizeChange","ProcessedTableTotal","ProcessedTableData","indexCustomProcessed","startTime","getProcessDetailInfo","closedTableTotal","closedTableData","indexCustomClosed","currentNodeDialog","currentNodeImg","toDoMainPage","edit","processItem","returnAndReload","staticRenderFns","procdefName","processName","loading","typeOptions","imgLoading","$http","get","api","getUserTasks","params","then","res","data","status","records","total","size","$message","error","message","catch","getProcessInstance","getAllClosedProcess","id","getProcessImg","getImage","$nextTick","img","$refs","url","getAttribute","request","XMLHttpRequest","accessToken","cookie","responseType","open","setRequestHeader","onreadystatechange","e","readyState","DONE","src","URL","createObjectURL","response","onload","revokeObjectURL","send","process","console","log","index","components","DealProcessDetails","component","getProcessParameter","handleTask","getApplyFormValue","getOngoingProcess","getFinishedProcess","getEventType","getAllProcessType","processAssignState","getAllProcessList","getFormDefine","getAllUserVisible","getAssignTaskList","getAllOrg","getAllRole","getAllUser","getFormList","saveSubmitForm","getRuntimeTaskAssignedList","updateAssignedGroup","currentTab","taskName","submitNodeForm","currentNodeForm","required","trigger","handleState","nextTaskCount","_l","item","taskKey","_s","formValue","JSON","parse","comment","type","time","userId","startNodeForm","startNodeTime","dealedProcess","returnMainPage","detailLoading","editMode","processDefines","startUserName","targetUserIds","taskRemark","handle","userInfoList","taskId","getProcessHistory","comments","formSubmit","formSubmitValue","map","n","attrType","title","dataRange","presetText","isFirst","stringify","formContent","userName","validate","valid","customInput","formValidation","post","success","$emit","Object","default","Boolean"],"mappings":"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","file":"static/js/chunk-8d5e0da2.81e38cf8.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"container\"},[(_vm.toDoMainPage)?_c('div',{staticStyle:{\"width\":\"100%\"}},[(_vm.selectedTab === 'needDeal')?_c('div',{key:0,staticClass:\"search-box\"},[_c('el-input',{staticStyle:{\"width\":\"240px\"},attrs:{\"size\":\"small\",\"placeholder\":\"流程关键字查询\",\"clearable\":\"\"},on:{\"clear\":_vm.getTasksData},model:{value:(_vm.queryCriteriaDealing.procdefName),callback:function ($$v) {_vm.$set(_vm.queryCriteriaDealing, \"procdefName\", $$v)},expression:\"queryCriteriaDealing.procdefName\"}}),_c('q-search-button',{staticStyle:{\"margin-left\":\"10px\"},on:{\"click\":_vm.getTasksData}})],1):(_vm.selectedTab === 'processed-unclose')?_c('div',{key:1,staticClass:\"search-box\"},[_c('el-input',{staticStyle:{\"width\":\"240px\"},attrs:{\"size\":\"small\",\"placeholder\":\"流程关键字查询\",\"clearable\":\"\"},on:{\"clear\":_vm.getAllProcessed},model:{value:(_vm.queryCriteriaProcessed.processName),callback:function ($$v) {_vm.$set(_vm.queryCriteriaProcessed, \"processName\", $$v)},expression:\"queryCriteriaProcessed.processName\"}}),_c('q-search-button',{staticStyle:{\"margin-left\":\"10px\"},on:{\"click\":_vm.getAllProcessed}},[_vm._v(\"查询\")])],1):(_vm.selectedTab === 'processed-closed')?_c('div',{key:2,staticClass:\"search-box\"},[_c('el-input',{staticStyle:{\"width\":\"240px\"},attrs:{\"size\":\"small\",\"placeholder\":\"流程关键字查询\",\"clearable\":\"\"},on:{\"clear\":_vm.getAllProcessedClosed},model:{value:(_vm.queryCriteriaClosed.processName),callback:function ($$v) {_vm.$set(_vm.queryCriteriaClosed, \"processName\", $$v)},expression:\"queryCriteriaClosed.processName\"}}),_c('q-search-button',{staticStyle:{\"margin-left\":\"10px\"},on:{\"click\":_vm.getAllProcessedClosed}})],1):_vm._e(),_c('div',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}],staticClass:\"content-box\"},[_c('el-tabs',{staticStyle:{\"margin-top\":\"20px\"},attrs:{\"type\":\"card\"},model:{value:(_vm.selectedTab),callback:function ($$v) {_vm.selectedTab=$$v},expression:\"selectedTab\"}},[_c('el-tab-pane',{attrs:{\"label\":'待办（' + _vm.needDealTableTotal + '）',\"name\":\"needDeal\"}},[_c('el-table',{ref:\"needDealTable\",staticStyle:{\"text-align\":\"center\",\"margin-top\":\"20px\",\"min-height\":\"calc(100vh - 355px)\"},attrs:{\"data\":_vm.needDealTableData}},[_c('el-table-column',{attrs:{\"align\":\"center\",\"prop\":\"id\",\"label\":\"序号\",\"type\":\"index\",\"index\":_vm.indexCustomNeedDeal,\"width\":\"100\"}}),_c('el-table-column',{attrs:{\"prop\":\"processName\",\"label\":\"流程名称\",\"show-overflow-tooltip\":\"\"}}),_c('el-table-column',{attrs:{\"prop\":\"taskName\",\"label\":\"任务名称\",\"show-overflow-tooltip\":\"\"}}),_c('el-table-column',{attrs:{\"prop\":\"createTime\",\"label\":\"发起时间\",\"formatter\":function (row) { return _vm.$moment(row.createTime).format('YYYY-MM-DD HH:mm:ss'); },\"show-overflow-tooltip\":\"\"}}),_c('el-table-column',{attrs:{\"prop\":\"startUserName\",\"label\":\"发起人\",\"show-overflow-tooltip\":\"\"}}),_c('el-table-column',{attrs:{\"label\":\"操作\",\"width\":\"200\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"icon\":\"el-icon-edit-outline\",\"size\":\"mini\",\"type\":\"text\",\"title\":\"办理任务\"},on:{\"click\":function($event){return _vm.dealProcess(scope.row)}}},[_vm._v(\"\\n                  办理任务\\n                \")]),_c('el-button',{attrs:{\"icon\":\"el-icon-view\",\"size\":\"mini\",\"type\":\"text\",\"title\":\"查看当前节点\"},on:{\"click\":function($event){return _vm.getCurrentNode(scope.row.processInstanceId)}}},[_vm._v(\"\\n                  查看当前节点\\n                \")])]}}],null,false,325300401)})],1),_c('div',{staticClass:\"pagination\"},[_c('q-pagination',{attrs:{\"current-page\":_vm.queryCriteriaDealing.current,\"page-size\":_vm.queryCriteriaDealing.pageSize,\"total\":_vm.needDealTableTotal},on:{\"current-change\":function($event){return _vm.getTasksData($event)},\"size-change\":function($event){return _vm.pageSizeChange($event, 0)},\"update:currentPage\":function($event){return _vm.$set(_vm.queryCriteriaDealing, \"current\", $event)},\"update:current-page\":function($event){return _vm.$set(_vm.queryCriteriaDealing, \"current\", $event)}}})],1)],1),_c('el-tab-pane',{attrs:{\"label\":'已办未结束（' + _vm.ProcessedTableTotal + '）',\"name\":\"processed-unclose\"}},[_c('el-table',{ref:\"ProcessedTable\",staticStyle:{\"text-align\":\"center\",\"margin-top\":\"20px\",\"min-height\":\"calc(100vh - 355px)\"},attrs:{\"data\":_vm.ProcessedTableData}},[_c('el-table-column',{attrs:{\"align\":\"center\",\"prop\":\"id\",\"label\":\"序号\",\"type\":\"index\",\"index\":_vm.indexCustomProcessed,\"width\":\"100\"}}),_c('el-table-column',{attrs:{\"prop\":\"processName\",\"label\":\"流程名称\",\"show-overflow-tooltip\":\"\"}}),_c('el-table-column',{attrs:{\"prop\":\"taskName\",\"label\":\"任务名称\",\"show-overflow-tooltip\":\"\"}}),_c('el-table-column',{attrs:{\"prop\":\"startTime\",\"label\":\"发起时间\",\"formatter\":function (row) { return _vm.$moment(row.startTime).format('YYYY-MM-DD HH:mm:ss'); },\"show-overflow-tooltip\":\"\"}}),_c('el-table-column',{attrs:{\"prop\":\"startName\",\"label\":\"发起人\",\"show-overflow-tooltip\":\"\"}}),_c('el-table-column',{attrs:{\"label\":\"操作\",\"width\":\"200\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"icon\":\"el-icon-view\",\"size\":\"mini\",\"type\":\"text\",\"title\":\"查看详情\"},on:{\"click\":function($event){return _vm.getProcessDetailInfo(scope.row)}}},[_vm._v(\"\\n                  查看详情\\n                \")]),_c('el-button',{attrs:{\"icon\":\"el-icon-view\",\"size\":\"mini\",\"type\":\"text\",\"title\":\"查看当前节点\"},on:{\"click\":function($event){return _vm.getCurrentNode(scope.row.processInstanceId)}}},[_vm._v(\"\\n                  查看当前节点\\n                \")])]}}],null,false,2518095912)})],1),_c('div',{staticClass:\"pagination\"},[_c('q-pagination',{attrs:{\"current-page\":_vm.queryCriteriaProcessed.current,\"page-size\":_vm.queryCriteriaProcessed.pageSize,\"page-sizes\":[10, 20, 50, 100],\"layout\":\"total, sizes, prev, pager, next, jumper\",\"total\":_vm.ProcessedTableTotal},on:{\"current-change\":function($event){return _vm.getAllProcessed($event)},\"size-change\":function($event){return _vm.pageSizeChange($event, 1)},\"update:currentPage\":function($event){return _vm.$set(_vm.queryCriteriaProcessed, \"current\", $event)},\"update:current-page\":function($event){return _vm.$set(_vm.queryCriteriaProcessed, \"current\", $event)}}})],1)],1),_c('el-tab-pane',{attrs:{\"label\":'已办已结束（' + _vm.closedTableTotal + '）',\"name\":\"processed-closed\"}},[_c('el-table',{ref:\"ProcessedTable\",staticStyle:{\"text-align\":\"center\",\"margin-top\":\"20px\",\"min-height\":\"calc(100vh - 355px)\"},attrs:{\"data\":_vm.closedTableData}},[_c('el-table-column',{attrs:{\"align\":\"center\",\"prop\":\"id\",\"label\":\"序号\",\"type\":\"index\",\"index\":_vm.indexCustomClosed,\"width\":\"100\"}}),_c('el-table-column',{attrs:{\"prop\":\"processName\",\"label\":\"流程名称\",\"show-overflow-tooltip\":\"\"}}),_c('el-table-column',{attrs:{\"prop\":\"startTime\",\"label\":\"发起时间\",\"formatter\":function (row) { return _vm.$moment(row.startTime).format('YYYY-MM-DD HH:mm:ss'); },\"show-overflow-tooltip\":\"\"}}),_c('el-table-column',{attrs:{\"prop\":\"startName\",\"label\":\"发起人\",\"show-overflow-tooltip\":\"\"}}),_c('el-table-column',{attrs:{\"label\":\"操作\",\"width\":\"200\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"icon\":\"el-icon-view\",\"size\":\"mini\",\"type\":\"text\",\"title\":\"查看详情\"},on:{\"click\":function($event){return _vm.getProcessDetailInfo(scope.row)}}},[_vm._v(\"\\n                  查看详情\\n                \")])]}}],null,false,445893703)})],1),_c('div',{staticClass:\"pagination\"},[_c('q-pagination',{attrs:{\"current-page\":_vm.queryCriteriaClosed.current,\"page-size\":_vm.queryCriteriaClosed.pageSize,\"page-sizes\":[10, 20, 50, 100],\"layout\":\"total, sizes, prev, pager, next, jumper\",\"total\":_vm.closedTableTotal},on:{\"current-change\":function($event){return _vm.getAllProcessedClosed($event)},\"size-change\":function($event){return _vm.pageSizeChange($event, 2)},\"update:currentPage\":function($event){return _vm.$set(_vm.queryCriteriaClosed, \"current\", $event)},\"update:current-page\":function($event){return _vm.$set(_vm.queryCriteriaClosed, \"current\", $event)}}})],1)],1)],1)],1),_c('el-dialog',{staticStyle:{\"overflow\":\"auto\"},attrs:{\"title\":\"当前节点\",\"width\":\"50%\",\"show-close\":\"\",\"visible\":_vm.currentNodeDialog,\"destroy-on-close\":true},on:{\"update:visible\":function($event){_vm.currentNodeDialog=$event}}},[(_vm.currentNodeDialog)?_c('div',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.imgLoading),expression:\"imgLoading\"}],staticClass:\"current-node-img\"},[_c('img',{ref:\"processImg\",attrs:{\"process-src\":_vm.currentNodeImg,\"alt\":\"\"}})]):_vm._e()])],1):_vm._e(),_c('div',{staticStyle:{\"width\":\"100%\"}},[(!_vm.toDoMainPage)?_c('deal-process-details',{attrs:{\"edit-mode\":_vm.edit,\"process\":_vm.processItem},on:{\"clickReturn\":_vm.returnAndReload}}):_vm._e()],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\n/**\r\n * @Describe: Describe\r\n * @Author: liuyang\r\n * @Date: 2019-09-06 10:37\r\n */\r\nimport { Vue, Component, Prop, Model, Watch } from \"vue-property-decorator\";\r\nimport DealProcessDetails from \"@/microApps/myProcess/components/DealProcessDetails.vue\";\r\nimport api from \"@/microApps/myProcess/api\";\r\nimport cookieUtils from \"@/utils/cookie\";\r\n\r\n@Component({\r\n  components: { DealProcessDetails }\r\n})\r\nexport default class ApprovalList extends Vue {\r\n  // 分页信息\r\n  queryCriteriaDealing: any = {\r\n    pageSize: 10,\r\n    current: 1,\r\n    procdefName: \"\"\r\n  };\r\n  queryCriteriaProcessed: any = {\r\n    pageSize: 10,\r\n    current: 1,\r\n    processName: \"\"\r\n  };\r\n  queryCriteriaClosed: any = {\r\n    pageSize: 10,\r\n    current: 1,\r\n    processName: \"\"\r\n  };\r\n  procdefName: string = \"\"; // 流程查询关键字\r\n  needDealTableData: any[] = [];\r\n  indexCustomNeedDeal: number = 0;\r\n  ProcessedTableData: any[] = [];\r\n  indexCustomProcessed: number = 0;\r\n  closedTableData: any[] = [];\r\n  indexCustomClosed: number = 0;\r\n  needDealTableTotal: number = 0;\r\n  ProcessedTableTotal: number = 0;\r\n  closedTableTotal: number = 0;\r\n  loading: Boolean = false;\r\n  typeOptions: Array<any> = [];\r\n\r\n  selectedTab: string = \"needDeal\";\r\n  currentNodeDialog: Boolean = false;\r\n  currentNodeImg: string = \"\";\r\n  imgLoading: Boolean = false;\r\n\r\n  toDoMainPage: Boolean = true;\r\n  processItem: any = null;\r\n  edit: Boolean = true;\r\n\r\n  created() {\r\n    this.getTasksData(1);\r\n    this.getAllProcessed(1);\r\n    this.getAllProcessedClosed(1);\r\n  }\r\n  // 获取所有待办事项\r\n  async getTasksData(current: number) {\r\n    if (current) {\r\n      this.queryCriteriaDealing.current = current;\r\n    }\r\n    this.loading = true;\r\n    this.$http\r\n      .get(api.getUserTasks, {\r\n        params: this.queryCriteriaDealing\r\n      })\r\n      .then((res: any) => {\r\n        this.loading = false;\r\n        if (res.data.status) {\r\n          this.needDealTableData = res.data.data.records;\r\n          this.needDealTableTotal = res.data.data.total;\r\n          this.indexCustomNeedDeal = (res.data.data.current - 1) * res.data.data.size + 1;\r\n        } else {\r\n          this.$message.error(res.data.message);\r\n        }\r\n      })\r\n      .catch(() => {\r\n        this.loading = false;\r\n      });\r\n  }\r\n  // 获取所有已办-未完结事项\r\n  async getAllProcessed(current: number) {\r\n    if (current) {\r\n      this.queryCriteriaProcessed.current = current;\r\n    }\r\n    try {\r\n      let {\r\n        data: { data, status, message }\r\n      } = await this.$http.get(api.getProcessInstance, { params: this.queryCriteriaProcessed });\r\n      if (status) {\r\n        this.ProcessedTableData = data.records;\r\n        this.ProcessedTableTotal = data.total;\r\n        this.indexCustomProcessed = (data.current - 1) * data.size + 1;\r\n      } else {\r\n        this.$message.error(message);\r\n      }\r\n    } catch (e) {\r\n      return null;\r\n    }\r\n  }\r\n  // 获取所有已办-已完结事项\r\n  async getAllProcessedClosed(current: number) {\r\n    if (current) {\r\n      this.queryCriteriaClosed.current = current;\r\n    }\r\n    try {\r\n      let {\r\n        data: { data, status, message }\r\n      } = await this.$http.get(api.getAllClosedProcess, { params: this.queryCriteriaClosed });\r\n      if (status) {\r\n        this.closedTableData = data.records;\r\n        this.closedTableTotal = data.total;\r\n        this.indexCustomClosed = (data.current - 1) * data.size + 1;\r\n      } else {\r\n        this.$message.error(message);\r\n      }\r\n    } catch (e) {\r\n      return null;\r\n    }\r\n  }\r\n  // 渲染当前节点图片\r\n  async getCurrentNode(id: String) {\r\n    this.currentNodeDialog = true;\r\n    this.imgLoading = true;\r\n    this.currentNodeImg = `${api.getProcessImg}?processInstanceId=${id}`;\r\n    // console.log(this.currentNodeImg);\r\n    this.getImage();\r\n  }\r\n\r\n  getImage() {\r\n    this.$nextTick(() => {\r\n      let img: any = this.$refs[\"processImg\"];\r\n      let url = img.getAttribute(\"process-src\");\r\n      let request = new XMLHttpRequest();\r\n      let accessToken = cookieUtils.get(\"accessToken\");\r\n      request.responseType = \"blob\";\r\n      request.open(\"get\", url, true);\r\n      request.setRequestHeader(\"accessToken\", \"Bearer \" + accessToken);\r\n      request.onreadystatechange = e => {\r\n        if (request.readyState == XMLHttpRequest.DONE && request.status == 200) {\r\n          img.src = URL.createObjectURL(request.response);\r\n          img.onload = () => {\r\n            URL.revokeObjectURL(img.src);\r\n          };\r\n        }\r\n        this.imgLoading = false;\r\n      };\r\n      request.send(null);\r\n    });\r\n  }\r\n\r\n  // 处理待办\r\n  async dealProcess(process: any) {\r\n    console.log(process);\r\n    this.edit = true;\r\n    this.processItem = process;\r\n    this.toDoMainPage = false;\r\n  }\r\n  // 查看流程详情\r\n  async getProcessDetailInfo(process: any) {\r\n    console.log(\"查看详情\");\r\n    console.log(process);\r\n    this.processItem = process;\r\n    this.toDoMainPage = false;\r\n    this.edit = false;\r\n  }\r\n  pageSizeChange(size: any, index: number) {\r\n    if (index === 0) {\r\n      this.queryCriteriaDealing.pageSize = size;\r\n      this.getTasksData(1);\r\n    }\r\n    if (index === 1) {\r\n      this.queryCriteriaProcessed.pageSize = size;\r\n      this.getAllProcessed(1);\r\n    }\r\n    if (index === 2) {\r\n      this.queryCriteriaClosed.pageSize = size;\r\n      this.getAllProcessedClosed(1);\r\n    }\r\n  }\r\n  searchWithTab() {\r\n    switch (this.selectedTab) {\r\n      case \"needDeal\":\r\n        this.getTasksData(1);\r\n        break;\r\n      case \"processed-unclose\":\r\n        this.getAllProcessed(1);\r\n        break;\r\n      case \"processed-closed\":\r\n        this.getAllProcessedClosed(1);\r\n        break;\r\n      default:\r\n        this.getTasksData(1);\r\n    }\r\n  }\r\n  returnAndReload() {\r\n    this.toDoMainPage = true;\r\n    this.getTasksData(1);\r\n    this.getAllProcessed(1);\r\n    this.getAllProcessedClosed(1);\r\n  }\r\n}\r\n","import mod from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/ts-loader/index.js??ref--14-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ApprovalList.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/ts-loader/index.js??ref--14-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ApprovalList.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./ApprovalList.vue?vue&type=template&id=53f7a114&scoped=true&\"\nimport script from \"./ApprovalList.vue?vue&type=script&lang=ts&\"\nexport * from \"./ApprovalList.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./ApprovalList.vue?vue&type=style&index=0&id=53f7a114&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"53f7a114\",\n  null\n  \n)\n\nexport default component.exports","const api = {\r\n  getUserTasks: \"/admin/processInstance/getUserTasks\", // 获取用户待办任务\r\n  getProcessParameter: \"/admin/processInstance/getProcessParameter\", //获取流程节点的信息\r\n  handleTask: \"/admin/processInstance/handleTask\", // 处理待办\r\n  getProcessImg: \"/admin/processInstance/getProcessImg\", // 根据流程渲染当前节点图片\r\n  getProcessDetailInfo: \"/admin/processhistory/getHisProcComment/\",\r\n  getApplyFormValue: \"/admin/processhistory/getSumbitValue/\",\r\n  // 我的申请\r\n  getOngoingProcess: \"/admin/processhistory/getMyUnFinishedProcess\", // 未完结\r\n  getFinishedProcess: \"/admin/processhistory/getMyFinishedProcess\", // 已完结\r\n  getEventType: \"/api/eventType/getEventType\",\r\n  getAllProcessType: \"/admin/processType/procdeftype/findAll\",\r\n  processAssignState: \"/admin/processDesigner/public/process/processAssignState\", //获取流程是否已经指派，true为已指派\r\n  getAllProcessList: \"/admin/processDesigner/public/visible/getAllProcessByUserVisible\", // 获取当前用户所有可见流程\r\n  getFormDefine: \"/admin/formdesigner/getFormDefine\", // 根据流程id获取表单信息\r\n  getAllUserVisible: \"/admin/processDesigner/public/visible/getAllUser\", //模糊查询当前用户可见的所有人\r\n  getAssignTaskList: \"/admin/processDesigner/public/process/getAssignTaskList\",\r\n  getAllOrg: \"/admin/processDesigner/public/visible/getAllOrg\",\r\n  getAllRole: \"/admin/processDesigner/public/visible/getAllRole\",\r\n  getAllUser: \"/admin/processDesigner/public/visible/getAllUser\",\r\n  getFormList: \"/admin/formdesigner/getFormList\",\r\n  saveSubmitForm: \"/admin/processInstance/saveSubmitForm\", // 发起流程\r\n  getProcessInstance: \"/admin/processInstance/getProcessInstance\", // 获取所有已办-未完结\r\n  getAllClosedProcess: \"/admin/processhistory/getCompleteProcess\", // 获取所有已办-已完结\r\n  getRuntimeTaskAssignedList: \"/admin/processInstance/getRuntimeTaskAssignedList\", //查询某流程实例节点的指派情况\r\n  updateAssignedGroup: \"/admin/processInstance/updateAssignedGroup\" //动态指派任务节点\r\n};\r\n\r\nexport default api;\r\n","import mod from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ApprovalList.vue?vue&type=style&index=0&id=53f7a114&scoped=true&lang=scss&\"; export default mod; export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ApprovalList.vue?vue&type=style&index=0&id=53f7a114&scoped=true&lang=scss&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.detailLoading),expression:\"detailLoading\"}],staticClass:\"deal-page-main\"},[_c('el-tabs',{staticStyle:{\"position\":\"relative\"},attrs:{\"type\":\"card\"},model:{value:(_vm.currentTab),callback:function ($$v) {_vm.currentTab=$$v},expression:\"currentTab\"}},[(_vm.editMode)?_c('el-tab-pane',{key:\"current\",attrs:{\"label\":_vm.process.taskName,\"name\":\"currentTabPane\"}},[_c('el-form',{ref:\"submitNodeForm\",staticStyle:{\"margin-top\":\"20px\"},attrs:{\"model\":_vm.submitNodeForm,\"label-width\":\"120px\",\"size\":\"small\"}},[(_vm.process.formContent)?_c('el-row',[_c('div',{staticClass:\"form-name\"},[_vm._v(\"审批表单\")])]):_vm._e(),_c('q-custom-input',{ref:\"customInput\",attrs:{\"custom-options\":_vm.currentNodeForm}}),_c('div',{staticClass:\"deal-process-result\"},[_c('el-form-item',{attrs:{\"label\":\"处理任务：\",\"prop\":\"handle\",\"rules\":{ required: true, message: '该选项为必填项', trigger: 'blur' }}},[(_vm.process.isFirst)?[_c('el-radio',{attrs:{\"label\":\"pass\"},model:{value:(_vm.submitNodeForm.handle),callback:function ($$v) {_vm.$set(_vm.submitNodeForm, \"handle\", $$v)},expression:\"submitNodeForm.handle\"}},[_vm._v(\"重新发起\")])]:[_c('el-radio',{attrs:{\"label\":\"pass\"},model:{value:(_vm.submitNodeForm.handle),callback:function ($$v) {_vm.$set(_vm.submitNodeForm, \"handle\", $$v)},expression:\"submitNodeForm.handle\"}},[_vm._v(\"通过 \")]),(!_vm.handleState && _vm.process.nextTaskCount === 2)?_c('el-radio',{attrs:{\"label\":\"reject\"},model:{value:(_vm.submitNodeForm.handle),callback:function ($$v) {_vm.$set(_vm.submitNodeForm, \"handle\", $$v)},expression:\"submitNodeForm.handle\"}},[_vm._v(\"驳回\")]):_vm._e()]],2),_c('el-form-item',{attrs:{\"label\":\"备注：\"}},[_c('el-input',{attrs:{\"type\":\"textarea\",\"rows\":2,\"resize\":\"none\"},model:{value:(_vm.submitNodeForm.taskRemark),callback:function ($$v) {_vm.$set(_vm.submitNodeForm, \"taskRemark\", $$v)},expression:\"submitNodeForm.taskRemark\"}})],1),(false)?_c('el-form-item',{attrs:{\"label\":\"抄送：\"}},[_c('el-select',{staticStyle:{\"max-width\":\"360px\"},attrs:{\"multiple\":\"\",\"remote\":\"\",\"size\":\"small\",\"remote-method\":_vm.findUserByName,\"reserve-keyword\":\"\",\"filterable\":\"\",\"placeholder\":\"请输入姓名\"},model:{value:(_vm.submitNodeForm.targetUserIds),callback:function ($$v) {_vm.$set(_vm.submitNodeForm, \"targetUserIds\", $$v)},expression:\"submitNodeForm.targetUserIds\"}},_vm._l((_vm.userInfoList),function(item){return _c('el-option',{key:item.userId,attrs:{\"label\":item.userName,\"value\":item.userId}})}),1)],1):_vm._e()],1)],1)],1):_vm._e(),_vm._l((_vm.processDefines),function(item,index){return _c('el-tab-pane',{key:index,attrs:{\"label\":item.taskName ? item.taskName : '发起',\"name\":item.taskKey ? ((item.taskKey) + \"-\" + index) : 'startUserName'}},[_c('el-form',{staticStyle:{\"margin-top\":\"20px\"},attrs:{\"size\":\"small\",\"label-width\":\"120px\"}},[_c('div',{staticClass:\"form-name\"},[_vm._v(_vm._s(item.taskName ? \"审批表单\" : \"申请表单\"))]),(item.taskKey)?[(item.formValue && item.formValue !== 'null')?[_c('q-custom-input',{attrs:{\"custom-options\":JSON.parse(item.formValue),\"disabled\":\"\"}})]:_vm._e(),_c('el-row',{staticClass:\"partition-line\"},[_c('el-form-item',{staticStyle:{\"width\":\"33.3%\"},attrs:{\"label\":\"处理结果：\"}},[_c('el-input',{attrs:{\"size\":\"small\",\"disabled\":\"\",\"model\":item.comment.type,\"placeholder\":item.comment.type === 'pass' ? '通过' : '驳回'}})],1),_c('el-form-item',{attrs:{\"label\":\"审批时间：\"}},[_c('el-input',{attrs:{\"placeholder\":_vm.$moment(item.comment.time).format('YYYY-MM-DD HH:mm:ss'),\"disabled\":\"\"}})],1),_c('el-form-item',{attrs:{\"label\":\"审批人：\"}},[_c('el-input',{attrs:{\"placeholder\":item.comment.userId,\"disabled\":\"\"}})],1),_c('el-form-item',{attrs:{\"label\":\"备注：\"}},[_c('el-input',{attrs:{\"type\":\"textarea\",\"rows\":2,\"resize\":\"none\",\"disabled\":\"\"},model:{value:(item.comment.message),callback:function ($$v) {_vm.$set(item.comment, \"message\", $$v)},expression:\"item.comment.message\"}})],1)],1)]:[_c('q-custom-input',{attrs:{\"custom-options\":_vm.startNodeForm,\"disabled\":\"\"}}),_c('el-row',{staticClass:\"partition-line\"},[_c('el-form-item',{attrs:{\"label\":\"申请时间：\"}},[_c('el-input',{attrs:{\"disabled\":\"\"},model:{value:(_vm.startNodeTime),callback:function ($$v) {_vm.startNodeTime=$$v},expression:\"startNodeTime\"}})],1),_c('el-form-item',{attrs:{\"label\":\"申请人：\"}},[_c('el-input',{attrs:{\"disabled\":\"\"},model:{value:(item.comment.userId),callback:function ($$v) {_vm.$set(item.comment, \"userId\", $$v)},expression:\"item.comment.userId\"}})],1),_c('el-form-item',{attrs:{\"label\":\"备注：\"}},[_c('el-input',{attrs:{\"type\":\"textarea\",\"rows\":2,\"resize\":\"none\",\"disabled\":\"\"},model:{value:(item.comment.message),callback:function ($$v) {_vm.$set(item.comment, \"message\", $$v)},expression:\"item.comment.message\"}})],1)],1)]],2)],1)})],2),_c('div',{staticClass:\"return-back-button\"},[(_vm.currentTab === 'currentTabPane')?_c('el-button',{attrs:{\"size\":\"small\",\"type\":\"primary\"},on:{\"click\":_vm.dealedProcess}},[_vm._v(\"\\n      提交\\n    \")]):_vm._e(),_c('el-button',{attrs:{\"size\":\"small\"},on:{\"click\":_vm.returnMainPage}},[_vm._v(\"返回\")])],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\nimport { Vue, Component, Prop, Model, Watch } from \"vue-property-decorator\";\r\nimport api from \"@/microApps/myProcess/api\";\r\n\r\n@Component({})\r\nexport default class DealProcessDetails extends Vue {\r\n  @Prop({ type: Object, default: () => {}, required: true })\r\n  process!: any;\r\n  @Prop({ type: Boolean, default: true })\r\n  editMode!: Boolean;\r\n\r\n  detailLoading: boolean = true;\r\n  currentTab: String = this.editMode ? \"currentTabPane\" : \"startUserName\";\r\n  processDefines: any[] = [];\r\n  startNodeForm: any[] = [];\r\n  startNodeTime: String = \"\";\r\n  startUserName: String = \"\";\r\n  targetUserIds: any[] = [];\r\n  currentNodeForm: any[] = [];\r\n  submitNodeForm: any = {\r\n    //存入默认空字符与空数组，避免后端报错\r\n    taskRemark: \" \",\r\n    formValue: \"\",\r\n    targetUserIds: [],\r\n    handle: \"pass\"\r\n  };\r\n  handleState: Number = 0;\r\n\r\n  userInfoList: any[] = [];\r\n\r\n  created() {\r\n    if (this.editMode) {\r\n      // 审批模式\r\n      this.dealProcess().then(() => (this.detailLoading = false));\r\n      this.submitNodeForm.taskId = this.process.taskId;\r\n      // this.startNodeTime = this.$moment(this.process.createTime).format(\"YYYY-MM-DD HH:mm:ss\");\r\n    } else {\r\n      // 查看模式\r\n      this.getProcessHistory();\r\n      this.getApplyFormValue().then(() => (this.detailLoading = false));\r\n      // this.startNodeTime = this.$moment(this.process.startTime).format(\"YYYY-MM-DD HH:mm:ss\");\r\n    }\r\n  }\r\n  // 获取节点详情\r\n  async dealProcess() {\r\n    try {\r\n      let {\r\n        data: { data, status, message }\r\n      } = await this.$http.get(api.getProcessParameter, {\r\n        params: {\r\n          processInstanceId: this.process.processInstanceId,\r\n          taskId: this.process.taskId\r\n        }\r\n      });\r\n      if (status) {\r\n        this.processDefines = data.comments;\r\n        this.startNodeForm = JSON.parse(data.formSubmit.formSubmitValue).map((n: any) => {\r\n          if (n.attrType) {\r\n            return n;\r\n          } else {\r\n            return {\r\n              name: n.title,\r\n              attrType: \"text\",\r\n              value: n.value,\r\n              dataRange: { presetText: \"\" }\r\n            };\r\n          }\r\n        });\r\n        this.startNodeTime = this.$moment(data.formSubmit.createTime).format(\"YYYY-MM-DD HH:mm:ss\");\r\n        if (this.process.isFirst) {\r\n          this.currentNodeForm = JSON.parse(JSON.stringify(this.startNodeForm));\r\n        } else {\r\n          this.currentNodeForm = this.process.formContent ? JSON.parse(this.process.formContent) : [];\r\n        }\r\n      } else {\r\n        this.$message.error(message);\r\n      }\r\n    } catch (e) {\r\n      return null;\r\n    }\r\n  }\r\n  // 模糊查询，选择抄送人\r\n  findUserByName(name: String) {\r\n    this.$http\r\n      .get(api.getAllUserVisible, {\r\n        params: { userName: name }\r\n      })\r\n      .then((res: any) => {\r\n        if (res.data.status) {\r\n          this.userInfoList = res.data.data;\r\n        } else {\r\n          this.$message.error(res.data.message);\r\n        }\r\n      });\r\n  }\r\n  // 提交处理结果\r\n  async dealedProcess() {\r\n    (this.$refs[\"submitNodeForm\"] as any).validate(async (valid: any) => {\r\n      if (valid) {\r\n        let data: any = await (this.$refs.customInput as any).formValidation();\r\n        if (data) {\r\n          this.submitNodeForm.formValue = JSON.stringify(this.currentNodeForm);\r\n          this.$http.post(api.handleTask, this.submitNodeForm).then((res: any) => {\r\n            if (res.data.status) {\r\n              this.$message.success(\"流程处理成功！\");\r\n              this.returnMainPage();\r\n            } else {\r\n              this.$message.error(res.data.message);\r\n            }\r\n          });\r\n        } else {\r\n          return false;\r\n        }\r\n      } else {\r\n        return false;\r\n      }\r\n    });\r\n  }\r\n  // 查看已处理流程 => 获取流程历史处理详情\r\n  async getProcessHistory() {\r\n    this.$http.get(`${api.getProcessDetailInfo}${this.process.processInstanceId}`).then((res: any) => {\r\n      this.processDefines = res.data;\r\n    });\r\n  }\r\n  // 获取申请人提交表单详情\r\n  async getApplyFormValue() {\r\n    this.$http.get(`${api.getApplyFormValue}${this.process.processInstanceId}`).then((res: any) => {\r\n      this.startNodeForm = JSON.parse(res.data.formSubmitValue).map((n: any) => {\r\n        if (n.attrType) {\r\n          return n;\r\n        } else {\r\n          return {\r\n            name: n.title,\r\n            attrType: \"text\",\r\n            value: n.value,\r\n            dataRange: { presetText: \"\" }\r\n          };\r\n        }\r\n      });\r\n      this.startNodeTime = this.$moment(res.data.createTime).format(\"YYYY-MM-DD HH:mm:ss\");\r\n      this.startUserName = res.data.userName;\r\n    });\r\n  }\r\n\r\n  // 返回待办列表\r\n  returnMainPage() {\r\n    this.$emit(\"clickReturn\");\r\n  }\r\n}\r\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--14-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DealProcessDetails.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--14-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DealProcessDetails.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./DealProcessDetails.vue?vue&type=template&id=2328e79a&scoped=true&\"\nimport script from \"./DealProcessDetails.vue?vue&type=script&lang=ts&\"\nexport * from \"./DealProcessDetails.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./DealProcessDetails.vue?vue&type=style&index=0&id=2328e79a&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"2328e79a\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DealProcessDetails.vue?vue&type=style&index=0&id=2328e79a&scoped=true&lang=scss&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DealProcessDetails.vue?vue&type=style&index=0&id=2328e79a&scoped=true&lang=scss&\""],"sourceRoot":""}